{
    "version": "https://jsonfeed.org/version/1",
    "title": "Swiftjective-C",
    "description": "Swiftjective-C is a periodical over modern iOS software engineering. It houses tactful discussions over Swift, Objective-C and developing high quality apps while peering into various frameworks to see what makes them tick.\n",
    "home_page_url": "http://localhost:4000/",
    "feed_url": "http://localhost:4000/feed.json",
    "author": {
        "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
    "items": [
      {
            "id": "http://localhost:4000/On-Forming-Habits",
            "url": "http://localhost:4000/On-Forming-Habits/",
            "title": "On Forming Habits",
            "content_html": "<p>Ah, the New Year üéâ!</p>\n\n<p>I think <a href=\"https://www.youtube.com/watch?v=2MwhxdGAnic\">Death Cab for Cutie</a> put it best:</p>\n\n<blockquote>\n  <p>So this is the New Year / And I don‚Äôt feel any different.</p>\n</blockquote>\n\n<p>I‚Äôve danced with the whole ‚Äúnew year, new you!‚Äù concept more times than I care to count. Now, at age 31, I feel like I‚Äôve finally arrived at a point where I can actually reflect on my year and make changes to get things done that I want to accomplish.</p>\n\n<p>This is big as an indie dev, because without a system in place <a href=\"http://localhost:4000/Introducing-Spend-Stack\">Spend Stack</a> simply would not exist. Why? Because I have three kids under six, am married, have a full time job, an indie app, a blog and, well, my own hobbies. I used to think time was too short, or there simply wasn‚Äôt enough of it. However, with some tweaks, I truly believe there is enough time in the day to live the lives that we want if we have the right habits to support it.</p>\n\n<p>After many mistakes, I know that if my day doesn‚Äôt have structure produced by some recurring habits, it gets lost in life‚Äôs many responsibilities. Today, I‚Äôll share the system I have in place, and the apps that help support it, that have helped me form good habits.</p>\n\n<h3 id=\"forgetting-goals\">Forgetting Goals</h3>\n<p>Years ago, if someone had told me to forget setting goals in the name of productivity, I‚Äôd call them mad. But I‚Äôve since changed my thinking on them. As evidenced by books such as <a href=\"https://www.amazon.com/Irresistible-Addictive-Technology-Business-Keeping/dp/1594206643\">Irresistible</a>, <a href=\"https://www.amazon.com/Make-Time-Focus-Matters-Every/dp/0525572422\">Make Time</a> and <a href=\"https://jamesclear.com/atomic-habits\">Atomic Habits</a>, the problem I‚Äôve found with goals is that you stay on the hamster wheel.</p>\n\n<p>Accomplish one, then another immediately follows.</p>\n\n<p>For me, I need a smooth, constant feeling of accomplishment, and goals give me peaks and valleys. I‚Äôve certainly found I admire goals much more than I enjoy them, so I‚Äôve taken their good aspects and tossed out the rest instead of following another hackneyed goal system I might come up with.</p>\n\n<p>These days, I‚Äôm all about forming a system in my life to become the person who would accomplish the goals I want to.</p>\n\n<p>üë®üèª‚Äçüíª Is shipping Spend Stack a goal? Then become an indie dev.<br />\nüèÉüèª‚Äç‚ôÇÔ∏è Is getting in shape a goal? Then become athletic.<br />\nüìñ Is delivering conference talks a goal? Become a speaker.<br /></p>\n\n<p>And so on.</p>\n\n<p>But in 2020, talk is still cheap. I need concrete methods to carry out a plan because hearing it and doing it are two different things. To that end, I‚Äôve found that if I discover who I want to be and what major themes I want to accomplish - I can then formulate smaller goals from that information.</p>\n\n<p>At that point, I mostly disregard them and come up with a system to help me become the person who would be likely to routinely do those things.</p>\n\n<p><strong>The TL;DR - For me it‚Äôs less about setting goals, and more about working backward from those goals to become the kind of person who would do those things by getting ‚Äú1%‚Äù better as often as I can.</strong></p>\n\n<p>Here‚Äôs how it works for me.</p>\n\n<h3 id=\"the-journal-aspect\">The Journal Aspect</h3>\n<p>The first step is laying the foundation. Who am I, what am I about? What‚Äôs important to me, and what do I want to be known for? To help answer those kinds of things, I have evergreen journal entry in Day One that I read each morning to set my frame of reference:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/dayone.png\" role=\"presentation\" srcset=\"../assets/images/dayone.png\" /></p>\n\n<p>The information in the rest of that entry simply states things I‚Äôd like to do at a more finite level. The key is that I may or may not do some of these things, as I‚Äôve written a generous amount of tasks down. So, the idea here is that having them front and center will help me remember the person I‚Äôm trying to be. This way, I avoid only thinking in terms of arbitrary boxes I‚Äôm trying to tick off in 2020 which would only lead to yet another set of boxes to check off.</p>\n\n<p>To get to this quickly, I‚Äôve set up a trivial Shortcut that opens its respective URL:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/dayoneURL.jpeg\" role=\"presentation\" srcset=\"../assets/images/dayoneURL.jpeg\" /></p>\n\n<p>If I read a simple document written by myself to give me that North Star (a concept I‚Äôve talked a lot <a href=\"http://localhost:4000/Can-You-Learn-Design\">about</a>) for my life, I feel centered and my mind is a bit less cluttered.</p>\n\n<p>Once I‚Äôve read the ‚Äúbig idea‚Äù though, it‚Äôs time to shift my focus to the day to day things.</p>\n\n<h3 id=\"foundational-habits\">Foundational Habits</h3>\n<p>Things I need to do every single day are what I call foundational habits. This is the part where it becomes easy to make things far too ambiguous, so I‚Äôve sectioned off foundational habits on an app by app basis, each one representing different domains of my life.</p>\n\n<p>Streaks is what I use to remind myself to do certain things each day of my life. I even order them in the same way I typically go about my day:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/streaksFH.png\" role=\"presentation\" srcset=\"../assets/images/streaksFH.png\" /></p>\n\n<p>There‚Äôs a reason this has snagged one of the coveted Apple Design Awards - it‚Äôs simple to use, engaging and does one thing well. So I lean into it and try not to make it anything other than what it‚Äôs trying to do. An app that helps me do six things daily.</p>\n\n<p>So, ask yourself, based on the ‚Äúbig ideas‚Äù you have for your life - what things should you be doing, or want to do, daily?</p>\n\n<h3 id=\"highlight-tasks\">Highlight Tasks</h3>\n<p>However, daily tasks are stringent by nature. We all have those moon shot goals in mind. Or, we simply have a bigger highlight (a term coined by the aforementioned Make Time book) that we want to tackle over one or more days.</p>\n\n<p>For this, I turn to Things 3. Here are some examples of things I‚Äôve recently put in Things (zing!):</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/things.png\" role=\"presentation\" srcset=\"../assets/images/things.png\" /></p>\n\n<p>Clean out the entry closet, take items to Good Will or shoot hoops with my son - these are all great things that support who I want to be but aren‚Äôt likely to repetitive daily items. So, that kind of item goes here.</p>\n\n<p>With daily tasks and highlights accounted for, we now get into the menial tasks.</p>\n\n<h3 id=\"familylifehusbanddadindie-tasks\">Family/Life/Husband/Dad/Indie Tasks</h3>\n<p>Life has so many responsibilities, and for the ‚Äúremember to take out the trash‚Äù or ‚Äúpay my personal property tax by December 31st‚Äù kind of things I use Reminders. The key here is that these kinds of entries are either family-related or just plain ‚Äúadulting‚Äù tasks:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/reminders.png\" role=\"presentation\" srcset=\"../assets/images/reminders.png\" /></p>\n\n<p>Since its iOS 13 overhaul, I‚Äôve found Reminders to be even more component. I‚Äôve always been a fan, but with its new features (such as grouped tasks) I‚Äôve been able to lean on it even more.</p>\n\n<p>Further, this is the <em>only</em> tool I use for side project or Spend Stack action items.</p>\n\n<p>Why?</p>\n\n<p>Because it‚Äôs beautifully limiting. With so much happening in life, I found that if I opened up super tools (such as Github Issues, Asana or something similar) I would write a novel and likely not ever return to read it again. But Reminders is short and unforgivably terse.</p>\n\n<p>This is a perfect set of restrictions for me, and I‚Äôd imagine it‚Äôs the same reason a lot of creative folks produce breakthroughs under a certain level of rigidity or constraints. It forces only important ideas out. For the higher-level stuff, I use Notion. For the Do X and Y stuff, I use Reminders and love it.</p>\n\n<h3 id=\"app-recap\">App Recap</h3>\n<p>For reference, here‚Äôs a recap of the apps I‚Äôve mentioned:</p>\n\n<ul>\n  <li><a href=\"https://dayoneapp.com\">Day One</a>: Journaling and ‚Äúbig picture‚Äù stuff.</li>\n  <li><a href=\"https://streaksapp.com\">Streaks</a>: Foundational, every single day things.</li>\n  <li><a href=\"https://culturedcode.com/things/\">Things 3</a>: ‚ÄúHighlight‚Äù-esque tasks.</li>\n  <li>Reminders in iOS: Family, adulting or Spend Stack centric tasks.</li>\n  <li>Shortcuts: To quickly open Day One entries.</li>\n  <li><a href=\"https://www.notion.so\">Notion</a>: For big picture ideas and documents related to Spend Stack.</li>\n</ul>\n\n<p>Depending on your personality type, my system may sound like the most stressful thing since taking the ACT. That‚Äôs ok, my wife fits into this category. She‚Äôs a more of a ‚Äúgo with the flow‚Äù gal, and she balances me out in many ways.</p>\n\n<p>But, if you‚Äôre laughably Type-A like yours truly, having everything in its place and place for everything is simply invigorating and habit forming. While this may appear on the surface as too many tools to use - they each are serving a simple purpose. And that removes any ambiguity from my head, which helps me form the habits I want to.</p>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>Over the years, I‚Äôve discovered one truth when it comes to habits and the likelihood that I‚Äôll achieve them - it‚Äôs about the 1% wins. As James Clear noted, the same way that investing in your 20s leads to riches through the magic of compound interest, so to do 1% habits in your day to day lead to compounded results over time.</p>\n\n<p>In the end, that‚Äôs all my little system does. 1% wins help me learn from the past, produce in the present and prepare for the future. If my goal is to write a book, I don‚Äôt write that down as the thing I want to do. Instead, I need to figure out what to do to become a writer. May you have an amazing 2020 in accomplishing all of your aspirations, and heres to better habits üçª!</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Ah, the New Year üéâ!",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-01-01T00:00:00-06:00",
            "date_modified": "2020-01-01T00:00:00-06:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/Can-You-Learn-Design",
            "url": "http://localhost:4000/Can-You-Learn-Design/",
            "title": "Can You Learn Design?",
            "content_html": "<p>Did you know that the version of Spend Stack I released a few short months ago is actually‚Ä¶ <em>not</em> the first version?</p>\n\n<p>It‚Äôs true that I did take <a href=\"http://localhost:4000/Introducing-Spend-Stack\" target=\"_blank\">many years to design and develop it</a>, and it‚Äôs also true that was due to a variety of reasons (having three kids, married, job - life stuff). But another important reason was that I was teaching myself design. If I had to guess, that‚Äôs where more than half of those years went.</p>\n\n<p>Why?</p>\n\n<p>Well, because <em>this thing</em> is how the first version of Spend Stack looked:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/fugly.png\" role=\"presentation\" srcset=\"../assets/images/fugly.png\" /></p>\n\n<p>For real - I‚Äôm dead serious! I even had a good friend whip up a promo trailer for it:</p>\n\n<style>\n.embed-container {\n    position: relative;\n    padding-bottom: 56.25%;\n    height: 0;\n    overflow: hidden;\n    max-width: 100%;\n}\n\n.embed-container iframe,\n.embed-container object,\n.embed-container embed {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n</style>\n\n<div class=\"embed-container\">\n\t<iframe src=\"https://player.vimeo.com/video/101882671\" frameborder=\"0\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"></iframe>\n</div>\n<p><br /></p>\n\n<p>This might strike you as quite surprising if you‚Äôve ever used or have seen Spend Stack, because this is how it looks today:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/headerSS.jpeg\" role=\"presentation\" srcset=\"../assets/images/headerSS.jpeg\" /></p>\n\n<p>Given that, the obvious question becomes:</p>\n\n<p><strong>How did I go from something that was objectively bad design, to making the design become a strength of the app?</strong></p>\n\n<p>Today, I‚Äôm going to lay out eight core lessons I learned over the years which helped me appreciate design. They each will help answer the question of ‚ÄúHow can indie devs learn about design?‚Äù   While I still wouldn‚Äôt consider myself a designer, I‚Äôd submit to you that it‚Äôs nearly undeniable how much better Spend Stack looks, works and functions today in comparison to what it did five years ago.</p>\n\n<blockquote>\n  <p>A small sidebar before we continue - what follows below lays squarely in the ‚Äúthis is my opinion‚Äù category. Simply put, these are the things that helped me out. Design has objective truths, but can also have many subjective opinions. My goal here is to shed light on some design practices for those indie devs out there who might be stuck with it as I was. Let me tell you, I have not figured out design. I still see a million things wrong in Spend Stack today, but I‚Äôm getting there.</p>\n</blockquote>\n\n<p>That said, without further ado here are the lessons I‚Äôve learned, and the order in which I learned them:</p>\n\n<ul>\n  <li><a href=\"#syci\">1. Something You Can‚Äôt Ignore</a></li>\n  <li><a href=\"#swams\">2. Start with a Mission Statement</a></li>\n  <li><a href=\"#wif\">3. Who‚Äôs It For?</a></li>\n  <li><a href=\"#nswt\">4. Never Start with Technology</a></li>\n  <li><a href=\"#fnsa\">5. Find North Star Apps</a></li>\n  <li><a href=\"#aay\">6. Always Ask Yourself</a></li>\n  <li><a href=\"#hdadt\">7. How Does Apple Do This?</a></li>\n  <li><a href=\"#dcm\">8. Design Centric Materials</a></li>\n</ul>\n\n<h3 id=\"syci\">Lesson 1: Something You Can‚Äôt Ignore</h3>\n<p>The first thing I realized about Spend Stack of yore was that the idea of the app was validated, but the design made your eyes bleed. As such, the app‚Äôs idea or functionality (which are intrinsically tied to its design) didn‚Äôt matter much.</p>\n\n<blockquote>\n  <p>In this lesson, when I say ‚Äúdesign‚Äù I‚Äôm more pertaining to the ‚Äúsmell test‚Äù/judge-a-book-by-its-cover bits of design. Design is a function of many things - how it works, what it does and how it does it, not just how it looks. But in this lesson, it‚Äôs all about the looks.</p>\n</blockquote>\n\n<p>It could solve a problem, it could save you money. Nay, it could just <em>print</em> money. It could cure diseases!</p>\n\n<p>But if the design sucks, nobody will care. Because this is the App Store, and not really a B.2.B. market where a terminal U.I. can still win contracts. Realizing this, I had a little saying that was in my Notion workspace for all things Spend Stack, and it simply said the following:</p>\n\n<blockquote>\n  <p>‚ÄúDesign isn‚Äôt everything, but it is the only thing that matters.‚Äù</p>\n</blockquote>\n\n<p>And you can debate it however you want.</p>\n\n<p>Functionality and user experience are paramount. But to me, those are a byproduct of good design. Marketing, validating your idea, having an incredible app that does one thing well - all of those things matter. But if the app doesn‚Äôt look and feel right, people won‚Äôt give it a chance.</p>\n\n<p>Of course, nothing I am saying here is gospel. There are exceptions to every rule. But playing the averages, the numbers say that an ugly app that does a thing well will probably sell far less than a beautiful app that‚Äôs not really giving you much.</p>\n\n<p>You have to take design seriously, you have to learn things about it and you have to be critical of your own apps and figure out why or why not its design works.</p>\n\n<p>To make this abstract idea and make it more concrete, consider this view in the first Spend Stack that was used to create a list:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/fuglier.png\" role=\"presentation\" srcset=\"../assets/images/fuglier.png\" /></p>\n\n<p>Why do I consider it poor design? Here are a few reasons:</p>\n\n<p><strong>1)</strong> The hints at the top are already an issue. As they say, user interfaces are like a joke in that if you have to explain them, they aren‚Äôt funny (i.e. functional). <br />\n<strong>2)</strong> Those hints are there because to create the new list, you had to swipe down. The gesture was hidden. <br />\n<strong>3)</strong> Because of that, this view hides its main functionality - which is creating a new list. A button should have been used here. <br />\n<strong>4)</strong> The colors. <br />\n<strong>5)</strong> To input data for each option (such as the name, tax rate and more) you had to swipe within the middle box area. A list would easily convey the view‚Äôs affordances. <br />\n<strong>6)</strong> I firmly believe being a <a href=\"http://localhost:4000/A-Best-in-Class-App\" target=\"_blank\">best in class app</a> is part of design on iOS. Given that, this view ignores accessibility fonts, dark mode and much more.</p>\n\n<p>To contrast that view, here is what it looks like today:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/newList.png\" role=\"presentation\" srcset=\"../assets/images/newList.png\" /></p>\n\n<p>Much better. The process of redesigning Spend Stack made me appreciate how important design is. You‚Äôve no other recourse but to consider it as much as we do software architecture or whether to use SwiftUI versus UIKit. I realized that design is something you can‚Äôt ignore. You have to think of it constantly, and users will know it when they see it.</p>\n\n<p>So as you go about your indie dev days, remember:</p>\n\n<p><strong>Lesson one: Design is something you can‚Äôt ignore.</strong></p>\n\n<h3 id=\"swams\">Lesson 2: Start with a Mission Statement</h3>\n<p>Much like a ship wouldn‚Äôt leave port without a destination in mind, so too should indie developers define what their app will do before putting code to compiler.</p>\n\n<p>And this is hard to grasp for a lot of us because all apps technically start with an idea. But an idea is dangerous! Why? Because an idea is an amorphous blob of several themes, problems, aspirations, and jobs - almost all of which should be shed in the beginning phases of your app‚Äôs inception. Conversely, a mission statement proudly proclaims in one sentence what your app will do and what problem it solves.</p>\n\n<p>For example, let‚Äôs say you had an idea to create a podcast player. Most of us will crack open Xcode and rock and roll. Months later, we might release something that isn‚Äôt differentiated in any meaningful way, does the same thing as most other podcast players and leaves no lasting reason for why anyone should let go of other established players such as Overcast, Castro or Apple‚Äôs built-in solution.</p>\n\n<p>To help mitigate such an outcome - I‚Äôve found that it often helps to bottle that excitement stemming from your idea up, and hone it down into something tangible and zeroed in. Ask yourself a few questions to develop your idea into a mission statement. Following our podcasting example:</p>\n\n<ul>\n  <li>Why do I want to make a podcast player?</li>\n  <li>Can mine offer things that other podcast players do not? Even if it‚Äôs a better, or different, design that people would want?</li>\n  <li>If the answer is ‚Äúnot much‚Äù, what shortcomings do the current solutions have that I could make up for?</li>\n  <li>And if I can do either of these things, is it worth it to me to put the time in to see it through?</li>\n  <li>If it is, will it be a pet project or something I want to sell?</li>\n  <li>Given this information - can I make a mission statement for this app?</li>\n</ul>\n\n<p>A mission statement is powerful - it could literally save (or make you!) thousands of dollars while preventing wasted hours along with heartache and disappointment. If you‚Äôve got a mission statement, you know what to make, what to cut and where to go next. Plus, users will have a much better idea of what they are buying - because they‚Äôll simply <em>know what it is and the problem it will solve</em>.</p>\n\n<p>I think Dale Carnegie put it best:</p>\n\n<blockquote>\n  <p>‚ÄúAnd if salespeople can show us how their services or merchandise will help us solve our problems, they won‚Äôt need to sell us. We‚Äôll buy. And customers like to feel that they are buying‚Äînot being sold.‚Äù</p>\n</blockquote>\n\n<p>On a marketing document I often visit, I have my mission statement front and center to remind me to consider all of my upcoming decisions against it:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/statement.png\" role=\"presentation\" srcset=\"../assets/images/statement.png\" /></p>\n\n<p>It‚Äôs helped me cut features, know when to add features and so much more. You simply can‚Äôt leave home without it. Tonight, as you map out your next app or consider adding to your current one - remember:</p>\n\n<p><strong>Lesson two: Well designed apps stem from a focused mission statement.</strong></p>\n\n<h3 id=\"wif\">Lesson 3: Who‚Äôs It For?</h3>\n<p>If you‚Äôve got a mission statement, you can hunt down a persona for the app. Personas are awesome. Straight up. I‚Äôll be the first to admit I found them a bit cheesy, only suitable for corporate board room exercises. But I just didn‚Äôt see their value, and now that I have it‚Äôs hard to think about skipping out on them.</p>\n\n<p>Developing a persona for your app is simply the process of mapping who your user might be. And if you know who your use might be, you can surmise all sorts of important things:</p>\n\n<p><strong>1)</strong> What do you they value? <br />\n<strong>2)</strong> Where do they hang out, and what do they do? <br />\n<strong>3)</strong> Most importantly, does my mission statement solve problems that they currently have? <br /></p>\n\n<p>If you‚Äôve got a target customer with a problem you can solve, that‚Äôs a huge first step. Considering it, you can consider if they might pay for your solution.</p>\n\n<blockquote>\n  <p>This lesson comes with an asterisk. Maybe you don‚Äôt care about making money on your app. If that‚Äôs the case, skip on to the next lesson. But even if you don‚Äôt, it‚Äôs still important to figure out who you‚Äôre making the app for - if only for people like yourself.</p>\n</blockquote>\n\n<p>This phase is especially difficult because iOS apps tend to have broad appeal. Given that, they often solve  ‚Äúvitamin‚Äù problems. In his book <a href=\"https://www.goodreads.com/en/book/show/27250038-marketing-for-developers\">Marketing for Developers</a> Justin Jackson laid out a way to consider whether or not your target customer might be willing to buy your product. He did so with a pain tolerance concept, and I don‚Äôt remember it word for word but the gist of it really resonated with me.</p>\n\n<p>Is the problem you‚Äôre solving a major, game-changing issue your target customers are facing? It‚Äôs a life or death problem - they‚Äôll be willing to pay handsomely for something to take this problem off of their hands. Or, maybe it‚Äôs a bone-breaking problem. It hurts pretty bad, but they‚Äôve made due. Maybe there is a temporary stint they‚Äôve applied to the problem, so they want it addressed and would likely pay for it to go away.</p>\n\n<p>The idea keeps going down until you reach a ‚Äúvitamin‚Äù level problem. These are problems that are minor nuisances, and if a person simply takes their vitamins they go away. They will likely only pay for a solution to the problem if it really speaks to them, or it solves the issue extremely well and for a small price.</p>\n\n<p>In addition to knowing if your target customer might pay for it, knowing who they are defines a lot of other things, too. Every app has a voice, and your target customer helps define it. If a networking error occurs, you‚Äôll know if they would enjoy copy in the error messaging U.I. that‚Äôs funny, or if they‚Äôd prefer a more formal tone. This concept flows throughout each part of your design.</p>\n\n<p>Before you crack open Sketch or tab over to Figma, remember:</p>\n\n<p><strong>Lesson three: To design well, you‚Äôve got to have an idea of who you‚Äôre designing for.</strong></p>\n\n<h3 id=\"nswt\">Lesson 4: Never Start with Technology</h3>\n<p>And now we arrive at my most painful tendency as an indie dev. I‚Äôm talking, of course, about using a particular technology because it‚Äôs either new, fun or we just want to learn it.</p>\n\n<p>In the first version of Spend Stack, I had swipe to delete:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/swipeDelete.png\" role=\"presentation\" srcset=\"../assets/images/swipeDelete.png\" /></p>\n\n<p>And do you know why?</p>\n\n<p>Because six or seven years ago (before this UX was common and built right into iOS) I found a Github project that did it. And I thought it was cool. So, I jammed it into my app.</p>\n\n<p>I didn‚Äôt ask any other questions or stop to think about why I was doing what I was doing. That‚Äôs a sign-in of itself. You can see where I‚Äôm going with this, but I‚Äôve made this mistake so many times and lost so many hours because of it - I might as well be writing a diary entry right now. And it would say only this:</p>\n\n<p>‚ÄúDefine the problems first, and work your way back with the technology that solves them. Don‚Äôt start with the technology, and look for problems to solve.‚Äù</p>\n\n<p>The famous Steve Job <a href=\"https://www.youtube.com/watch?v=FF-tKLISfPE\">rebuttle to some public criticism</a> demonstrated this point succinctly. In it, he said:</p>\n\n<p>‚ÄúOne of the things I‚Äôve always found is that you‚Äôve got to start with the customer experience and work backward to the technology, you can‚Äôt start with the technology and figure out where you‚Äôre going to try and sell it.‚Äù</p>\n\n<p>It‚Äôs so hard to do, too! As developers, we are naturally drawn to new APIs and frameworks. In fact, this very reason is why W.W.D.C. is my favorite time of year. Mountains of new API! I‚Äôd even argue that it‚Äôs a very healthy sign that you love doing what you do - learning new things and picking up new ways to solve architectural issues gives us a buzz. But don‚Äôt let it cloud the design part of your brain.</p>\n\n<p>To everyone else it‚Äôs obvious, for developers it‚Äôs difficult - but never start with the technology, start with what the user needs and work your way back towards the tech. Because if you don‚Äôt, you‚Äôll end up with little edges of your app that don‚Äôt fit a central theme or support the mission statement. You‚Äôll have things that feel out of place or the user experience may feel a bit scattered.</p>\n\n<p>Next time you feel the urge to add one more line to your podfile, remember:</p>\n\n<p><strong>Lesson four: Starting with technologies and looking for problems to solve in your app could hinder its design.</strong></p>\n\n<h3 id=\"fnsa\">Lesson 5: Find North Star Apps</h3>\n<p>You‚Äôve likely heard the phrase, ‚ÄúGood artists copy, great artists steal‚Äù and it holds true in design. Much like I alluded to in my post about <a href=\"http://localhost:4000/On-Launching-Your-Indie-App\">releasing your indie app</a>, the concept of finding people you aspire to be like flows directly down into design and iOS apps.</p>\n\n<p>Find the apps that you love using, and then write down why you love them. It sounds obvious, but I hadn‚Äôt done this in the past. I had apps I loved using, but actually putting pen to paper and writing down at least three reasons why uncovered a lot of helpful direction I could use for Spend Stack.</p>\n\n<p>Beyond that - find the apps that Apple has given its seal of approval to. I have each Apple Design Award Winner bookmarked in Safari, and every now and then I poke around their apps just to see how they (deservedly so) got that ultimate award.</p>\n\n<p>Remember, it‚Äôs beyond just the looks here. A lot of apps may look good, but even less feel good. Further still, not many look <em>and</em> feel good. Here are some starter questions you might ask yourself about apps you enjoy:</p>\n\n<p><strong>1)</strong> Why does this app <em>feel</em> good to use? <br />\n<strong>2)</strong> If I wrote this app‚Äôs mission statement, what would it be and why does the app support it? <br />\n<strong>3)</strong> What have other people, whose opinion I respect, said about the app and why they do or do not like it? <br /></p>\n\n<p>For another example directly related to Spend Stack, I made it a point to often look at <a href=\"https://twitter.com/viticci\">Federico Viticci‚Äôs</a> feedback on iPad apps he enjoys. Since he knows the marketplace very well, and is a power user of the platform - he‚Äôs in a good position to uncover little things that apps do well to separate them from the rest of the pack.</p>\n\n<p>Recently, he made mention of how he could navigate an iPad app (I believe it was Things 3 maybe?) almost entirely from the keyboard, which inspired me to make that a bar I will eventually hit for Spend Stack. It sounds like a fairly ‚Äúwell yeah!‚Äù observation, but with a million things happening while developing Spend Stack, I sure didn‚Äôt think of it.</p>\n\n<p>Next time you‚Äôre short on inspiration, remember:</p>\n\n<p><strong>Lesson five: Reference apps that you enjoy using and figure out why you, and others, enjoy using them.</strong></p>\n\n<h3 id=\"aay\">Lesson 6: Always Ask Yourself</h3>\n<p>Much like having iOS apps that you aspire to be like, it also helps to have certain rules, or an ethos, to ascribe by as you develop indie apps. A north star framework, if you will. I‚Äôve found that I often forget the simple things, and so I wrote them down and put them in a place where I‚Äôm sure to see them often.</p>\n\n<p>I call these little things ‚Äúalways ask yourself‚Äù tips. Almost all of the ones I have written down have to do with design. To me, design is like math. It doesn‚Äôt come naturally to me, but I <em>can</em> do it - I just really need to focus a bit harder on it. So plopped right in my app delegate file are these little tips that help me frame my mind for the work I‚Äôm about to do:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/aaySnips.png\" role=\"presentation\" srcset=\"../assets/images/aaySnips.png\" /></p>\n\n<p>It‚Äôs a little silly, and certainly not for everyone - but they‚Äôve done wonders for me. It simply reminds me to focus on design, and before I chase a random thread that might lead down some rabbit hole, I should stop and consider if what I‚Äôm doing is worth it. Does X or Y help promote a cohesive design, or am I straying off the path a little?</p>\n\n<p>Expanding on this idea a little more, I also have fully formed documents that hold thoughts, ideas or things that I want my apps to be known for. In fact, the one I have in my Notion workspace is what my <a href=\"http://localhost:4000/A-Best-in-Class-App\">best in class iOS app post</a> came from:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/aayLarge.png\" role=\"presentation\" srcset=\"../assets/images/aayLarge.png\" /></p>\n\n<p>This idea is the same reason college stadiums have inspirational quotes sitting right outside of locker rooms, or offices have pictures with motivational quotes hanging on the walls. It‚Äôs because they offer a simple proposition: reminding us what we‚Äôre about, what we want to do or where we want to go.</p>\n\n<p>As you go about writing your Swift or Objective-C today, remember:</p>\n\n<p><strong>Lesson six: Always ask yourself if the work you are doing is enforcing a solid design and direction that‚Äôs been laid down for your app.</strong></p>\n\n<h3 id=\"hdadt\">Lesson 7: How Does Apple Do This?</h3>\n<p>This is my secret weapon hiding in plain sight. Whether you fall into the ‚ÄúApple is amazing at design on iOS‚Äù or the ‚ÄúThey lost their way on iOS 7‚Äù - I only know one thing: they are the ones who hand out A.D.A.‚Äôs, who have more context or data than anyone else, spend all day on the platform and are the subject matter experts.</p>\n\n<p>So look to their work when you are stuck, need inspiration or aren‚Äôt quite sure what to do. I‚Äôve got two tips in this area:</p>\n\n<p><strong>Tip 1</strong> - Have their apps on your home screen. <br /></p>\n\n<p><strong>Tip 2</strong> - Recreate scenarios you‚Äôre stuck on in their apps. <br /></p>\n\n<p>Tip 1 is fairly self-explanatory, but I‚Äôd love to toss out an example of where tip 2 came into mind for Spend Stack. As I was developing its sharing functionality, I was struggling with coming up with copy for this scenario:</p>\n\n<ul>\n  <li>A user has shared a list of theirs with someone.</li>\n  <li>The owner deletes this list, but doing so will also delete it from the other share participant‚Äôs devices.</li>\n  <li>As such - how do I alert them of this?</li>\n</ul>\n\n<p>As I want back and forth, I realized that Notes on iOS could also have this same scenario. So, I grabbed a test device and my iPad and recreated it. Their copy had perfect messaging, and so I ended up with much of the same thing for Spend Stack. The only change I made was tweaking ‚Äúok‚Äù to a destructive ‚Äúdelete‚Äù (per Apple‚Äôs advice, I may add):</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/leaveShare.png\" role=\"presentation\" srcset=\"../assets/images/leaveShare.png\" /></p>\n\n<p>Borrowing liberally from Apple is a good thing, and I‚Äôll tell you why; Aside from being experts of the platform, the biggest advantage is that users are already comfortable with the flows, copy and designs that they‚Äôve established. As such, if a user has used Notes before, shared a note and then later deleted it - that user will know what to expect when they do the same thing in Spend Stack. It won‚Äôt make them think.</p>\n\n<p>As you question some assumptions today and aren‚Äôt quite sure what to do, remember:</p>\n\n<p><strong>Lesson seven: See how Apple has solved similar problems, designs or copy within their apps and consider using them yourself.</strong></p>\n\n<h3 id=\"dcm\">Lesson 8: Design Centric Materials</h3>\n<p>A common theme has hopefully emerged from the previous seven lessons, which is that these things are much less about how to use colors correctly, when to consider a certain font or what margin to use - it‚Äôs about cultivating a design mindset. By far and away, this has helped me the most.</p>\n\n<p>But, at the end of the day, you most certainly do need to learn about the more concrete truths and practices of design. For that purpose, I‚Äôve found a few things that I reference quite often to develop those skills.</p>\n\n<p>First, the most important one. Consider it your design bible for Apple. I‚Äôm talking, of course, about the <a href=\"https://developer.apple.com/design/human-interface-guidelines/\">human interface guidelines</a>. If you haven‚Äôt done so yet, stop everything now and read the H.I.G. from beginning to end. Some of it, I admit, can be dry by nature - but the upside is too important to ignore.</p>\n\n<p>Following the H.I.G. simply means you‚Äôll know what a great app looks and feels like, the technology available to you to make them possible and when to follow their advice to the letter and when to add a little personal spin on things. It‚Äôs simply the first and most important step to improving your iOS design skills</p>\n\n<p>Why does Spend Stack‚Äôs <a href=\"https://twitter.com/JordanMorgan10/status/1156618254447722499?s=20\">onboarding experience</a> offer three main advantages to the app, is quick to dismiss and doesn‚Äôt ask for inessential setup or configuration data upfront? Because I took cues from the H.I.G. on the matter:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/higOnboard.png\" role=\"presentation\" srcset=\"../assets/images/higOnboard.png\" /></p>\n\n<p>Further, here are the design resources I often visit to learn more:</p>\n\n<ul>\n  <li><a href=\"https://refactoringui.com\">Refactoring UI</a></li>\n  <li><a href=\"https://designcode.io\">Design+Code</a></li>\n</ul>\n\n<p>These may or may not help you, but find the resources that do and study them often. So before you wireframe your next view, remember:</p>\n\n<p><strong>Lesson eight: Keep design resources close by to learn from, and keep the H.I.G. at the top of the pile.</strong></p>\n\n<h3 id=\"recap-or-tldr\">Recap or TL;DR</h3>\n<p>Here‚Äôs each lesson mapped out for your reference:</p>\n\n<p><strong>Lesson one:</strong> Design is something you can‚Äôt ignore.<br />\n<strong>Lesson two:</strong> Well designed apps stem from a focused mission statement.<br />\n<strong>Lesson three:</strong> To design well, you‚Äôve got to have an idea of who you‚Äôre designing for.<br />\n<strong>Lesson four:</strong> Starting with technologies and looking for problems to solve in your app could hinder its design.<br />\n<strong>Lesson five:</strong> Reference apps that you enjoy using and figure out why you, and others, enjoy using them.<br />\n<strong>Lesson six:</strong> Always ask yourself if the work you are doing is enforcing a solid design and direction that‚Äôs been laid down for your app.<br />\n<strong>Lesson seven:</strong> See how Apple has solved similar problems, designs or copy within their apps and consider using them yourself.<br />\n<strong>Lesson eight:</strong> Keep design resources close by to learn from, and keep the H.I.G. at the top of the pile.</p>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>As indie developers, we‚Äôre forced to wear many hats. And the one of design might be the most important of them all. But years ago, I foolishly resigned to the notion that I had boxed myself into being purely a developer, a code junkie - someone who could implement the good looking thing, but who would never design it.</p>\n\n<p>Being at the other end of the tunnel now, I think Spend Stack is a living testament that <em>anyone</em> can learn design to some degree. Sure, many are just ‚Äúborn with it‚Äù, institutions can teach it and millions of other talented people have their careers built off of mastering it - but what about <em>us</em>? The common indie dev who learned all about retain cycles and pointers instead of color theory and typography? Can we?</p>\n\n<p>The answer, is of course, yes.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Did you know that the version of Spend Stack I released a few short months ago is actually‚Ä¶ not the first version?",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-12-07T00:00:00-06:00",
            "date_modified": "2019-12-07T00:00:00-06:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/SwiftUI-What-Just-Happened",
            "url": "http://localhost:4000/SwiftUI-What-Just-Happened/",
            "title": "SwiftUI: What Just Happened?",
            "content_html": "<p>When I created my first SwiftUI project, so much was foreign. I needed to understand how any of this was possible. There was so much that was new, so much that was different - I couldn‚Äôt stand spinning up a project without knowing how the beast came to be.</p>\n\n<p>After all, there is just <em>so</em> much to talk about it in this one, tiny picture. And none of it was doable before WWDC 2019:</p>\n\n<p><img src=\"../assets/images/swiftui.png\" alt=\"Launch Day\" /></p>\n\n<p>So today I briefly describe how, in the context of the template single view application Xcode provides for SwiftUI, any of this is possible.</p>\n\n<p>Four distinct components stood out to me when surveying the default SwiftUI template from Xcode, feel free to skip to any relevant section:</p>\n\n<ul>\n  <li><a href=\"#syntax\">The Syntax</a></li>\n  <li><a href=\"#protocol\">The Protocol</a></li>\n  <li><a href=\"#live\">The Live Previews</a></li>\n  <li><a href=\"#layout\">The Layout System</a></li>\n</ul>\n\n<h2 id=\"syntax\">The Syntax</h2>\n<p>We‚Äôve got to start at the top, and for me that‚Äôs the Swift code. It‚Äôs full of little SwiftUI nuggets.</p>\n\n<p>This code snippet might be the poster child of why this is a Swift only framework. Take a close look, and you‚Äôll see concepts that didn‚Äôt exist before Swift 5.1:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">ContentView</span><span class=\"p\">:</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"n\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n        <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hello, World!\"</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>This was the first bit that peaked my curiosity. Syntactical sugar must‚Äôve been at the forefront of Cupertino &amp; Friends¬© collective hive mind, because it seems each new feature slotted into Swift supported one core idea - make it easy to write.</p>\n\n<p>Because without the following tweaks, SwiftUI might look something like this:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">ContentView</span><span class=\"p\">:</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"kt\">AnyView</span> <span class=\"p\">{</span>\n        <span class=\"k\">let</span> <span class=\"nv\">contentBuilder</span> <span class=\"o\">=</span> <span class=\"kt\">ContentBuilder</span><span class=\"p\">()</span>\n        <span class=\"n\">contentBuilder</span><span class=\"o\">.</span><span class=\"nf\">append</span><span class=\"p\">(</span><span class=\"nv\">view</span><span class=\"p\">:</span> <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hello, World!\"</span><span class=\"p\">))</span>\n        <span class=\"k\">return</span> <span class=\"kt\">AnyView</span><span class=\"p\">(</span><span class=\"n\">contentBuilder</span><span class=\"o\">.</span><span class=\"nf\">build</span><span class=\"p\">())</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<h4 id=\"returnwhat-exactly\">Return‚Ä¶what exactly?</h4>\n<p>First off, there‚Äôs no return statement. True to declarative form, saying what you need and not much else is the route SwiftUI takes (as well it should). As Nate Chandler mentions in the proposal that landed this in Swift, short closures already had implicit returns - so why not extend this to shorthand functions?</p>\n\n<p>And so it was, <a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0255-omit-return.md\" target=\"_blank\">SE-0255</a> is the first new tool that helps make SwiftUI, SwiftUI.</p>\n\n<p>Now, our would-be code sample changes for the better:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">ContentView</span><span class=\"p\">:</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"kt\">AnyView</span> <span class=\"p\">{</span>\n        <span class=\"k\">let</span> <span class=\"nv\">contentBuilder</span> <span class=\"o\">=</span> <span class=\"kt\">ContentBuilder</span><span class=\"p\">()</span>\n        <span class=\"n\">contentBuilder</span><span class=\"o\">.</span><span class=\"nf\">append</span><span class=\"p\">(</span><span class=\"nv\">view</span><span class=\"p\">:</span> <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hello, World!\"</span><span class=\"p\">))</span>\n        <span class=\"c1\">// No return statement</span>\n        <span class=\"kt\">AnyView</span><span class=\"p\">(</span><span class=\"n\">contentBuilder</span><span class=\"o\">.</span><span class=\"nf\">build</span><span class=\"p\">())</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<h4 id=\"thats-some-view\">That‚Äôs Some View</h4>\n<p>Next, <a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0244-opaque-result-types.md\" target=\"_blank\">SE-0244</a> turns up and makes returning our views much more pragmatic. Opaque result types free us from declaring specific returns types and instead opt to return values that simply implement a protocol contract. Here, the return type will be determined by the <code class=\"highlighter-rouge\">body</code> implementation before returning back over to SwiftUI, fully abstracted. Before, we could only achieve the reverse of that scenario (i.e. generics where the caller decides what types are bound to generic arguments).</p>\n\n<p>Lipso facto, all SwiftUI needs to know is that we‚Äôre returning some kind of view, who cares what though. Does it conform to the <code class=\"highlighter-rouge\">View</code> protocol? Yeah? Awesome - we‚Äôll take it from here.</p>\n\n<p>Our pre-Swift 5.1 SwiftUI code sample changes yet again:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">ContentView</span><span class=\"p\">:</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"n\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n        <span class=\"k\">let</span> <span class=\"nv\">contentBuilder</span> <span class=\"o\">=</span> <span class=\"kt\">ContentBuilder</span><span class=\"p\">()</span>\n        <span class=\"n\">contentBuilder</span><span class=\"o\">.</span><span class=\"nf\">append</span><span class=\"p\">(</span><span class=\"nv\">view</span><span class=\"p\">:</span> <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hello, World!\"</span><span class=\"p\">))</span>\n        <span class=\"c1\">// No return statement, no type erasure</span>\n        <span class=\"n\">contentBuilder</span><span class=\"o\">.</span><span class=\"nf\">build</span><span class=\"p\">()</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<h4 id=\"function-builders\">Function Builders</h4>\n<p>The <code class=\"highlighter-rouge\">body</code> closure has a <code class=\"highlighter-rouge\">Text</code> component just chilling in there. If you consider that we have implicit returns now, that might not mean much to you. But if you‚Äôve waded through SwiftUI‚Äôs code, you know that‚Äôs rarely the case. SwiftUI is all about composability:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">ContentView</span><span class=\"p\">:</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"n\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n        <span class=\"kt\">VStack</span> <span class=\"p\">{</span>\n            <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hi\"</span><span class=\"p\">)</span>\n            <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"There\"</span><span class=\"p\">)</span>\n            <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Dear Reader\"</span><span class=\"p\">)</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p>A new proposal (which is already technically implemented, bringing about a small <a href=\"https://forums.swift.org/t/important-evolution-discussion-of-the-new-dsl-feature-behind-swiftui/25168\" target=\"_blank\">point of contention</a> within the community) makes this work. <a href=\"https://github.com/apple/swift-evolution/blob/9992cf3c11c2d5e0ea20bee98657d93902d5b174/proposals/XXXX-function-builders.md\" target=\"_blank\">Function builders</a> are insanely meta to think about, and their name perfectly describes everything they do.</p>\n\n<p>The gist? A result of a function‚Äôs statements collate everything together using a builder type, and the result is one value created from the sequence.</p>\n\n<blockquote>\n  <p>You can see this first hand by looking at the exotic return types one gets from their <code class=\"highlighter-rouge\">body</code> property. Simply use <code class=\"highlighter-rouge\">print()</code> along with reflection to check out what types your views are composing to.</p>\n</blockquote>\n\n<p>Now, our pre Swift 5.1 code sample looks like the real thing:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">ContentView</span><span class=\"p\">:</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"n\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n        <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hello, World!\"</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<h4 id=\"property-wrappers\">Property Wrappers</h4>\n<p>Bindings, data marshaling, omitting values to subscribers and more are common to the framework. For our case, they aren‚Äôt shown in a default template app - but it‚Äôs worth noting all of those are driven by property wrappers. If you want to really see their power, skip everything else and read Mattt‚Äôs excellent discourse over them <a href=\"https://nshipster.com/propertywrapper/\" target=\"_blank\">here</a>.</p>\n\n<p>So, that‚Äôs the syntax demystified. But it gets even more interesting when you consider the design aspect - namely, the <code class=\"highlighter-rouge\">View</code> protocol.</p>\n\n<h2 id=\"protocol\">The Protocol</h2>\n<p>This is where things start to go off the rails.</p>\n\n<p>For almost a decade, we‚Äôve found new patterns, techniques and ways to achieve impressive user interfaces by utilizing M.V.C. and‚Ä¶..the heap. I mean, we‚Äôve just <em>piled</em> onto the heap.</p>\n\n<p>And why wouldn‚Äôt we? These were the days before <a href=\"https://developer.apple.com/videos/play/wwdc2015/408/\" target=\"_blank\">Krusty</a> went on and on about protocol oriented programming. Built right on the shoulders of NeXT - Objective-C and UIKit have really stood the test of time. But you are what you are.</p>\n\n<p>UIKit returns concrete <code class=\"highlighter-rouge\">UIView</code> types allocated on the heap, that we extend and manipulate via its many robust properties. SwiftUI is <em>not</em> that‚Ä¶.at all. Really try to comprehend that and sit on it for a hot second.</p>\n\n<p>Think about the immediate wins you get by creating an entire user interface from the client by simply returning a bunch of Structs on the stack - allowing the underlying details to be optimized and decided by the framework. And, SwiftUI can pick up changes extremely quick by virtue of its design to know what to update and when. It‚Äôs insane, and awesome.</p>\n\n<blockquote>\n  <p>For example, it uses static types to optimize parts of its view graph that cannot, and will not, change.</p>\n</blockquote>\n\n<p>You‚Äôve simply got to leave <code class=\"highlighter-rouge\">UIKit</code> <em>thinking</em> behind.</p>\n\n<p>Example: SwiftUI‚Äôs <code class=\"highlighter-rouge\">frame</code>. The only thing it has in common with <code class=\"highlighter-rouge\">UIKit</code> is its name and that it helps with sizing stuff. Everything else is different. It‚Äôs not a property on a view, it‚Äôs another function that‚Äôll return something conforming to <code class=\"highlighter-rouge\">View</code>.</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">@inlinable</span> <span class=\"kd\">public</span> <span class=\"kd\">func</span> <span class=\"nf\">frame</span><span class=\"p\">()</span> <span class=\"o\">-&gt;</span> <span class=\"n\">some</span> <span class=\"kt\">View</span>\n</code></pre></div></div>\n\n<p>So if you tack it onto our <code class=\"highlighter-rouge\">Text</code> we‚Äôve been using above, now we‚Äôve got an entirely new type altogether.</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"n\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">myType</span> <span class=\"o\">=</span> <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hello, World!\"</span><span class=\"p\">)</span>\n    <span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"kt\">Mirror</span><span class=\"p\">(</span><span class=\"nv\">reflecting</span><span class=\"p\">:</span> <span class=\"n\">myType</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">subjectType</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">myType</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// Prints Text</span>\n\n<span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"n\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">myType</span> <span class=\"o\">=</span> <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hello, World!\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"nf\">frame</span><span class=\"p\">(</span><span class=\"nv\">width</span><span class=\"p\">:</span> <span class=\"mi\">200</span><span class=\"p\">)</span>\n    <span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"kt\">Mirror</span><span class=\"p\">(</span><span class=\"nv\">reflecting</span><span class=\"p\">:</span> <span class=\"n\">myType</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">subjectType</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">myType</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// Prints ModifiedContent&lt;Text, _FrameLayout&gt;</span>\n</code></pre></div></div>\n\n<p>As one Steve Jobs would say‚Ä¶.are you getting it!? This isn‚Äôt one type, this can be many different types!</p>\n\n<p>To me, this is the most exciting technical detail about SwiftUI. As one of the Swift holdouts for a number of reasons, seeing this in action made me realize what Swift has been all about since the beginning - pulling some tomfoolery that Objective-C simply can‚Äôt do to allow for more robust frameworks and unique ways in which we can use them. And I‚Äôm here for it.</p>\n\n<blockquote>\n  <p>Notice I said ‚ÄúUIKit thinking‚Äù, not UIKit itself. You can pull it in every which way with representables, or even pump SwiftUI views into UIKit.</p>\n</blockquote>\n\n<h2 id=\"live\">The Live Preview</h2>\n<p>The other part of the equation is the hot swapping previews Xcode is slinging.</p>\n\n<p><em>How does that work?</em></p>\n\n<p>I was happy to learn more about this, because the roads would eventually lead back to my Objective-C FunTime‚Ñ¢ days. In short, Swift is leveraging its dynamic replacement feature.</p>\n\n<p>Xcode knows what we‚Äôre editing, and here it‚Äôs our default <code class=\"highlighter-rouge\">ContentView</code> file. So why not just do delta updates?</p>\n\n<p>And, in fact, that‚Äôs kinda what happens. As we can edits, Xcode compiles <code class=\"highlighter-rouge\">ContentView</code> exclusively from the rest of the project. When it does, it injects the new implementation back into the running application via dynamic replacement.</p>\n\n<p>While we make edits, what our code really looks like that‚Äôs being executed is closer to this:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">extension</span> <span class=\"kt\">ContentView</span> <span class=\"p\">{</span>\n    <span class=\"c1\">// Dynamically replaced in ContentView's body implementation</span>\n    <span class=\"k\">var</span> <span class=\"nv\">__preview_body</span><span class=\"p\">:</span> <span class=\"n\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n        <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hello, World!\"</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p>This happens over and over for virtually every edit we make. It‚Äôs made possible because the amount of changes we make are usually much smaller than recompiling the rest of the app. So once Xcode does its initial build, then it‚Äôs free to only cherry pick what‚Äôs new (or deleted) and reflect that within the preview.</p>\n\n<p>Given that - how is it still so fast? Well, it‚Äôs smart. Things like literal values are just swapped without any recompilation at all!</p>\n\n<p>Even more, the previews that we‚Äôre seeing are just the result of plain old SwiftUI Code (or, naturally, POSUIC for short, amirite?). As such, we can preview things in so many different contexts now. Here‚Äôs what I‚Äôve been doing:</p>\n\n<ul>\n  <li>Display every single locale available to format currency</li>\n  <li>I almost always have dark and light mode running together</li>\n  <li>Multiple text sizes to represent dynamic type options.</li>\n</ul>\n\n<p>Given that we can also bring our old components in with previews, it almost feels criminal to go back to the old way of doing things.</p>\n\n<h2 id=\"layout\">The Layout</h2>\n<p>Perhaps the most encouraging aspect of SwiftUI is its no-nonsense approach to putting elements on screen. Clarity at the point of use is a common term tossed around for Swift‚Äôs API design guidelines, and I can think of no better example of that term than SwiftUI‚Äôs layout system.</p>\n\n<p>It‚Äôs a three step system:</p>\n\n<p><strong>1)</strong> Parent proposes a size for a given child <br />\n<strong>2)</strong> Child considers it, but ultimately chooses its own size <br />\n<strong>3)</strong> The parent puts the child in the parent‚Äôs coordinate space <br /></p>\n\n<p>This is how we arrive at the text being centered in default template app. The parent (i.e. the root view of the device in this case) says ‚ÄúI‚Äôve got the whole screen!‚Äù, and so the <code class=\"highlighter-rouge\">Text</code> looks at it and considers it. In this case, the <code class=\"highlighter-rouge\">Text</code> says that it‚Äôs only as big as its intrinsic content size and it can‚Äôt fill all that space. So the root view has to put it somewhere - so it plants it in the middle.</p>\n\n<p>But - if we added another view modifier, say <code class=\"highlighter-rouge\">Frame</code>, then the <code class=\"highlighter-rouge\">Text</code> would turn rebellious, ignore its parent - and two sheets to the wind, would use it‚Äôs <code class=\"highlighter-rouge\">Frame</code> size information instead. Regardless, <code class=\"highlighter-rouge\">ContentView</code> has what it needs and it‚Äôs placed according to the layout information on screen.</p>\n\n<blockquote>\n  <p>In SwiftUI, the top layer of any view with a <code class=\"highlighter-rouge\">body</code> is said to be ‚Äúlayout neutral‚Äù. In short - its bounds are defined by the bounds of its body. So, <code class=\"highlighter-rouge\">ContentView</code> has the same bounds as the <code class=\"highlighter-rouge\">Text</code> view returned from its <code class=\"highlighter-rouge\">body</code> property.</p>\n</blockquote>\n\n<p>When the layout system was being developed, it seems that all of the quirks, gotchas and oddities of UIKit, Auto Layout and frame based approaches were considered, and then sent out back packing. SwiftUI‚Äôs approach is so easy - so trivial, that my wife looked over my shoulder the other night (who is a nurse with no programming experience) and was able to comprehend what a VStack and HStack were and what they meant.</p>\n\n<p>I liken it to setting up <code class=\"highlighter-rouge\">UIBarButtonItem</code> controls in UIKit. They just always do what you want and expect. I‚Äôve never, coming up on a decade, had one issue setting up bar button items. <code class=\"highlighter-rouge\">VStack</code> and <code class=\"highlighter-rouge\">HStack</code> have produced the same results for me as well.</p>\n\n<p>The combination of SwiftUI‚Äôs semantics and layout system mean I no longer reach for some catch-all sizing control (looking squarely at you, <code class=\"highlighter-rouge\">UIStackView</code>) and end up with exotic results or frustration. As the Apple mantra goes, it just works.</p>\n\n<p>Further - it can optimized down to metal with one view modifier. While I‚Äôm not certain of this, some of the rendering may be already. For example, <em>something</em> is going down with images and more efficient decoding - as sizing the same <code class=\"highlighter-rouge\">UIImage</code> and <code class=\"highlighter-rouge\">UIImageView</code> against the same representation in SwiftUI seemed to consume around 25% more memory.</p>\n\n<blockquote>\n  <p>Another freebie? SwiftUI rounds the corners of views to the nearest pixel to get crisp edges, instead of producing anti-aliased ones.</p>\n</blockquote>\n\n<p>The immense control a child has over its sizing might be giving you slight anxiety, as to this point, UIKit developers have heavily relied on the parent to position controls. That‚Äôs still possible too - all one needs to reach for is <code class=\"highlighter-rouge\">GeometryReader</code>. Its somewhat heavy handed name aside, you can think of it as the UIKit frame of a super view. It reports sizing back to down to children to base things off of its parent‚Äôs size, should you need it.</p>\n\n<p>Look - this is great. Auto Layout and company are brilliant technologies. But wow - I admire it much more than I enjoy it. In my brief travels with SwiftUI, all of my layouts have been stupid simple to setup.</p>\n\n<p>And that‚Äôs exactly what I want out of a layout system.</p>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>SwiftUI is incredible. The amount of engineering that‚Äôs occurring behind the scenes is almost too staggering to comprehend at first, but once you do - seeing what SwiftUI is bringing to the proverbial table becomes clear, and it also reveals a bevy of possibilities of what you can do with it.</p>\n\n<p>Perhaps the best part? There are barely any compromises one has to make to utilize it. Swift, in its infancy, felt like a zero sum game. For all of its marvels, productivity could‚Äôve been marred by compile times or the lack of ABI stability. SwiftUI, in its early lifespan, feels miles ahead of where it should be (some common complaints mostly related to declarative UI programming notwithstanding).</p>\n\n<p>So it is - code, build, run, navigate almost feels archaic now. I, for one, welcome our Xcode Preview and SwiftUI overlords to my development workflow.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "When I created my first SwiftUI project, so much was foreign. I needed to understand how any of this was possible. There was so much that was new, so much that was different - I couldn‚Äôt stand spinning up a project without knowing how the beast came to be.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-11-08T00:00:00-06:00",
            "date_modified": "2019-11-08T00:00:00-06:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["SwiftUI"]},{
            "id": "http://localhost:4000/Animating-Images-Using-Image-IO",
            "url": "http://localhost:4000/Animating-Images-Using-Image-IO/",
            "title": "Animating Images using ImageIO",
            "content_html": "<p>When I was a little boy, I remember that my father could often be found somewhere around the house fixing something up. Never the adroit handymen, but far from incompetent, I would happily would tag along and watch as he would patch up a leaky faucet, swap out an old flickering light bulb or tighten up a loose screw on an old towel rack.</p>\n\n<p>On one particularly cold November morning, I remember he started tending to an old heater that we were using to keep my parent‚Äôs room nice and toasty amidst the encroaching winter climate. A screw was loose on one of its sides, and the only screwdriver he had laying around was a rusted, weathered Phillips.</p>\n\n<p>The issue, of course, was that this screw was a standard flathead.</p>\n\n<p>Never the less, he made it work - but was quick to note to his curious sidekick (i.e. me) that this was the incorrect tool for the job. While we‚Äôd be able to complete the task, a flathead screwdriver would be far more efficient in tightening things up.</p>\n\n<p>Now, many decades later, I often think back to that day and the universal lesson that myself, and eventually everyone, is taught. Get the right tool for the right job. For years, we‚Äôve been granted <em>some</em> tools to playback .gifs in iOS.</p>\n\n<p>But it wasn‚Äôt until now, with iOS 13, that Apple bequeathed us with the right one, and they barely made a peep about it.</p>\n\n<h2 id=\"blink-and-youll-miss-it\">Blink and You‚Äôll Miss it</h2>\n<p>The first stop I make during beta season is the incredibly valuable API diffs that CodeWorkshop pipes out using their custom CLI tool. Starting with the diff from <a href=\"http://codeworkshop.net/objc-diff/sdkdiffs/ios/13.0b3/ImageIO.html\" target=\"_blank\">iOS 13 beta 2 to 3</a>, I noticed something in particular nestled within Image IO:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">CGAnimateImageAtURLWithBlock</span><span class=\"p\">()</span>\n</code></pre></div></div>\n\n<p>Hmmm. Could this be what I thought it was? A first class API for .gifs? Like many of you, I went to the source of truth to confirm any such notion. But, well‚Ä¶</p>\n\n<p><img src=\"../assets/images/docImageIO.png\" alt=\"Launch List\" /></p>\n\n<p>‚Ä¶ <br />\n‚Ä¶. <br />\n‚Ä¶.. <br /></p>\n\n<p>Despite the paucity of information, I tinkered on. As it turns out, Image IO has, in fact, granted us with an excellent way to animate .gifs (and even the slicker, 24-bit variant APNGs) but it‚Äôs not without some question marks. Namely, if you‚Äôre thinking of using Apple‚Äôs flagship programming language, you‚Äôll be slightly disappointed.</p>\n\n<p>As of Xcode 11 (11A420a), this isn‚Äôt even visible to Swift at all.</p>\n\n<p>Which means I finally I have an excuse to write a post in Objective-C!</p>\n\n<h3 id=\"mirroring-the-api\">Mirroring the API</h3>\n<p>To expose this in Swift, the first question I find myself asking is should I expressly bridge over the methods and functionality nearly one to one, or would a custom object or class serve me better?</p>\n\n<p>For me, it‚Äôs the latter. After I confirmed how the API worked, I created a generic object that hides Image IO‚Äôs dirty laundry from Swift. To carry out such a task, we need to know what to expose - and here‚Äôs what this new API offers:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Status type</span>\n<span class=\"kt\">CGImageAnimationStatus</span>\n\n<span class=\"c1\">// Errors</span>\n<span class=\"n\">kCGImageAnimationStatus_ParameterError</span>\n<span class=\"n\">kCGImageAnimationStatus_CorruptInputImage</span>\n<span class=\"n\">kCGImageAnimationStatus_UnsupportedFormat</span>\n<span class=\"n\">kCGImageAnimationStatus_IncompleteInputImage</span>\n<span class=\"n\">kCGImageAnimationStatus_AllocationFailure</span>\n\n<span class=\"c1\">// Options for animation</span>\n<span class=\"n\">kCGImageAnimationStartIndex</span>\n<span class=\"n\">kCGImageAnimationDelayTime</span>\n<span class=\"n\">kCGImageAnimationLoopCount</span>\n<span class=\"kt\">CGImageSourceAnimationBlock</span>\n\n<span class=\"c1\">// Animation functions</span>\n<span class=\"kt\">CGAnimateImageAtURLWithBlock</span><span class=\"p\">()</span>\n<span class=\"kt\">CGAnimateImageDataWithBlock</span><span class=\"p\">()</span>\n</code></pre></div></div>\n\n<p>We‚Äôve got a status that reports how the process is going (via a typedef‚Äôd SInt32, OSStatus), some options to express our .gif/APNG presentation preferences (a common pattern in Image IO, and Core Graphics in general) and two different sources we can provide for our .gif or APNG.</p>\n\n<p>To express this to Swift (or really any client, Objective-C codebases notwithstanding) we might write something like this:</p>\n\n<div class=\"language-objc highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cp\">#import &lt;Foundation/Foundation.h&gt;\n#import &lt;CoreGraphics/CoreGraphics.h&gt;\n</span><span class=\"k\">@class</span> <span class=\"nc\">UIImage</span><span class=\"p\">;</span>\n\n<span class=\"k\">typedef</span> <span class=\"kt\">void</span> <span class=\"p\">(</span><span class=\"o\">^</span> <span class=\"n\">_Nullable</span> <span class=\"n\">onAnimate</span><span class=\"p\">)(</span><span class=\"n\">UIImage</span> <span class=\"o\">*</span> <span class=\"n\">_Nullable</span> <span class=\"n\">img</span><span class=\"p\">,</span> <span class=\"n\">NSError</span> <span class=\"o\">*</span> <span class=\"n\">_Nullable</span> <span class=\"n\">error</span><span class=\"p\">);</span>\n\n<span class=\"n\">NS_ASSUME_NONNULL_BEGIN</span>\n\n<span class=\"k\">@interface</span> <span class=\"nc\">ImageAnimator</span> <span class=\"p\">:</span> <span class=\"nc\">NSObject</span>\n\n<span class=\"k\">@property</span> <span class=\"p\">(</span><span class=\"n\">nonatomic</span><span class=\"p\">)</span> <span class=\"n\">NSUInteger</span> <span class=\"n\">beginningFrameIndex</span><span class=\"p\">;</span>\n<span class=\"k\">@property</span> <span class=\"p\">(</span><span class=\"n\">nonatomic</span><span class=\"p\">)</span> <span class=\"n\">CGFloat</span> <span class=\"n\">delayPerFrame</span><span class=\"p\">;</span>\n<span class=\"k\">@property</span> <span class=\"p\">(</span><span class=\"n\">nonatomic</span><span class=\"p\">)</span> <span class=\"n\">NSUInteger</span> <span class=\"n\">loopCount</span><span class=\"p\">;</span>\n<span class=\"k\">@property</span> <span class=\"p\">(</span><span class=\"n\">nonatomic</span><span class=\"p\">)</span> <span class=\"n\">BOOL</span> <span class=\"n\">stopPlayback</span><span class=\"p\">;</span>\n\n<span class=\"k\">-</span> <span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">)</span><span class=\"nf\">animateImageWithData</span><span class=\"p\">:(</span><span class=\"n\">NSData</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">data</span> <span class=\"nf\">onAnimate</span><span class=\"p\">:(</span><span class=\"n\">onAnimate</span><span class=\"p\">)</span><span class=\"nv\">animationBlock</span><span class=\"p\">;</span>\n<span class=\"k\">-</span> <span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">)</span><span class=\"nf\">animateImageAtURL</span><span class=\"p\">:(</span><span class=\"n\">NSURL</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">url</span> <span class=\"nf\">onAnimate</span><span class=\"p\">:(</span><span class=\"n\">onAnimate</span><span class=\"p\">)</span><span class=\"nv\">animationBlock</span><span class=\"p\">;</span>\n\n<span class=\"k\">@end</span>\n\n<span class=\"n\">NS_ASSUME_NONNULL_END</span>\n</code></pre></div></div>\n\n<p>Here, we‚Äôve expressed a simple block to report the resulting image to assign back to our image view, along with an error that you might rely on if the resulting operation didn‚Äôt work. You‚Äôd query for any of the OSStatus errors, returned from either of the two animating functions listed, to check for such a scenario.</p>\n\n<p>Other than that, exposing the options as properties will take us 75% of the way there. The next part is really up to you, and that‚Äôs opening up the actual animation functions.</p>\n\n<p>There are several different ways to get this done, but I prefer just two dedicated methods. Feel free to vend things through a callback, dependency injection or any other pattern that will achieve much of the same thing. Regardless, simply passing our source of truth for the image is all that‚Äôs left.</p>\n\n<p>In Image IO‚Äôs case, this will come either from the network or locally via a chunk of data or just the location of the images via a URL. We‚Äôve stubbed out both of these at the bottom of the header file above:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">-</span> <span class=\"p\">(</span><span class=\"n\">void</span><span class=\"p\">)</span><span class=\"nv\">animateImageWithData</span><span class=\"p\">:(</span><span class=\"kt\">NSData</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">data</span> <span class=\"nv\">onAnimate</span><span class=\"p\">:(</span><span class=\"n\">onAnimate</span><span class=\"p\">)</span><span class=\"n\">animationBlock</span><span class=\"p\">;</span>\n<span class=\"o\">-</span> <span class=\"p\">(</span><span class=\"n\">void</span><span class=\"p\">)</span><span class=\"nv\">animateImageAtURL</span><span class=\"p\">:(</span><span class=\"kt\">NSURL</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">url</span> <span class=\"nv\">onAnimate</span><span class=\"p\">:(</span><span class=\"n\">onAnimate</span><span class=\"p\">)</span><span class=\"n\">animationBlock</span><span class=\"p\">;</span>\n</code></pre></div></div>\n\n<h3 id=\"implementation\">Implementation</h3>\n<p>Of course, since we are in the stone age of Objective-C today (where I <a href=\"https://twitter.com/JordanMorgan10/status/1172882580187881472?s=20\" target=\"_blank\">admittedly</a> love to play) where the header files roam freely, and the square brackets are treated as deity - we mustn‚Äôt forget to write the other half of our code. Thus, we now arrive at the implementation file.</p>\n\n<blockquote>\n  <p>Let‚Äôs not get too hasty, either. For years, the .h and .m paradigm has offered C, C++ and Objective-C many advantages . To learn more, visit your friendly neighborhood <a href=\"https://stackoverflow.com/questions/2798202/what-are-the-benefits-and-drawbacks-of-using-header-files\" target=\"_blank\">Stack Overflow post</a>.</p>\n</blockquote>\n\n<div class=\"language-objc highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cp\">#import \"ImageAnimator.h\"\n#import \"ImageIO/CGImageAnimation.h\"\n#import &lt;UIKIT/UIKit.h&gt;\n</span>\n<span class=\"k\">@implementation</span> <span class=\"nc\">ImageAnimator</span>\n\n<span class=\"cp\">#pragma mark - Initializer\n</span>\n<span class=\"k\">-</span> <span class=\"p\">(</span><span class=\"n\">instancetype</span><span class=\"p\">)</span><span class=\"n\">init</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">self</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">super</span> <span class=\"nf\">init</span><span class=\"p\">];</span>\n    \n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span>\n        <span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">beginningFrameIndex</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n        <span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">delayPerFrame</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">.</span><span class=\"mi\">1</span><span class=\"n\">f</span><span class=\"p\">;</span>\n        <span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">loopCount</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"k\">return</span> <span class=\"n\">self</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"cp\">#pragma mark - Public\n</span>\n<span class=\"o\">-</span> <span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">)</span><span class=\"n\">animateImageAtURL</span><span class=\"o\">:</span><span class=\"p\">(</span><span class=\"n\">NSURL</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">url</span> <span class=\"n\">onAnimate</span><span class=\"o\">:</span><span class=\"p\">(</span><span class=\"n\">onAnimate</span><span class=\"p\">)</span><span class=\"n\">animationBlock</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">__weak</span> <span class=\"n\">typeof</span><span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">)</span> <span class=\"n\">weakSelf</span> <span class=\"o\">=</span> <span class=\"n\">self</span><span class=\"p\">;</span>\n    <span class=\"n\">NSDictionary</span> <span class=\"o\">*</span><span class=\"n\">options</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">self</span> <span class=\"nf\">animationOptionsDictionary</span><span class=\"p\">];</span>\n    \n    <span class=\"n\">CGAnimateImageAtURLWithBlock</span><span class=\"p\">((</span><span class=\"n\">CFURLRef</span><span class=\"p\">)</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">CFDictionaryRef</span><span class=\"p\">)</span><span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"o\">^</span><span class=\"p\">(</span><span class=\"kt\">size_t</span> <span class=\"n\">index</span><span class=\"p\">,</span> <span class=\"n\">CGImageRef</span>  <span class=\"n\">_Nonnull</span> <span class=\"n\">image</span><span class=\"p\">,</span> <span class=\"n\">bool</span> <span class=\"o\">*</span> <span class=\"n\">_Nonnull</span> <span class=\"n\">stop</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"o\">*</span><span class=\"n\">stop</span> <span class=\"o\">=</span> <span class=\"n\">weakSelf</span><span class=\"p\">.</span><span class=\"n\">stopPlayback</span><span class=\"p\">;</span>\n        <span class=\"n\">animationBlock</span><span class=\"p\">([</span><span class=\"n\">UIImage</span> <span class=\"nf\">imageWithCGImage</span><span class=\"p\">:</span><span class=\"n\">image</span><span class=\"p\">],</span> <span class=\"nb\">nil</span> <span class=\"cm\">/* report any relevant OSStatus if needed*/</span><span class=\"p\">);</span>\n    <span class=\"p\">});</span>\n<span class=\"p\">}</span>\n\n<span class=\"o\">-</span> <span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">)</span><span class=\"n\">animateImageWithData</span><span class=\"o\">:</span><span class=\"p\">(</span><span class=\"n\">NSData</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">data</span> <span class=\"n\">onAnimate</span><span class=\"o\">:</span><span class=\"p\">(</span><span class=\"n\">onAnimate</span><span class=\"p\">)</span><span class=\"n\">animationBlock</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">__weak</span> <span class=\"n\">typeof</span><span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">)</span> <span class=\"n\">weakSelf</span> <span class=\"o\">=</span> <span class=\"n\">self</span><span class=\"p\">;</span>\n    <span class=\"n\">NSDictionary</span> <span class=\"o\">*</span><span class=\"n\">options</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">self</span> <span class=\"nf\">animationOptionsDictionary</span><span class=\"p\">];</span>\n    \n    <span class=\"n\">CGAnimateImageDataWithBlock</span><span class=\"p\">((</span><span class=\"n\">CFDataRef</span><span class=\"p\">)</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">CFDictionaryRef</span><span class=\"p\">)</span><span class=\"n\">options</span><span class=\"p\">,</span> <span class=\"o\">^</span><span class=\"p\">(</span><span class=\"kt\">size_t</span> <span class=\"n\">index</span><span class=\"p\">,</span> <span class=\"n\">CGImageRef</span>  <span class=\"n\">_Nonnull</span> <span class=\"n\">image</span><span class=\"p\">,</span> <span class=\"n\">bool</span> <span class=\"o\">*</span> <span class=\"n\">_Nonnull</span> <span class=\"n\">stop</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"o\">*</span><span class=\"n\">stop</span> <span class=\"o\">=</span> <span class=\"n\">weakSelf</span><span class=\"p\">.</span><span class=\"n\">stopPlayback</span><span class=\"p\">;</span>\n        <span class=\"n\">animationBlock</span><span class=\"p\">([</span><span class=\"n\">UIImage</span> <span class=\"nf\">imageWithCGImage</span><span class=\"p\">:</span><span class=\"n\">image</span><span class=\"p\">],</span> <span class=\"nb\">nil</span> <span class=\"cm\">/* report any relevant OSStatus if needed*/</span><span class=\"p\">);</span>\n    <span class=\"p\">});</span>\n<span class=\"p\">}</span>\n\n<span class=\"cp\">#pragma mark - Private\n</span>\n<span class=\"o\">-</span> <span class=\"p\">(</span><span class=\"n\">NSDictionary</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">animationOptionsDictionary</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">NSMutableDictionary</span> <span class=\"o\">&lt;</span><span class=\"n\">NSString</span> <span class=\"o\">*</span><span class=\"p\">,</span> <span class=\"n\">NSNumber</span> <span class=\"o\">*&gt;</span> <span class=\"o\">*</span><span class=\"n\">options</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">NSMutableDictionary</span> <span class=\"nf\">new</span><span class=\"p\">];</span>\n    <span class=\"p\">[</span><span class=\"n\">options</span> <span class=\"nf\">addEntriesFromDictionary</span><span class=\"p\">:@{(</span><span class=\"n\">NSString</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">kCGImageAnimationStartIndex</span><span class=\"o\">:</span><span class=\"err\">@</span><span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">beginningFrameIndex</span><span class=\"p\">),</span>\n                                        <span class=\"p\">(</span><span class=\"n\">NSString</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">kCGImageAnimationDelayTime</span><span class=\"o\">:</span><span class=\"err\">@</span><span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">delayPerFrame</span><span class=\"p\">)}];</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">loopCount</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span>\n        <span class=\"n\">options</span><span class=\"p\">[(</span><span class=\"n\">NSString</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">kCGImageAnimationLoopCount</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"err\">@</span><span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">loopCount</span><span class=\"p\">);</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"k\">return</span> <span class=\"p\">[</span><span class=\"n\">options</span> <span class=\"nf\">copy</span><span class=\"p\">];</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">@end</span>\n</code></pre></div></div>\n\n<p>There is not much to see here, other than we take care to vend any options we‚Äôve set before kicking off an animation by combining our properties into a dictionary:</p>\n\n<div class=\"language-objc highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cp\">#pragma mark - Private\n</span>\n<span class=\"k\">-</span> <span class=\"p\">(</span><span class=\"n\">NSDictionary</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">animationOptionsDictionary</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">NSMutableDictionary</span> <span class=\"o\">&lt;</span><span class=\"n\">NSString</span> <span class=\"o\">*</span><span class=\"p\">,</span> <span class=\"n\">NSNumber</span> <span class=\"o\">*&gt;</span> <span class=\"o\">*</span><span class=\"n\">options</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">NSMutableDictionary</span> <span class=\"nf\">new</span><span class=\"p\">];</span>\n    <span class=\"p\">[</span><span class=\"n\">options</span> <span class=\"nf\">addEntriesFromDictionary</span><span class=\"p\">:@{(</span><span class=\"n\">NSString</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">kCGImageAnimationStartIndex</span><span class=\"o\">:</span><span class=\"err\">@</span><span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">beginningFrameIndex</span><span class=\"p\">),</span>\n                                        <span class=\"p\">(</span><span class=\"n\">NSString</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">kCGImageAnimationDelayTime</span><span class=\"o\">:</span><span class=\"err\">@</span><span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">delayPerFrame</span><span class=\"p\">)}];</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">loopCount</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span>\n        <span class=\"n\">options</span><span class=\"p\">[(</span><span class=\"n\">NSString</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">kCGImageAnimationLoopCount</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"err\">@</span><span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">loopCount</span><span class=\"p\">);</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"k\">return</span> <span class=\"p\">[</span><span class=\"n\">options</span> <span class=\"nf\">copy</span><span class=\"p\">];</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Of note, in my testing I seemed to experience that any .gif would stop after one complete repetition if I passed <code class=\"highlighter-rouge\">kCFNumberPositiveInfinity</code> as a default value for the loop count. The docs indicate that this should keep things playing - but hey, my aforementioned handyman Dad also told me Santa Clause was real too.</p>\n\n<blockquote>\n  <p>If you‚Äôve been away from #TeamDino for some time, the pointer to a boolean may look weird too. However, this approach can be handy in cases where we might want to assign to a boolean (or any other type) later, but lack any context to control it after the initial function invocation. This way, one can set the boolean at any point within the block by referencing another boolean‚Äôs assignment.</p>\n</blockquote>\n\n<p>Piping things over to Swift - we‚Äôve now got a fully functioning class that will allow us to spread the joy of any animated .gif or APNG anywhere on the main queue. So, putting it all together:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"kt\">ViewController</span><span class=\"p\">:</span> <span class=\"kt\">UIViewController</span> \n<span class=\"p\">{</span>\n    \n    <span class=\"k\">var</span> <span class=\"nv\">imageView</span><span class=\"p\">:</span><span class=\"kt\">UIImageView</span><span class=\"o\">!</span>\n    <span class=\"k\">let</span> <span class=\"nv\">animator</span> <span class=\"o\">=</span> <span class=\"kt\">ImageAnimator</span><span class=\"p\">()</span>\n    \n    <span class=\"k\">override</span> <span class=\"kd\">func</span> <span class=\"nf\">viewDidLoad</span><span class=\"p\">()</span> \n    <span class=\"p\">{</span>\n        <span class=\"k\">super</span><span class=\"o\">.</span><span class=\"nf\">viewDidLoad</span><span class=\"p\">()</span>\n        \n        <span class=\"n\">imageView</span> <span class=\"o\">=</span> <span class=\"kt\">UIImageView</span><span class=\"p\">()</span>\n        <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"nf\">addSubview</span><span class=\"p\">(</span><span class=\"n\">imageView</span><span class=\"p\">)</span>\n        <span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">translatesAutoresizingMaskIntoConstraints</span> <span class=\"o\">=</span> <span class=\"kc\">false</span>\n        <span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">contentMode</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">scaleAspectFit</span>\n        \n        <span class=\"nf\">setupImageViewConstraints</span><span class=\"p\">()</span>\n        \n        <span class=\"k\">let</span> <span class=\"nv\">gifData</span> <span class=\"o\">=</span> <span class=\"cm\">/* Your Gif */</span>\n\n        <span class=\"k\">weak</span> <span class=\"k\">var</span> <span class=\"nv\">weakSelf</span> <span class=\"o\">=</span> <span class=\"k\">self</span>\n        <span class=\"n\">animator</span><span class=\"o\">.</span><span class=\"nf\">animateImage</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">gifData</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">image</span><span class=\"p\">,</span> <span class=\"n\">error</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Void</span> <span class=\"k\">in</span>\n            <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">weakImgView</span> <span class=\"o\">=</span> <span class=\"n\">weakSelf</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"n\">imageView</span> <span class=\"p\">{</span>\n                <span class=\"n\">weakImgView</span><span class=\"o\">.</span><span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">image</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>‚Ä¶if you ran such code, you‚Äôd enjoy a .gif that would play indefinitely. Of course, setting any of the properties on our <code class=\"highlighter-rouge\">ImageAnimator</code> class would let you tweak playback however you wish, such as starting at some relevant frame, applying a delay or a playback limit. And, as mentioned above, if one assigns <code class=\"highlighter-rouge\">YES</code> to <code class=\"highlighter-rouge\">stopPlayback</code> at any point after playback has started, playback will cease.</p>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>The things we take for granted, right? To the end user, .gifs or any sort of animated image is commonplace within iOS. But, developers know there is more than meets the eye. Whether it was firing up a webview, piping an array of images through <code class=\"highlighter-rouge\">UIImageView</code> or using some other open source library, it was a bit more work than it should have been.</p>\n\n<p>But what you are is just as important as what you aren‚Äôt.</p>\n\n<p>On the surface, it‚Äôs easy to say that <code class=\"highlighter-rouge\">UIImageView</code> may be built for something like this. But, Image IO is <em>really</em> built for something like this, you know? Its tooling is expressly written to efficiently operate on images, so it feels like the right tool. And in 2019, even though it takes some dancing around to expose in Swift, we can check off playing .gifs or APNG files as another problem solved by Cupertino and Friends¬©.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "When I was a little boy, I remember that my father could often be found somewhere around the house fixing something up. Never the adroit handymen, but far from incompetent, I would happily would tag along and watch as he would patch up a leaky faucet, swap out an old flickering light bulb or tighten up a loose screw on an old towel rack.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-09-21T00:00:00-05:00",
            "date_modified": "2019-09-21T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["Image IO"]},{
            "id": "http://localhost:4000/On-Launching-Your-Indie-App",
            "url": "http://localhost:4000/On-Launching-Your-Indie-App/",
            "title": "On Launching Your Indie App",
            "content_html": "<p>Y.O.L.O.</p>\n\n<p>No, not the chant of today‚Äôs youth, declaring our ephemeral state of life wherein we should explore any dangerous activity our heart leads us towards. What I‚Äôm referring to is something much more sacred:</p>\n\n<p>You only launch once.</p>\n\n<p>And launch <a href=\"https://www.spendstack.com\" target=\"_blank\">Spend Stack</a> I did, last Thursday in fact. Therapy for me as much as it might be helpful for you - I‚Äôd love to leave a brain dump of how I went about things, in no particular order and commingled together.</p>\n\n<h3 id=\"north-star-apps\">North Star Apps</h3>\n<p>I‚Äôve always found the concept of a North Star incredibly helpful. You have a goal, you‚Äôve got others to look towards who‚Äôve achieved that goal - and all of that gives you clarity on future decisions.</p>\n\n<p>So, what were my North Star apps? After deciding early on I‚Äôd love to do a paid up front model, I looked at the developers who do that best:</p>\n\n<ul>\n  <li><a href=\"https://www.darksky.net/app\">Dark Sky</a></li>\n  <li><a href=\"https://www.culturedcode.com\">Things 3</a></li>\n  <li><a href=\"https://www.gingerlabs.com\">Notability</a></li>\n  <li><a href=\"https://www.ia.net/writer\">iA Writer</a></li>\n</ul>\n\n<p>These apps are highly respected, are always charting and offer a premium experience with an up front buy in. These are the apps I want to be alongside of, and while it‚Äôll take a lot of work to get there, it‚Äôs served me well to study others who‚Äôve been doing the App Store dance extremely well.</p>\n\n<p>These all leverage best in class features of their respective platforms, lean into premium experiences while being cogent about it and they do a fantastic job of instilling user confidence. All of those things speak to me, and it‚Äôs a direction I‚Äôm passionate in taking Spend Stack.</p>\n\n<p>They are also all paid up front apps, the model I chose. Speaking of‚Ä¶</p>\n\n<h3 id=\"paid-up-front\">Paid Up Front</h3>\n<p>Your pricing models dictates a lot of other choices you‚Äôll make, so this was a decision I made very early on.</p>\n\n<p>As a one man show, I‚Äôm good with far less users who are happy with the app than several orders of magnitude more who I‚Äôve got to convert either via I.A.P.‚Äôs or a subscription. I prefer to offer you up the whole deal, no gated content or up selling required.</p>\n\n<p>A lot of people said this was a huge mistake business wise, and I can certainly see why they did. Paid up front apps are becoming a thing of the past, it has the most friction for acquisition and a lot of people simply aren‚Äôt willing to pay for apps. But, it‚Äôs still my favorite way to do business in the App Store.</p>\n\n<p>It does mean you have a tremendous responsibility though. If someone pays for your app, you absolutely have to deliver. That‚Äôs why I talk about the notion of being a best in class app so much, because if you are paid up front - you have to be one <em>and</em> you are expected to be one. For me, that‚Äôs motivating.</p>\n\n<p>Your user base is typically more involved too. People who pay money for an app are invested in them, and I don‚Äôt see this point brought up nearly enough as a major positive for paid up front business models. I‚Äôve had several great conversations with a lot of them already, and we‚Äôve even got a Reddit community going now to discuss the future of the app.</p>\n\n<p>From a support standpoint, being paid up front was critical to my initial launch success too. I replied back to each email timely, and that was a great experience all the way around. But, I was getting around 10-15 a day at about 500 downloads. Let‚Äôs say free apps yield about 10x more downloads, putting us hypothetically at 5,000 downloads if I had gone that route. I simply would‚Äôve been drowning in email, and only a fraction of those users might be paying ones.</p>\n\n<h3 id=\"launch-checklist\">Launch Checklist</h3>\n<p>Once I had a business model and an app mostly built, I started in on what a launch might look like.</p>\n\n<p>I‚Äôm a Type A personality if there ever was one. I got lists on lists. And those lists are categorized by date and color coded. As such, my launch strategy was rigid and calculated. Anytime I had a thought about launching, it went through this flow:</p>\n\n<ul>\n  <li>Get it into Reminders straight away</li>\n  <li>Add any relevant notes to it, such as links.</li>\n  <li>Later that night, vet all of these thoughts. If they were something I wanted to actually explore, I‚Äôd pop them into a Notion doc.</li>\n</ul>\n\n<p>The aforementioned Notion doc was divided into three columns: Pre launch, launch day and post launch.</p>\n\n<p><img src=\"../assets/images/launchList.jpeg\" alt=\"Launch List\" /></p>\n\n<p>The things I had noted in the Launch and Post Launch sections are nothing unheard of - experiment and try new things, give search ads a spin, etc. It had notes on how to take time to craft some quality posts on the places you know of already; Product Hunt, some subreddits and similar places.</p>\n\n<p><img src=\"../assets/images/launchDay.jpeg\" alt=\"Launch Day\" /></p>\n\n<p>The key to each of these places is to ensure you follow the rules to the letter, plus - you know spam when you see it. Nobody wants to read it. Even if it‚Äôs a highly trafficked spot on the web, if Spend Stack didn‚Äôt seem like the right subject matter for it, I skipped it. You want things to go great at launch - but how you do it also matters in my opinion.</p>\n\n<h3 id=\"your-apps-story\">Your App‚Äôs Story</h3>\n<p>One of the most useful forms of spreading the word about Spend Stack was the one that was the most genuine, less market-y thing I did. Just simply telling the <a href=\"http://localhost:4000/introducing-spend-stack\">app‚Äôs story</a>. I wrote about the what and why of Spend Stack, and several people outside of our normal Twitter tech circle picked it up and resonated with it.</p>\n\n<p>I said it before and I‚Äôll say it again - tell your app‚Äôs story! It‚Äôs a great thing to do, and everybody wins: They get to know you, form a connection behind why it exists and then they also can see the app‚Äôs value proposition first hand.</p>\n\n<p>If you go back and skim my post over Spend Stack‚Äôs story you‚Äôll see it follows this exact format:</p>\n\n<ul>\n  <li>Here‚Äôs a problem I wanted to solve</li>\n  <li>Here‚Äôs the app I made that solves it</li>\n  <li>Here‚Äôs the story about how I got the idea and how it came together</li>\n</ul>\n\n<p>Simply put, as an indie you‚Äôre missing out if you‚Äôre not doing this. I really believe that.</p>\n\n<p>Think about each W.W.D.C. from the past few years, what does the keynote end with? It ends with a touching video showcasing the story behind their products, often showing developers talking about their struggles, triumphs and their family talking about the same thing. They do it because it resonates with us - it‚Äôs like looking in the mirror.</p>\n\n<p>You never know who‚Äôs going to really take to your story and identify with it. Those are great customers you‚Äôll be able to make really happy.</p>\n\n<h3 id=\"the-preorder-thing\">The Preorder Thing</h3>\n<p>After announcing it, preordering just kind of happened. My timeline was setup to where if app review went fine (and it did, it was approved on the first go around) I would have two weeks until launch.</p>\n\n<p>I told press about it on a Monday, and then one week later I publicly announced it on Twitter. Since I was already approved, I just put it up for preorder and didn‚Äôt really think much of it.</p>\n\n<p>In hindsight - maybe that was super helpful for charting? I had about 80ish preorders, and while I‚Äôm not 100% this is way it works - I assume I started my launch day with those sales right off the bat. If so, that would‚Äôve put me in a great place to start charting immediately.</p>\n\n<p>From there, the rest of the ~130 sales from launch day came and I guess that‚Äôs what gave me the push to end up at #14 under Productivity within the United States:</p>\n\n<p><img src=\"../assets/images/charting.JPG\" alt=\"Charting\" /></p>\n\n<h3 id=\"the-press\">The Press</h3>\n<p>A launch can live and die by the press. Yet, I was thankful to chart in the top 15 for Productivity for three days without hardly any of it. And, that‚Äôs not bragging - that‚Äôs regret coming through.</p>\n\n<p>Because if I <em>had</em> gotten press, surely I could‚Äôve pumped that number up much higher. I‚Äôve got some early data to back this up, too. On recent talks with users, I simply asked ‚ÄúHow did you hear about Spend Stack?‚Äù And every single one, <em>every single one</em>, has said it was from a blog or website.</p>\n\n<p>The press can lift you up, plain and simple. Getting it, though - is hard. That‚Äôs another post in of itself, but the biggest mistake I made was reaching out far too late. I‚Äôll touch on that more down below.</p>\n\n<p>In any event, the press I did get was super helpful. <a href=\"https://9to5mac.com/2019/07/18/spend-stack-list-app-budgeting-ios/\">9 to 5 Mac</a> picked it up, so did <a href=\"https://appadvice.com/post/spend-stack-helps-you-keep-an-accurate-running-total-with-smart-lists/1329068268/1114042886\">AppAdvice</a> and <a href=\"https://club.macstories.net\">Club MacStories</a> included it in their newsletter and some other publications whose primary audience is outside of the U.S. did too.</p>\n\n<p>I‚Äôll always wonder if the press release I put out was part of that, but that‚Äôs kind of an opaque thing and hard to gauge. After all, you can‚Äôt manage what you can‚Äôt measure.</p>\n\n<p>Going forward, I‚Äôm taking the time to form friendships with the press so I can provide stories and news to them that provide value to their blogs/sites/etc. That‚Äôs the best outcome for each party involved.</p>\n\n<h3 id=\"ask-the-experts\">Ask the Experts</h3>\n<p>I‚Äôm a huge believer in asking for advice from people who are a lot smarter than you. Going by that metric for me, that‚Äôs a ton of people.</p>\n\n<p>Cold emails are hard to pull off, but they can work. But you have to know <em>why</em> they work. They work because you are genuinely reaching out to someone because you respect their domain knowledge, and you want to learn from them. They work because you are asking a pointed, specific question.</p>\n\n<p>I don‚Äôt want to toss out specific names since I didn‚Äôt ask if it was fine to include them in this post, but there were some people I really respect with a lot of influence who took the time to answer questions I had. It made a huge difference in terms of just straight up encouragement (app looks great!), to lessons learned (I wouldn‚Äôt do X or Y) to general advice (I had no luck with marketing this way, but did that way).</p>\n\n<h3 id=\"diy\">D.I.Y.</h3>\n<p>My launch was the antithesis of the lean startup methods. While there can be enourmous value in that approach, I think it‚Äôs fine as indies to go entirely the other direction. That is, if you want something done right(ish), do it yourself.</p>\n\n<p>And, I did a lot of things myself üòÖ:</p>\n\n<ul>\n  <li>The splash page</li>\n  <li>The promo video</li>\n  <li>The music for the promo video (I made it in GarageBand)</li>\n  <li>Design, UI/UX</li>\n  <li>Writing the press release</li>\n  <li>‚Ä¶basically all of it</li>\n</ul>\n\n<p>There are some services I checked into that package these things up, but each one had a trade off or got me 75% of the way there. Rolling up my sleeves and doing it on my own dime took longer, but it also saved me money and ensured I came away with something I was proud of.</p>\n\n<p>To make this shorter, the only thing I did <em>not</em> do myself was the app‚Äôs icon. It‚Äôs a know your strengths thing, and everything I was doing just wasn‚Äôt working. The icon is your poster child for an app, I really believe it‚Äôs money well spent to invest in it to make sure it‚Äôs done right.</p>\n\n<p>If I did it again, there is one other area I would outsource to someone I trust - my App Store screenshots. Right now, holistically speaking of Spend Stack, I‚Äôd wager that‚Äôs the weakest part of the package. It‚Äôs something I‚Äôm going to start improving right away.</p>\n\n<blockquote>\n  <p>For example, Spend Stack is internationalized to work with all currencies. But, you wouldn‚Äôt know it from my screenshots. Plus, there‚Äôs too much text.</p>\n</blockquote>\n\n<h3 id=\"the-mistakes\">The Mistakes</h3>\n<p>Let‚Äôs chat about where I left something on the table, so to speak. The biggest mistake? Without a doubt, it was my handling of the press.</p>\n\n<p>I reached out to them <em>entirely</em> too late in the process (about 8 days before launch). While some did pick it up (mentioned above), overall I didn‚Äôt give them enough time to dive into the app and form an opinion of it. If you‚Äôve got a beta, let them know today.</p>\n\n<p>Take <a href=\"https://www.flightyapp.com\">Flighty</a>, which launched a day or two after I did. Some of the press that covered it mentioned that they had been using it for months. And, that‚Äôs what it takes to truly know an app.</p>\n\n<p>These writers are smart people. They need to get their hands dirty on an app to really know how they feel about it, let alone write a review of it. They are insanely busy too, with people like us all vying for their attention. It was simply  unrealistic to think anyone could‚Äôve gone deep into Spend Stack in the timeline I provided.</p>\n\n<p>Next up, I launched too cheap. If anything - I would‚Äôve launched at a higher price point. You get an iPad and iPhone app for $5, and as developers we all know it‚Äôs worth more than that. We‚Äôve got to remember, though, it‚Äôs not us we have to convince and convey value to, it‚Äôs the consumer.</p>\n\n<p>The perception is already there that this should be a premium app if I‚Äôm asking you to pay me for it up front, and I don‚Äôt think developers should be afraid at all to lean into that. Especially indies. When I hit macOS, I don‚Äôt see any scenario where I would ship for less than $20.</p>\n\n<p>You see Things 3 doing this to perfection. As of today, their iPhone app sits at $10 and their iPad app is $20. They can do that because they‚Äôve built up relationships and goodwill with their users. I can‚Äôt ship like that, this is just the beginning for Spend Stack, but again - that‚Äôs my North Star.</p>\n\n<h3 id=\"the-night-before-launch\">The Night Before Launch</h3>\n<p>One thing that was a huge mental load off, and time saver, was to get everything for launch day all prepped the day before.</p>\n\n<p>So, on Wednesday night I had my launch tweet ready, my Product Hunt post was all created, every asset was ready to share and anything else I had to tend to was good to go. I just had to wake up and hit tweet, post or whatever else the verb was.</p>\n\n<p>It made for a relatively calm morning, where I could just sit back and take it all in. My wife made a lovely card waiting for me when I woke up, and instead of running around trying to get everything out the door - I could sit back, drink my morning quad shot (YAY BUDDY! COFFFFAY ü§ò) and just read it.</p>\n\n<h3 id=\"lastly-random-thoughts\">Lastly, Random Thoughts</h3>\n<p>Here are some things that were on my mind, but I didn‚Äôt know where to put them. So, herein I write a random list:</p>\n\n<ul>\n  <li><em>Be genuine.</em> Not only because it‚Äôs a better way to sell an app, but because it‚Äôs the right thing to do. Spend Stack won‚Äôt be right for everyone and I shouldn‚Äôt try to pretend that it is. If I post about Spend Stack on an online community, I don‚Äôt make it an advert for Spend Stack. I want to talk about it, and then see how I can relate my experiences to other people there to try and help them with the challenges they are facing.</li>\n  <li><em>Think about them.</em> If someone takes the time to type out a detailed bug report and it‚Äôs already on your radar, don‚Äôt just send back ‚ÄúThanks, I know!‚Äù - take the time to let them know how much you appreciate it. And when it comes to the press, consider why they would even cover your app - what‚Äôs in it for them? Same for product choices, and really - anything else.</li>\n  <li><em>Make friends, not fans.</em> If you‚Äôre reading this, you‚Äôre likely an indie developer or are at least interested in iOS. I don‚Äôt ever want you to be my fan, I would much rather you be my friend. If someone bought your app and tweeted about it solely because they wanted to be nice and help, be sure to let them know you‚Äôll do the same, and mean it. There can be a lot of ego in today‚Äôs social media driven society, but I truly believe that if you are just a nice person, people will naturally gravitate towards you, what you do and will listen to what you‚Äôre saying.</li>\n</ul>\n\n<blockquote>\n  <p>For more on that last point, I highly recommend reading the classic tome on the matter, <a href=\"https://www.amazon.com/How-Win-Friends-Influence-People/dp/0671027034\">How to Win Friends and Influence People</a> by Dale Carnegie.</p>\n</blockquote>\n\n<p>To close things out, if I had to write a one sentence thesis on launching specifically for indies, it would go something like this:</p>\n\n<p>Make a fantastic, best in class app and tell its story.</p>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>Launching an app is a crazy, unnerving experience. You just really don‚Äôt know what‚Äôs going to happen. Especially if you are a solo indie, your time, resources and mental capacity are stretched thin. You‚Äôve got to be persistent, insistent and consistent about your app‚Äôs success.</p>\n\n<p>Though there‚Äôs certainly an art to launching, I‚Äôve yet to crack its code. Glean what you can from what worked for me, but more importantly - take note of what <em>didn‚Äôt</em> work. Avoid those. Most importantly, if you‚Äôre launching soon, best of luck!</p>\n\n<p>Until next time ‚úåÔ∏è</p>",
            "summary": "Y.O.L.O.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-07-27T00:00:00-05:00",
            "date_modified": "2019-07-27T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/Introducing-Spend-Stack",
            "url": "http://localhost:4000/Introducing-Spend-Stack/",
            "title": "Introducing Spend Stack",
            "content_html": "<p>Every app has a story.</p>\n\n<p>You‚Äôve heard this before, right? Apple pushes it in their messaging, the press lets you know you should tell yours and general marketing revolves around it.</p>\n\n<p>But, each app also needs to solve a problem that‚Äôs a legitimate pain point for someone.  After several years - I‚Äôd love to tell you my app‚Äôs story and the problem it solved for me.</p>\n\n<p>Today, I‚Äôm pleased to <em>finally</em> introduce the world to <a href=\"https://apps.apple.com/app/spend-stack-smarter-lists/id1329068268\">Spend Stack</a>. It‚Äôs a list app that can keep an accurate total cost of its items that syncs to your devices, plus you can share and collaborate with others on any list you make. Live edits and all.</p>\n\n<p><img src=\"../assets/images/hero.png\" alt=\"Spend Stack\" /></p>\n\n<h3 id=\"the-elevator-pitch\">The Elevator Pitch</h3>\n<p>About five years ago, my wife and I started to budget in all cash. We meticulously split up our money into separate categories each pay period and we still do to this day.</p>\n\n<p>Spend Stack was born when we visited the grocery store during our first crack at this, and we found that it was mostly guesswork, difficult or not possible to keep a running total of our stuff. It‚Äôs a little aggravating if you walked into the store with $200 but your bill tallied about $250. If you live in the states, this is even more difficult because tax isn‚Äôt applied to the prices you see on the shelf.</p>\n\n<p>So, I wanted to keep a to-the-penny running total. That meant local sales tax included, pricing by weight, applying discounts via a percentage or fixed amount, etc.</p>\n\n<p>You can see where this is going - and this was the first reason I built Spend Stack. This is what our grocery list looks like today, and I have no problem keeping track of what something costs with tax, priced by weight and with a discount (as seen here):</p>\n\n<p><img src=\"/assets/images/groceries.png\" alt=\"Grocery List\" /></p>\n\n<p>At first, I found the problem very concrete, yet each solution I mocked up was entirely too abstract. Over time, even as an autodidact designer, I was able to hone it in to focus on the problem over anything else (another blog post in of itself). With each early, hacked together version we‚Äôd discover a different need or obstacle.</p>\n\n<p>My wife wanted to add pictures to items so I would finally stop buying the wrong Chobani (sorry, Jansyn!), so I‚Äôd add it in. Tech like CloudKit was naturally included by other factors - such as me not wanting account creation, but also needing lists synced across devices along with the ability to share and collaborate on them with others. Each validated need led to me cracking open Xcode and slotting it in:</p>\n\n<p><img src=\"/assets/images/ipadShare.png\" alt=\"iCloud Share\" /></p>\n\n<p>The list (no pun intended) goes on.</p>\n\n<h3 id=\"the-beta-days\">The Beta Days</h3>\n<p>As time went on and I showed it to friends, and those friends tested it out - one thing became clear. A lot of people had a use for a running total list app, but they all used it a bit differently. Some really leaned into the accurate running total, some just wanted to keep a simple one without taxes, discounts, or anything else. What I ended up building was something that could not only adapt to those needs, but try to excel at them.</p>\n\n<p>Today, using the tags system, optional checkbox support and more people make far more than the obvious grocery list. It‚Äôs been used for birthday lists, Christmas lists, vacation budget planning and more. A family friend even had her daughter track all the money she made doing chores to save up for a pet hamster, checking off tasks as she did them ‚ù§.</p>\n\n<p>It‚Äôs changed a lot over the years, and at times I‚Äôve just been stuck analyzing it inside and out. Paralysis by analysis. But I‚Äôve always believed that high achievement takes place within the framework of high expectations. And my own were high.</p>\n\n<p>Recently, I looked at it, and I thought, ‚ÄúHmmm, I think this is <em>kinda</em> good now‚Äù. So, I just hit the submit button. I arrived at a spot where I was actually ‚Äúproud‚Äù of it. For the developer minded reader, here are some things I am personally happy about:</p>\n\n<ul>\n  <li>Full dynamic type support (before it was free with SwiftUI!)</li>\n  <li>Every size class and orientation is supported</li>\n  <li>Smaller things, like including glyphs for large content size items, √† la tapping and holding on a tool bar item when large content sizes are active</li>\n  <li>Seamless (I realize that‚Äôs overused, but it‚Äôs earned here) syncing between devices</li>\n  <li>Full CloudKit sharing, this was not trivial to do</li>\n  <li>No use of <code class=\"highlighter-rouge\">reloadData</code>, everything is diffed and batch reloaded (<em>also</em> before it was free with SwiftUI)</li>\n  <li>Undo and redo support for <em>nearly</em> for every single CRUD action</li>\n  <li>And I think it looks okay</li>\n</ul>\n\n<p>As an aside, you can see that SwiftUI could be a time saver for me in the future. Hair Force One himself said as much when I cold emailed him about Spend Stack, and that was a fun moment for me:</p>\n\n<p><img src=\"/assets/images/hfo.jpg\" alt=\"Hair Force One\" /></p>\n\n<p>I basically did the things that draw me to apps I pay for. It‚Äôs a one time purchase, you can tell the developer cares and is unlikely to abandon it, it works on iPhone and iPad, etc.</p>\n\n<h3 id=\"the-human-connection\">The Human Connection</h3>\n<p>To close out the story aspect, I think it‚Äôs fun to show how, that to my wife and I, Spend Stack <em>truly</em> feels like part of the family. Let me explain.</p>\n\n<p>Back in 2013, I was a ball of anxiety when my wife was at the hospital about to deliver our oldest, Bennett. As I paced back and forth, she surprised me with what she said next:</p>\n\n<p>‚ÄúTry getting out your laptop, work on Spend Stack and relax until my contractions kick in.‚Äù</p>\n\n<p>So, I did (and it did chill me out‚Ä¶.a <em>little</em>. Here‚Äôs my genuine ‚Äúthis is fine‚Äù face):</p>\n\n<p><img src=\"/assets/images/bennyDev.jpg\" alt=\"Developing at the hospital 2013\" /></p>\n\n<p>Fast forward to 2016, and I was no more brave at the prospect of my wife delivering a human being that was currently nestled inside of her abdomen. But, until my middle child Remy was ready to arrive, it was the same story. We didn‚Äôt snap a picture of it that year, but looking back I found this one of Jansyn checking out the latest build in between naps at the hospital a few days postpartum:</p>\n\n<p><img src=\"/assets/images/remyDev.jpeg\" alt=\"Developing at the hospital 2016\" /></p>\n\n<p>‚Ä¶and in 2018 with my daughter Baylor:</p>\n\n<p><img src=\"/assets/images/baylorDev.jpg\" alt=\"Developing at the hospital 2018\" /></p>\n\n<p>It actually became a funny tradition between my wife and I. Of course, there were much bigger things to worry about once the contractions started. But until then, instead of watching me slowly devolve into a crazy, amped up and entirely too anxious husband, she gently suggested to code until our little ones decided to start the action. She‚Äôs a good one ‚ù§.</p>\n\n<p>So it‚Äôs funny, this post is an end cap of sorts. We don‚Äôt plan on having more children, so the days of coding Spend Stack until my wife starts having contractions are behind me. At the same time, it‚Äôs finally releasing! Life is funny like that, with one chapter ending and another beginning.</p>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>So that‚Äôs my app‚Äôs story.</p>\n\n<p>It feels so good to launch. I can‚Äôt emphasis that enough. After years of hard work, it all culminates into this. I‚Äôm proud of it, and that was one of the biggest things I wanted out of the project. Something to put my name on and <em>really</em> own it.</p>\n\n<p>Your own app has a story too. And, if you‚Äôre not telling it, I think you‚Äôre missing out. I‚Äôd love to hear it, at the very least. There is always a human connection behind the pixels on your screen that gets lost in translation from idea to App Store - and for me it‚Äôs refreshing to discover them.</p>\n\n<p>Thanks for hearing about my own connection behind Spend Stack, and it‚Äôs live <a href=\"https://www.spendstack.com\" target=\"_blank\">here if you‚Äôd like to try it out yourself.</a></p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Every app has a story.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-07-15T00:00:00-05:00",
            "date_modified": "2019-07-15T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/LinkPresentation-Introduction",
            "url": "http://localhost:4000/LinkPresentation-Introduction/",
            "title": "A LinkPresentation Introduction",
            "content_html": "<p>It wasn‚Äôt but <a href=\"http://localhost:4000/NSSecureCoding\">three posts ago</a> that I began my piece by opining about the forgotten heroes of WWDC.</p>\n\n<p>Bring me your nascent frameworks, subtle API changes or things that were not graced with any keynote or State of the Union time. Those are the unknown territories I enjoy roaming, and the excitement of browsing them is amplified even more so by the fact that the documentation for them hasn‚Äôt even landed yet during the beta period.</p>\n\n<p>Today, we arrive at such a destination for showing links starting with iOS 13: the new LinkPresentation framework.</p>\n\n<h3 id=\"overviewframework-linkpresentation\">Overview(framework: .linkPresentation)</h3>\n<p>The LinkPresentation framework has all the tools one might need to show rich, thumbnail previews of a URL. Though presentation is in its name, the brunt of its utility lies within its ability to retrieve meta data about URLs in a rather trivial fashion.</p>\n\n<p>The framework has actually been around for sometime now, as it appears in the runtime headers in the previous couple of iOS releases  - but now it‚Äôs been handed over to us mere commoners as well.</p>\n\n<p>Regardless, you‚Äôre likely familiar with it as an end user of iOS already:\n<img src=\"../assets/images/lpMessages.jpeg\" alt=\"Link Preview in Messages\" /></p>\n\n<p>Firing over a link, or really any URL, within Messages shows it in action.</p>\n\n<h3 id=\"retrieving-metadata\">Retrieving Metadata</h3>\n<p>One begins utilizing the framework by way of its <a href=\"https://developer.apple.com/documentation/linkpresentation/lpmetadataprovider\" target=\"_blank\"><code class=\"highlighter-rouge\">LPLinkMetadataProvider</code></a>. At first glance, its ease of use is apparent by the lack of any sort of <code class=\"highlighter-rouge\">LPMetadataProviderDelegate</code>, notification posting or similar feedback patterns.</p>\n\n<p>Instead, all you really need is one function:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">provider</span> <span class=\"o\">=</span> <span class=\"kt\">LPMetadataProvider</span><span class=\"p\">()</span>\n<span class=\"n\">provider</span><span class=\"o\">.</span><span class=\"nf\">startFetchingMetadata</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">theURL</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">metadata</span><span class=\"p\">,</span> <span class=\"n\">error</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n    <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">md</span> <span class=\"o\">=</span> <span class=\"n\">metadata</span> <span class=\"p\">{</span>\n        <span class=\"kt\">DispatchQueue</span><span class=\"o\">.</span><span class=\"n\">main</span><span class=\"o\">.</span><span class=\"n\">async</span> <span class=\"p\">{</span>\n            <span class=\"c1\">// Work with the metadata:</span>\n            <span class=\"c1\">// URL, title, icon, images, video and remote video URL data.</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<blockquote>\n  <p>As with most closure based APIs found within the Apple ecosystem, one must take care to dispatch back to the main queue if you plan to do any user interface processing.</p>\n</blockquote>\n\n<p>The few lines of code above should suffice for most use cases, but there are some things to be aware of. The most important, however, is how the life cycle of these providers work, namely - they are one shot objects.</p>\n\n<p>Once they‚Äôve kicked off their request, they are done. If you attempt to use it again, an exception is tossed immediately your way. Imagine if you were creating a <code class=\"highlighter-rouge\">List</code>, or a <code class=\"highlighter-rouge\">For Each</code>, of URL meta data in SwiftUI:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">PostRow</span> <span class=\"p\">:</span> <span class=\"kt\">UIViewRepresentable</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">post</span><span class=\"p\">:</span><span class=\"kt\">BlogPost</span>\n    <span class=\"k\">let</span> <span class=\"nv\">provider</span> <span class=\"o\">=</span> <span class=\"kt\">LPMetadataProvider</span><span class=\"p\">()</span>\n    \n    <span class=\"kd\">func</span> <span class=\"nf\">makeUIView</span><span class=\"p\">(</span><span class=\"nv\">context</span><span class=\"p\">:</span> <span class=\"kt\">Context</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">LPLinkView</span> <span class=\"p\">{</span>\n        <span class=\"kt\">LPLinkView</span><span class=\"p\">(</span><span class=\"nv\">url</span><span class=\"p\">:</span> <span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">postSlug</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"kd\">func</span> <span class=\"nf\">updateUIView</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">view</span><span class=\"p\">:</span> <span class=\"kt\">LPLinkView</span><span class=\"p\">,</span> <span class=\"nv\">context</span><span class=\"p\">:</span> <span class=\"kt\">Context</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"n\">provider</span><span class=\"o\">.</span><span class=\"nf\">startFetchingMetadata</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">postSlug</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">metadata</span><span class=\"p\">,</span> <span class=\"n\">error</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n            <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">md</span> <span class=\"o\">=</span> <span class=\"n\">metadata</span> <span class=\"p\">{</span>\n                <span class=\"kt\">DispatchQueue</span><span class=\"o\">.</span><span class=\"n\">main</span><span class=\"o\">.</span><span class=\"n\">async</span> <span class=\"p\">{</span>\n                    <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">metadata</span> <span class=\"o\">=</span> <span class=\"n\">md</span>\n                    <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"nf\">sizeToFit</span><span class=\"p\">()</span>\n                <span class=\"p\">}</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>That would crash as soon as scrolling and view recycling kicks in. Instead, get a new instance for each request. Mind the movement of the <code class=\"highlighter-rouge\">provider</code> property into <code class=\"highlighter-rouge\">updateUIView</code>:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">PostRow</span> <span class=\"p\">:</span> <span class=\"kt\">UIViewRepresentable</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">post</span><span class=\"p\">:</span><span class=\"kt\">BlogPost</span>\n    \n    <span class=\"kd\">func</span> <span class=\"nf\">makeUIView</span><span class=\"p\">(</span><span class=\"nv\">context</span><span class=\"p\">:</span> <span class=\"kt\">Context</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">LPLinkView</span> <span class=\"p\">{</span>\n        <span class=\"kt\">LPLinkView</span><span class=\"p\">(</span><span class=\"nv\">url</span><span class=\"p\">:</span> <span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">postSlug</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"kd\">func</span> <span class=\"nf\">updateUIView</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">view</span><span class=\"p\">:</span> <span class=\"kt\">LPLinkView</span><span class=\"p\">,</span> <span class=\"nv\">context</span><span class=\"p\">:</span> <span class=\"kt\">Context</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"c1\">// New instance for each update</span>\n        <span class=\"k\">let</span> <span class=\"nv\">provider</span> <span class=\"o\">=</span> <span class=\"kt\">LPMetadataProvider</span><span class=\"p\">()</span>\n        <span class=\"n\">provider</span><span class=\"o\">.</span><span class=\"nf\">startFetchingMetadata</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">postSlug</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">metadata</span><span class=\"p\">,</span> <span class=\"n\">error</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n            <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">md</span> <span class=\"o\">=</span> <span class=\"n\">metadata</span> <span class=\"p\">{</span>\n                <span class=\"kt\">DispatchQueue</span><span class=\"o\">.</span><span class=\"n\">main</span><span class=\"o\">.</span><span class=\"n\">async</span> <span class=\"p\">{</span>\n                    <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">metadata</span> <span class=\"o\">=</span> <span class=\"n\">md</span>\n                    <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"nf\">sizeToFit</span><span class=\"p\">()</span>\n                <span class=\"p\">}</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p>The same idea applies to collection or table views. Beyond that primary consideration, providers can also set a timeout (which defaults to a reasonable 30 seconds) or cancel the request outright. The error value, if present, is also derived from <code class=\"highlighter-rouge\">LPError</code>:</p>\n\n<ul>\n  <li>.unknown</li>\n  <li>.metadataFetchFailed</li>\n  <li>.metadataFetchCancelled</li>\n  <li>.metadataFetchTimedOut</li>\n</ul>\n\n<p>Assuming the <code class=\"highlighter-rouge\">com.apple.security.network.client</code> entitlement is setup, the provider object is ready to work and it‚Äôll fetch details on remote URLs without much to think about implementation wise. Though, you can stay local just the same. <code class=\"highlighter-rouge\">LPMetadataProvider</code> can operate on your own app‚Äôs URLs, in which case the (also new) <a href=\"https://developer.apple.com/documentation/quicklookthumbnailing\" target=\"_blank\">quicklook thumbnailing API</a> will be used to present it.</p>\n\n<h3 id=\"presenting-link-previews\">Presenting Link Previews</h3>\n<p>Of course, data is often only as useful to users as the views they are presented within. To that end, LinkPresentation offers a pre-baked solution which you may have noticed in the code above; <code class=\"highlighter-rouge\">LPLinkView</code>.</p>\n\n<p>A link view will base its visual representation of the link off of the information that was acquired by its meta data. A simple assignment within a meta data provider‚Äôs closure in <code class=\"highlighter-rouge\">startFetchingMetadata(for:)</code> will be a common pattern:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">linkView</span> <span class=\"o\">=</span> <span class=\"kt\">LPLinkView</span><span class=\"p\">(</span><span class=\"nv\">url</span><span class=\"p\">:</span> <span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">postSlug</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">provider</span> <span class=\"o\">=</span> <span class=\"kt\">LPMetadataProvider</span><span class=\"p\">()</span>\n<span class=\"n\">provider</span><span class=\"o\">.</span><span class=\"nf\">startFetchingMetadata</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">postSlug</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">metadata</span><span class=\"p\">,</span> <span class=\"n\">error</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n    <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">md</span> <span class=\"o\">=</span> <span class=\"n\">metadata</span> <span class=\"p\">{</span>\n        <span class=\"kt\">DispatchQueue</span><span class=\"o\">.</span><span class=\"n\">main</span><span class=\"o\">.</span><span class=\"n\">async</span> <span class=\"p\">{</span>\n            <span class=\"n\">linkView</span><span class=\"o\">.</span><span class=\"n\">metadata</span> <span class=\"o\">=</span> <span class=\"n\">md</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Results would look something along these lines:\n<img src=\"../assets/images/links.png\" alt=\"Link Preview in Messages\" /></p>\n\n<p>Since link views can be sorted any which way in an interface, it has some smarts to size itself accordingly. It has its own intrinsic size set - but as we‚Äôve done in the code samples, invoking <code class=\"highlighter-rouge\">sizeToFit()</code> can aid in getting its constraints in a sensible state for automatic cell sizing scenarios.</p>\n\n<p>Fortunately, this class is much more than static view. Depending on the meta data associated with it, you can expect inline video playback for Youtube content, maps for Apple Maps and all the images included in a Tweet as you see above.</p>\n\n<h3 id=\"efficiency-considerations\">Efficiency Considerations</h3>\n<p>If you anticipate hitting the same URL again, you‚Äôll be happy to see that <code class=\"highlighter-rouge\">LPMetaData</code> conforms to <a href=\"http://localhost:4000/NSSecureCoding\"><code class=\"highlighter-rouge\">NSSecureCoding</code></a> right out of the box. Since meta data providers have a limited lifespan by design, caching makes a lot of sense here from both an API design and user experience perspective. Skipping network calls for the same URL within a close time period is always a good idea.</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">data</span> <span class=\"o\">=</span> <span class=\"k\">try</span><span class=\"p\">?</span> <span class=\"kt\">NSKeyedArchiver</span><span class=\"o\">.</span><span class=\"nf\">archivedData</span><span class=\"p\">(</span><span class=\"nv\">withRootObject</span><span class=\"p\">:</span> <span class=\"n\">retrievedMetadata</span><span class=\"p\">,</span> <span class=\"nv\">requiringSecureCoding</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"k\">do</span> <span class=\"p\">{</span>\n        <span class=\"k\">try</span> <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"nv\">to</span><span class=\"p\">:</span> <span class=\"n\">fileURL</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span> <span class=\"k\">catch</span> <span class=\"p\">{</span>\n        <span class=\"c1\">// Dragons</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// Then later pull it back out if the request is for a cached URL</span>\n</code></pre></div></div>\n\n<p>Further, a common flow for URLs is to pop them over to the share sheet via <code class=\"highlighter-rouge\">UIActivityViewController</code>. Passing only the URL still works - just not as well. Now, if you‚Äôre already conforming to <code class=\"highlighter-rouge\">UIActivityItemSource</code> to pass off data, just implement the new <code class=\"highlighter-rouge\">activityViewControllerLinkMetadata(_) -&gt; LPLinkMetaData</code> function to return the link‚Äôs content that you‚Äôve already retrieved:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">func</span> <span class=\"nf\">activityViewControllerLinkMetadata</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">activityViewController</span><span class=\"p\">:</span> <span class=\"kt\">UIActivityViewController</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">LPLinkMetadata</span><span class=\"p\">?</span> <span class=\"p\">{</span>\n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">metadata</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p>This route ensures the share sheet will show the link‚Äôs data instantly, instead of asynchronously pulling it in via another meta data request. Plus, it‚Äôs a gift that keeps on giving. If the users goes straight to Messages for the share request, the data is handed right off once more.</p>\n\n<blockquote>\n  <p>Also, if you‚Äôve got local data already, it‚Äôs completely fine to create your own meta data object and fill in its contents yourself. There‚Äôs nothing that says this meta data has to come from the network.</p>\n</blockquote>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>Sometimes you need to roll your own solution to get a job done in software engineering. UIKit, or whatever the framework is, could have the pieces you need but might lack the holistic vision of what you‚Äôre after. This was the case with link previews. If you‚Äôve rolled your own, well - today‚Äôs innovation is now tomorrow‚Äôs deprecation. But this time, it‚Äôs for all of the right reasons.</p>\n\n<p>Let Apple take another menial task off of your plate. In the same spirit of SwiftUI‚Äôs announcement, the more we can afford to Cupertino and Friends¬©, then the more we can spend time on making our own app‚Äôs shine. Now, we check making link previews off of our own list.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "It wasn‚Äôt but three posts ago that I began my piece by opining about the forgotten heroes of WWDC.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-06-21T00:00:00-05:00",
            "date_modified": "2019-06-21T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["LinkPresentation"]},{
            "id": "http://localhost:4000/iOS-13-Notable-UIKit-Additions",
            "url": "http://localhost:4000/iOS-13-Notable-UIKit-Additions/",
            "title": "iOS 13: Notable UIKit Additions",
            "content_html": "<p>Phew.</p>\n\n<p>This year‚Äôs WWDC has simply been a monster of the best kind. SwiftUI is a seismic shift, yet it‚Äôs <em>far</em> from the only relevant news. Now that we‚Äôve finally got a good look at iOS 13 (and, for the pedantic, iPadOS) and all it has on offer - the problem now becomes knowing where to start and how to focus your attention.</p>\n\n<p>Each year, I dive in on the latest version of iOS and try to surface some of the new APIs that our favorite framework, UIKit, has brought to the table. There is plenty to look at this year, so let‚Äôs dive right in on some of my favorite additions.</p>\n\n<p>If you want to catch up on this series first, view the <a href=\"http://localhost:4000/iOS-11-notable-uikit-additions\">iOS 11</a> and <a href=\"http://localhost:4000/iOS-12-notable-uikit-additions\">iOS 12</a> versions of this article.</p>\n\n<p>For now, let‚Äôs chat UIKit and iOS 13 centerpieces!</p>\n\n<h3 id=\"diffing\">Diffing</h3>\n<p>Last year, Apple and friends dove in on how to do batch updates the right way. It was a needed session, but the sentiment afterwards was still the same as it ever has been, <em>it‚Äôs still hard to get right</em>.</p>\n\n<p>Well, at least it was.</p>\n\n<p>Now, UIKit offers powerful diffing which pipes right on down to your collection and table views to perform batch updates on your behalf. This is accomplished via a dedicated data source object which works in tandem with snapshots of your ever mutating data.</p>\n\n<p>Take this sample data model:</p>\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">:</span> <span class=\"kt\">Hashable</span> <span class=\"p\">{</span>\n    <span class=\"kd\">static</span> <span class=\"k\">let</span> <span class=\"nv\">cellID</span> <span class=\"o\">=</span> <span class=\"s\">\"testID\"</span>\n    <span class=\"k\">let</span> <span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"kt\">String</span>\n    <span class=\"k\">let</span> <span class=\"nv\">identifier</span> <span class=\"o\">=</span> <span class=\"kt\">UUID</span><span class=\"p\">()</span>\n    <span class=\"kd\">func</span> <span class=\"nf\">hash</span><span class=\"p\">(</span><span class=\"n\">into</span> <span class=\"nv\">hasher</span><span class=\"p\">:</span> <span class=\"k\">inout</span> <span class=\"kt\">Hasher</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"n\">hasher</span><span class=\"o\">.</span><span class=\"nf\">combine</span><span class=\"p\">(</span><span class=\"n\">identifier</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n    <span class=\"kd\">static</span> <span class=\"kd\">func</span> <span class=\"o\">==</span> <span class=\"p\">(</span><span class=\"nv\">lhs</span><span class=\"p\">:</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">,</span> <span class=\"nv\">rhs</span><span class=\"p\">:</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Bool</span> <span class=\"p\">{</span>\n        <span class=\"k\">return</span> <span class=\"n\">lhs</span><span class=\"o\">.</span><span class=\"n\">identifier</span> <span class=\"o\">==</span> <span class=\"n\">rhs</span><span class=\"o\">.</span><span class=\"n\">identifier</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// And this at the controller level for brevity</span>\n<span class=\"kd\">enum</span> <span class=\"kt\">Section</span><span class=\"p\">:</span> <span class=\"kt\">CaseIterable</span> <span class=\"p\">{</span>\n    <span class=\"k\">case</span> <span class=\"n\">firstSection</span>\n    <span class=\"k\">case</span> <span class=\"n\">secondSection</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">exampleData</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"One\"</span><span class=\"p\">),</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Two\"</span><span class=\"p\">),</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Three\"</span><span class=\"p\">)]</span>\n</code></pre></div></div>\n\n<p>One can apply such a data model to populate either a table or collection view. In our case, a table view - wherein its data source is typed as such:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">var</span> <span class=\"nv\">dataSource</span><span class=\"p\">:</span> <span class=\"kt\">UITableViewDiffableDataSource</span><span class=\"o\">&lt;</span><span class=\"kt\">SectionIdentifierType</span><span class=\"p\">,</span> <span class=\"kt\">ItemIdentifierType</span><span class=\"o\">&gt;!</span>\n<span class=\"c1\">// Or a UICollectionViewDiffableDataSource</span>\n</code></pre></div></div>\n\n<p>Both the section and item identifier must be <code class=\"highlighter-rouge\">hashable</code> - and they‚Äôll correspond to your sections and their contents when initialized. So, for a single section table view with our data model, it could look like this:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">dataSource</span> <span class=\"o\">=</span> <span class=\"kt\">UITableViewDiffableDataSource</span><span class=\"o\">&lt;</span><span class=\"kt\">Section</span><span class=\"p\">,</span> <span class=\"kt\">ExampleRow</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"nv\">tableView</span><span class=\"p\">:</span> <span class=\"n\">tv</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">tableview</span><span class=\"p\">,</span> <span class=\"n\">indexPath</span><span class=\"p\">,</span> <span class=\"n\">exampleRow</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">UITableViewCell</span> <span class=\"k\">in</span>\n    <span class=\"k\">let</span> <span class=\"nv\">demoCell</span> <span class=\"o\">=</span> <span class=\"n\">tableview</span><span class=\"o\">.</span><span class=\"nf\">dequeueReusableCell</span><span class=\"p\">(</span><span class=\"nv\">withIdentifier</span><span class=\"p\">:</span> <span class=\"n\">cellIdentifier</span><span class=\"p\">,</span> <span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">indexPath</span><span class=\"p\">)</span>\n    <span class=\"n\">demoCell</span><span class=\"o\">.</span><span class=\"n\">textLabel</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"n\">exampleRow</span><span class=\"o\">.</span><span class=\"n\">title</span>\n    <span class=\"k\">return</span> <span class=\"n\">demoCell</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>This describes to the table view what the data model will look like and how it should be handled, but initially populating it something works much the same way with a concrete <code class=\"highlighter-rouge\">NSDiffableDataSourceSnapshot&lt;SectionIdentifierType, ItemIdentifierType&gt;</code>:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">snapshot</span> <span class=\"o\">=</span> <span class=\"kt\">NSDiffableDataSourceSnapshot</span><span class=\"o\">&lt;</span><span class=\"kt\">Section</span><span class=\"p\">,</span> <span class=\"kt\">ExampleRow</span><span class=\"o\">&gt;</span><span class=\"p\">()</span>\n<span class=\"n\">snapshot</span><span class=\"o\">.</span><span class=\"nf\">appendSections</span><span class=\"p\">([</span><span class=\"o\">.</span><span class=\"n\">firstSection</span><span class=\"p\">])</span>\n<span class=\"n\">snapshot</span><span class=\"o\">.</span><span class=\"nf\">appendItems</span><span class=\"p\">(</span><span class=\"n\">exampleData</span><span class=\"p\">)</span>\n<span class=\"n\">dataSource</span><span class=\"o\">.</span><span class=\"nf\">apply</span><span class=\"p\">(</span><span class=\"n\">snapshot</span><span class=\"p\">,</span> <span class=\"nv\">animatingDifferences</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Doing so would give us this:\n<img src=\"../assets/images/firstSnapshot.png\" alt=\"Data Snapshot\" /></p>\n\n<p>By applying the diff to the existing data source handler for the table view, the C.R.U.D. operations are applied. This is essentially the flow each time.</p>\n\n<p>The existing data source handler has a reference to the current diff, so if you simply wanted to add three items to our table view, it might go something like this:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">snapshot</span> <span class=\"o\">=</span> <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">dataSource</span><span class=\"o\">.</span><span class=\"nf\">snapshot</span><span class=\"p\">()</span>\n<span class=\"n\">snapshot</span><span class=\"o\">.</span><span class=\"nf\">appendItems</span><span class=\"p\">([</span><span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Six\"</span><span class=\"p\">),</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Eigth\"</span><span class=\"p\">),</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Nine\"</span><span class=\"p\">)],</span> <span class=\"nv\">toSection</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">firstSection</span><span class=\"p\">)</span>\n<span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">dataSource</span><span class=\"o\">.</span><span class=\"nf\">apply</span><span class=\"p\">(</span><span class=\"n\">snapshot</span><span class=\"p\">,</span> <span class=\"nv\">animatingDifferences</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>The result:\n<img src=\"../assets/images/secondSnapshot.png\" alt=\"Second Data Snapshot\" /></p>\n\n<p>Peering into the header for diffable snapshot reveals all sorts of things you‚Äôd want it do, such as updates, moves, etc.</p>\n\n<blockquote>\n  <p>One can apply snaphots from any queue, as well. The only requirement is consistency. So, if you update off of main, then one should <em>always</em> apply snapshots off of main.</p>\n</blockquote>\n\n<p>The flow is much different than what you were used to (a common theme for just about everything announced this year at dub dub), as reliance on a data source conformer along with index paths have less of an emphasis. But the changes are welcome, and they both eliminate a common source of friction for developers and provide a more fluid user experience to consumers.</p>\n\n<h3 id=\"compositional-layouts\">Compositional Layouts</h3>\n<p>Ever wonder how one might go about making the layout in the Apps or Games tab within the App Store on iOS? You‚Äôve got a central vertically scrolling layout, interspersed with horizontally scrolling layouts. While composing collection or table views within one another works (and is widely used), with iOS 13 - there‚Äôs a better way.</p>\n\n<p>Enter collection view‚Äôs new compositional layout:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">itemSize</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSize</span><span class=\"p\">(</span><span class=\"nv\">widthDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalWidth</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">),</span>\n                                             <span class=\"nv\">heightDimension</span><span class=\"p\">:</span><span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">))</span>\n<span class=\"k\">let</span> <span class=\"nv\">item</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutItem</span><span class=\"p\">(</span><span class=\"nv\">layoutSize</span><span class=\"p\">:</span> <span class=\"n\">itemSize</span><span class=\"p\">)</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">groupSize</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSize</span><span class=\"p\">(</span><span class=\"nv\">widthDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalWidth</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">),</span>\n                                      <span class=\"nv\">heightDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">0.25</span><span class=\"p\">))</span>\n<span class=\"k\">let</span> <span class=\"nv\">group</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutGroup</span><span class=\"o\">.</span><span class=\"nf\">horizontal</span><span class=\"p\">(</span><span class=\"nv\">layoutSize</span><span class=\"p\">:</span> <span class=\"n\">groupSize</span><span class=\"p\">,</span>\n                                                 <span class=\"nv\">subitems</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"n\">item</span><span class=\"p\">])</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">section</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSection</span><span class=\"p\">(</span><span class=\"nv\">group</span><span class=\"p\">:</span> <span class=\"n\">group</span><span class=\"p\">)</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">layout</span> <span class=\"o\">=</span> <span class=\"kt\">UICollectionViewCompositionalLayout</span><span class=\"p\">(</span><span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"n\">section</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// Now assign it as the layout</span>\n<span class=\"n\">collectionView</span> <span class=\"o\">=</span> <span class=\"kt\">UICollectionView</span><span class=\"p\">(</span><span class=\"nv\">frame</span><span class=\"p\">:</span> <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">bounds</span><span class=\"p\">,</span> <span class=\"nv\">collectionViewLayout</span><span class=\"p\">:</span> <span class=\"n\">layout</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>The above code produces a table view like experience, where each row spans the full width of the view and each row is about one quarter of its height. At first glance, one might assume our old line breaking layout of yore, <code class=\"highlighter-rouge\">UICollectionViewFlowLayout</code>, would yield the same results with less code.</p>\n\n<p>And you‚Äôre right. But looking at it purely with those optics is also missing the point. As the name suggests, composability comes naturally with this new layout. Looking closer we can see by reading from bottom to top that:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// An item's size</span>\n<span class=\"k\">let</span> <span class=\"nv\">itemSize</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSize</span><span class=\"p\">(</span><span class=\"nv\">widthDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalWidth</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">),</span>\n                                             <span class=\"nv\">heightDimension</span><span class=\"p\">:</span><span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">))</span>\n\n<span class=\"c1\">// An item in a group</span>\n<span class=\"k\">let</span> <span class=\"nv\">item</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutItem</span><span class=\"p\">(</span><span class=\"nv\">layoutSize</span><span class=\"p\">:</span> <span class=\"n\">itemSize</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// A group size</span>\n<span class=\"k\">let</span> <span class=\"nv\">groupSize</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSize</span><span class=\"p\">(</span><span class=\"nv\">widthDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalWidth</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">),</span>\n                                      <span class=\"nv\">heightDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">0.25</span><span class=\"p\">))</span>\n\n<span class=\"c1\">// A group has a group size with items</span>\n<span class=\"k\">let</span> <span class=\"nv\">group</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutGroup</span><span class=\"o\">.</span><span class=\"nf\">horizontal</span><span class=\"p\">(</span><span class=\"nv\">layoutSize</span><span class=\"p\">:</span> <span class=\"n\">groupSize</span><span class=\"p\">,</span>\n                                                 <span class=\"nv\">subitems</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"n\">item</span><span class=\"p\">])</span>\n\n<span class=\"c1\">// A section has groups</span>\n<span class=\"k\">let</span> <span class=\"nv\">section</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSection</span><span class=\"p\">(</span><span class=\"nv\">group</span><span class=\"p\">:</span> <span class=\"n\">group</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// A layout has sections</span>\n<span class=\"k\">let</span> <span class=\"nv\">layout</span> <span class=\"o\">=</span> <span class=\"kt\">UICollectionViewCompositionalLayout</span><span class=\"p\">(</span><span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"n\">section</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>‚Ä¶it builds on top of itself with a (mostly) <em>has a</em> relationship. This means more complex layouts can be achieved with far less cognitive load than it used to require. Code is read much more than it‚Äôs written, and this setup makes layouts easier to reason about.</p>\n\n<p>I think Apple saw this, too. Collection view has been around since iOS 6, and in 2018 they gave us the aforementioned session on how to do custom layouts sprinkled with a ‚ÄúWe know you find this a bit difficult‚Äù kind of sentiment.</p>\n\n<p>Going further, compositional layout gives us this notion of a <code class=\"highlighter-rouge\">NSCollectionLayoutDimension</code>. Using it, one could size things many different ways:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">fractionalHeight</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutDimension</span><span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">absoluteHeight</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutDimension</span><span class=\"o\">.</span><span class=\"nf\">absolute</span><span class=\"p\">(</span><span class=\"mf\">44.0</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">estimatedHeight</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutDimension</span><span class=\"o\">.</span><span class=\"nf\">estimated</span><span class=\"p\">(</span><span class=\"mi\">64</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Even better, one can easily mix and match an axis to scroll on, a l√° the App Store scenario, by way of <code class=\"highlighter-rouge\">UICollectionLayoutSectionOrthogonalScrollingBehavior</code>:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">section</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSection</span><span class=\"p\">(</span><span class=\"nv\">group</span><span class=\"p\">:</span> <span class=\"n\">group</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// Default scrolling, more or less</span>\n<span class=\"n\">section</span><span class=\"o\">.</span><span class=\"n\">orthogonalScrollingBehavior</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">continuous</span>\n\n<span class=\"c1\">// Rests at the leading edge of the *group's* boundary</span>\n<span class=\"n\">section</span><span class=\"o\">.</span><span class=\"n\">orthogonalScrollingBehavior</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">continuousGroupLeadingBoundary</span>\n\n<span class=\"c1\">// Hey, we know this one! Paging driven by the collection view's bounds.</span>\n<span class=\"n\">section</span><span class=\"o\">.</span><span class=\"n\">orthogonalScrollingBehavior</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">paging</span>\n\n<span class=\"c1\">// Paging is driven by the section layout group's dimension</span>\n<span class=\"n\">section</span><span class=\"o\">.</span><span class=\"n\">orthogonalScrollingBehavior</span> <span class=\"o\">=</span> <span class=\"n\">groupPaging</span> \n</code></pre></div></div>\n\n<p>The API design is very well put together and lends itself well to later refactors. And, though I cannot assert with absolute authority that it was Steve Breen who authored it, anyone who rolls up to dub dub to emcee a session wearing a T-Shirt with wolves on it while wearing blue jeans is someone who goes so hard in the paint that I wouldn‚Äôt even question it if it weren‚Äôt.</p>\n\n<p>Steve Breen is the G.O.A.T. of dub dub talks - and I‚Äôve learned quite a lot from all of his content so far. For all of the hoorahs SwiftUI has (deservedly so) received, it can be easy to forget that engineers such as Steve are still here to ensure UIKit stays relevant, efficient and a pragmatic choice to build apps with.</p>\n\n<blockquote>\n  <p>You may have asked yourself why the <code class=\"highlighter-rouge\">NS</code> prefix is here in a <code class=\"highlighter-rouge\">UIKit</code> world? Catalyst, and UIKit for Mac, is likely the reason.</p>\n</blockquote>\n\n<h3 id=\"scenes\">Scenes</h3>\n<p>When it comes to vanilla UIKit, this is probably the most foundational change. At its core, scenes allow for iPadOS to kick off multiple instances of your app even though they still all run within one process. Though, even if you aren‚Äôt targeting iPadOS - it‚Äôs still a wise choice to adopt the model in your app. The tea leaves are here and they aren‚Äôt exactly subtle.</p>\n\n<p>Create a new project using the single view template in Xcode 11 and look at the files:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">AppDelegate</span><span class=\"o\">.</span><span class=\"n\">swift</span>\n<span class=\"kt\">SceneDelegate</span><span class=\"o\">.</span><span class=\"n\">swift</span> <span class=\"c1\">// New, conforms to UIWindowSceneDelegate</span>\n</code></pre></div></div>\n\n<p>And in the <code class=\"highlighter-rouge\">info.plist</code>:</p>\n\n<div class=\"language-xml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nt\">&lt;key&gt;</span>UIApplicationSceneManifest<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;dict&gt;</span>\n        <span class=\"nt\">&lt;key&gt;</span>UIApplicationSupportsMultipleScenes<span class=\"nt\">&lt;/key&gt;</span>\n        <span class=\"nt\">&lt;true/&gt;</span>\n        <span class=\"nt\">&lt;key&gt;</span>UISceneConfigurations<span class=\"nt\">&lt;/key&gt;</span>\n        <span class=\"nt\">&lt;dict&gt;</span>\n            <span class=\"nt\">&lt;key&gt;</span>UIWindowSceneSessionRoleApplication<span class=\"nt\">&lt;/key&gt;</span>\n            <span class=\"nt\">&lt;array&gt;</span>\n                <span class=\"nt\">&lt;dict&gt;</span>\n                    <span class=\"nt\">&lt;key&gt;</span>UILaunchStoryboardName<span class=\"nt\">&lt;/key&gt;</span>\n                    <span class=\"nt\">&lt;string&gt;</span>LaunchScreen<span class=\"nt\">&lt;/string&gt;</span>\n                    <span class=\"nt\">&lt;key&gt;</span>UISceneConfigurationName<span class=\"nt\">&lt;/key&gt;</span>\n                    <span class=\"nt\">&lt;string&gt;</span>Default Configuration<span class=\"nt\">&lt;/string&gt;</span>\n                    <span class=\"nt\">&lt;key&gt;</span>UISceneDelegateClassName<span class=\"nt\">&lt;/key&gt;</span>\n                    <span class=\"nt\">&lt;string&gt;</span>$(PRODUCT_MODULE_NAME).SceneDelegate<span class=\"nt\">&lt;/string&gt;</span>\n                    <span class=\"nt\">&lt;key&gt;</span>UISceneStoryboardFile<span class=\"nt\">&lt;/key&gt;</span>\n                    <span class=\"nt\">&lt;string&gt;</span>Main<span class=\"nt\">&lt;/string&gt;</span>\n                <span class=\"nt\">&lt;/dict&gt;</span>\n            <span class=\"nt\">&lt;/array&gt;</span>\n        <span class=\"nt\">&lt;/dict&gt;</span>\n    <span class=\"nt\">&lt;/dict&gt;</span>\n<span class=\"nt\">&lt;/key&gt;</span>\n</code></pre></div></div>\n\n<p>The path of least resistance is to conceptually take your root view construction out of the app delegate, and instead consider the concept of several scenes that could occur - and assign views to those.</p>\n\n<p>The .plist approach, of course, isn‚Äôt the only way. You can skip the manifest and roll it in code:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// In your app delegate objecet...</span>\n<span class=\"kd\">func</span> <span class=\"nf\">application</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">application</span><span class=\"p\">:</span> <span class=\"kt\">UIApplication</span><span class=\"p\">,</span> <span class=\"n\">configurationForConnecting</span> <span class=\"nv\">connectingSceneSession</span><span class=\"p\">:</span> <span class=\"kt\">UISceneSession</span><span class=\"p\">,</span> <span class=\"nv\">options</span><span class=\"p\">:</span> <span class=\"kt\">UIScene</span><span class=\"o\">.</span><span class=\"kt\">ConnectionOptions</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">UISceneConfiguration</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"kt\">UISceneConfiguration</span><span class=\"p\">(</span><span class=\"nv\">name</span><span class=\"p\">:</span> <span class=\"s\">\"Default Configuration\"</span><span class=\"p\">,</span> <span class=\"nv\">sessionRole</span><span class=\"p\">:</span> <span class=\"n\">connectingSceneSession</span><span class=\"o\">.</span><span class=\"n\">role</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// And then in your scene delegate</span>\n<span class=\"kd\">func</span> <span class=\"nf\">scene</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">scene</span><span class=\"p\">:</span> <span class=\"kt\">UIScene</span><span class=\"p\">,</span> <span class=\"n\">willConnectTo</span> <span class=\"nv\">session</span><span class=\"p\">:</span> <span class=\"kt\">UISceneSession</span><span class=\"p\">,</span> <span class=\"n\">options</span> <span class=\"nv\">connectionOptions</span><span class=\"p\">:</span> <span class=\"kt\">UIScene</span><span class=\"o\">.</span><span class=\"kt\">ConnectionOptions</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">windowScene</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">scene</span> <span class=\"k\">as?</span> <span class=\"kt\">UIWindowScene</span><span class=\"p\">)</span> <span class=\"k\">else</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"p\">}</span>\n    <span class=\"k\">let</span> <span class=\"nv\">window</span> <span class=\"o\">=</span> <span class=\"kt\">UIWindow</span><span class=\"p\">(</span><span class=\"nv\">windowScene</span><span class=\"p\">:</span> <span class=\"n\">windowScene</span><span class=\"p\">)</span>\n    <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">rootViewController</span> <span class=\"o\">=</span> <span class=\"kt\">UIViewController</span><span class=\"p\">()</span>\n    <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"nf\">makeKeyAndVisible</span><span class=\"p\">()</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>This is a larger subject that I‚Äôm personally excited to dive more into, as other app-delegatey things have also moved (such as accepting CloudKit shares). The shift from thinking of an app delegate as a keeper of multiple sessions instead of a 1:1 execution flow allows for all sorts of exciting scenarios.</p>\n\n<h3 id=\"glyphs-and-images\">Glyphs and Images</h3>\n<p>No doubt you‚Äôve heard about a 1,500+ strong icon pack that the crack Apple design team has provided. For the curious among us, you can even download a <a href=\"https://developer.apple.com/design/downloads/SF-Symbols.dmg\" target=\"_blank\">dedicated macOS app</a> to view them all right now.</p>\n\n<p><em>Cool! An icon pack!</em></p>\n\n<p>Nay, it‚Äôs much more than that. The subtleties are what become difficult about glpyhs - getting them all in the correct weights and sizes, ensuring sure line heights stay in harmony with system fonts or making them big when they should be and small when they shouldn‚Äôt.</p>\n\n<p>And, that‚Äôs only after you‚Äôve got them all exported out and then you‚Äôve got to tack on the time it takes to maintain them as well. But that‚Äôs pre iOS 13, because a lot of these pain points have been solved:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// A pencil glyph</span>\n<span class=\"k\">let</span> <span class=\"nv\">glyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"p\">(</span><span class=\"nv\">systemName</span><span class=\"p\">:</span> <span class=\"s\">\"pencil\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// Or overload it according to a traitCollection or image config</span>\n<span class=\"k\">let</span> <span class=\"nv\">canExpandGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"p\">(</span><span class=\"nv\">systemName</span><span class=\"p\">:</span> <span class=\"s\">\"square.split.2x1\"</span><span class=\"p\">,</span> <span class=\"nv\">compatibleWith</span><span class=\"p\">:</span> <span class=\"n\">regularWidthCollection</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">didExpandGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"p\">(</span><span class=\"nv\">systemName</span><span class=\"p\">:</span> <span class=\"s\">\"square.split.2x1.filled\"</span><span class=\"p\">,</span> <span class=\"nv\">compatibleWith</span><span class=\"p\">:</span> <span class=\"n\">compactWidthCollection</span><span class=\"o\">.</span><span class=\"p\">)</span>\n</code></pre></div></div>\n<p>While other overloads and techniques exist, that code sample is enough to get you up and going. And that‚Äôs a good thing.</p>\n\n<p>Another little gimme <code class=\"highlighter-rouge\">UIImage</code> has given us are class level instances for common user experience actions, like closing or adding an item:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">closeGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"o\">.</span><span class=\"n\">close</span>\n<span class=\"k\">let</span> <span class=\"nv\">addGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"o\">.</span><span class=\"n\">add</span>\n<span class=\"k\">let</span> <span class=\"nv\">removeGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"o\">.</span><span class=\"n\">remove</span>\n</code></pre></div></div>\n\n<p>These are just convenience initializers (not in the concrete Swift term) that boil down to what Cupertino and Friends¬© have deemed most appropriate for those items. For example, in the first beta of iOS 13, <code class=\"highlighter-rouge\">UIImage.close</code> is returning the ‚Äúxmark‚Äù glyph.</p>\n\n<p>Going further, with the highlighted emphasis Apple has placed upon <code class=\"highlighter-rouge\">UITraitCollection</code>, it‚Äôs not a lot of work to make an image (or color) toggle based upon the trait collection housing it. See this <a href=\"https://gist.github.com/timonus/8b4feb47eccb6dde47ca6320d8fc6b11\" target=\"_blank\">gist</a>, via <a href=\"https://twitter.com/timonus\" target=\"_blank\">Tim</a>, to get a feel for what that looks like.</p>\n\n<h3 id=\"bonus---inset-grouped\">Bonus - Inset Grouped</h3>\n<p>This is a small one, albeit one that we should have seen coming for the last year. If you follow <a href=\"https://github.com/ResearchKit/ResearchKit\" target=\"_blank\">Research Kit‚Äôs</a> development, then it was clear where iOS was taking some of its new table view styles:</p>\n\n<p><img src=\"../assets/images/RK2Stable.png\" alt=\"Research Kit 2.0\" /></p>\n\n<p>The grouped table view hearkens back to the original grouped style, yet it adds a subtle corner radius to the beginning and end cells. The Research Kit team added this style as part of its version 2 release. It‚Äôs a style that‚Äôs easily achieved on your own, but why would you?</p>\n\n<p>Enter <a href=\"https://developer.apple.com/documentation/uikit/uitableview/style/insetgrouped\" target=\"_blank\">.insetGrouped</a>:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">tableView</span> <span class=\"o\">=</span> <span class=\"kt\">UITableView</span><span class=\"p\">(</span><span class=\"nv\">frame</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">zero</span><span class=\"p\">,</span> <span class=\"nv\">style</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">insetGrouped</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Now, you‚Äôll get this new style for free.</p>\n\n<h3 id=\"double-bonus---uitraitcollection\">Double Bonus - UITraitCollection</h3>\n<p>I alluded to this earlier, but seriously! So much changed with trait collections, so much was added and so much responsibility was bequeathed unto it with iOS 13 that you just need to book up on it. It‚Äôs a post for another day, but many would-be problems were solved with it in iOS 13, making things like dark mode friendly to adopt.</p>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>WWDC 2019 will certainly be remembered as the year SwiftUI started. With such a powerfully abstracted declarative framework, who knows where it might end up. I can‚Äôt believe I‚Äôm writing this, but SwiftUI could end up being the best way to create even Android apps years from now (doubtful, <em>but</em> not as doubtful as that statement was before last week).</p>\n\n<p>But, even though SwiftUI is <em>not</em> UIKit, the latter is certainly here to stay. And this year, it became better than it ever has been.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Phew.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-06-07T00:00:00-05:00",
            "date_modified": "2019-06-07T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["UIKit"]},{
            "id": "http://localhost:4000/WWDC-2019-The-Pregame-Quiz",
            "url": "http://localhost:4000/WWDC-2019-The-Pregame-Quiz/",
            "title": "WWDC 2019: The Pregame Quiz",
            "content_html": "<p>Dark mode, Marzipan and who knows what else await us which means we‚Äôre not far from Tim Cook and Friends revealing iOS 13 to the world. With a ton of services announcements already taken care of such as Apple TV+, Apple News+ and more - the tea leaves indicate that they‚Äôre going hard on pure API news this year.</p>\n\n<p>At this point it‚Äôs all conjecture, so let‚Äôs ready up with the fifth annual Swiftjective-C WWDC Pregame Quiz!</p>\n\n<p>If you‚Äôd like a quick primer on how this all works or how it got started, check out the first four quizzes from <a href=\"http://localhost:4000/WWDC-2015-The-Pregame-Quiz\">2015</a> ,<a href=\"http://localhost:4000/WWDC-2016-The-Pregame-Quiz\">2016</a>, <a href=\"http://localhost:4000/WWDC-2017-The-Pregame-Quiz\">2017</a> and <a href=\"http://localhost:4000/WWDC-2018-The-Pregame-Quiz\">2018</a>.</p>\n\n<p>Now - Lets.Play(with:üî•)!</p>\n\n<h3 id=\"ground-rules\">Ground Rules</h3>\n\n<p>There are three rounds, and the point break down is as follows:</p>\n\n<ul>\n  <li><strong>Round 1</strong> ‚Äì 1 point each answer</li>\n  <li><strong>Round 2</strong> - 2 points each answer</li>\n  <li><strong>Round 3</strong> - 3 points each answer</li>\n</ul>\n\n<p>The last question of each round is an optional wildcard question. Get it right, and your team gets <strong>4</strong> <strong>points</strong>, <em>but</em> miss it and the team will be <strong>deducted 2 points</strong>.</p>\n\n<h3 id=\"round-1swift-decisions\">Round 1‚Ää‚Äî‚ÄäSwift Decisions</h3>\n\n<p><strong>Question 1:</strong><br />\nWhat‚Äôs the name of the Swift attribute, added in Swift 5 to bolster dynamic language interoperability, that allows one to call named types like you‚Äôd call functions using a simple syntactic sugar?</p>\n\n<p>Example:</p>\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"err\">@</span><span class=\"p\">(</span><span class=\"n\">the</span> <span class=\"n\">attribute</span> <span class=\"n\">name</span><span class=\"p\">)</span> <span class=\"kd\">struct</span> <span class=\"kt\">SwiftjectiveC</span> \n<span class=\"p\">{</span>\n    <span class=\"kd\">func</span> <span class=\"nf\">showArticles</span><span class=\"p\">(</span><span class=\"nv\">withTags</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"kt\">String</span><span class=\"p\">])</span> <span class=\"p\">{}</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">instance</span> <span class=\"o\">=</span> <span class=\"kt\">SwiftjectiveC</span><span class=\"p\">()</span>\n\n<span class=\"nf\">instance</span><span class=\"p\">(</span><span class=\"s\">\"Foundation\"</span><span class=\"p\">,</span> <span class=\"s\">\"Swift\"</span><span class=\"p\">)</span>\n<span class=\"c1\">// This will desugar down to instance.showArticles(withTags: [\"Foundation\", \"Swift\"])</span>\n</code></pre></div></div>\n\n<p><strong>Question 2:</strong><br />\nIn Swift, variables are initialized before they are used by a concept enforced by LLVM‚Äôs optimizer. What is this concept in computer science referred to as?</p>\n\n<p><strong>Question 3:</strong><br />\nSIMD Vector and Result types were finally added to Swift in an official capacity in what version?</p>\n\n<p><strong>Question 4:</strong> <br />\nBefore Apple‚Äôs Swift was announced, there already existed a parallel programming language by the same name - who were its developers?</p>\n\n<p><strong>Wildcard:</strong><br />\nBefore Swift was a popular programming language at Apple, it was also the codename for an Apple-designed processor - which one was it?</p>\n\n<h3 id=\"round-2ios-history-101\">Round 2‚Ää‚Äî‚ÄäiOS History 101</h3>\n\n<p><strong>Question 1:</strong><br />\nAuto Layout, long a core component of laying out user interfaces on macOS, didn‚Äôt arrive on iOS until which major release?</p>\n\n<p><strong>Question 2:</strong><br />\nSecurity is a hallmark feature of iOS, and this specific feature involves placing data in random locations in memory and works alongside ARM‚Äôs XN (Execute Never) feature to prevent buffer overflow attacks - what is it?</p>\n\n<p><strong>Question 3:</strong><br />\nWhen iOS was still shrouded in secrecy within Apple, how old was the youngest engineer working on iOS 1.0?</p>\n\n<p><strong>Question 4:</strong> <br />\nWhen the iPhone was first launched on June 29th, 2007 its operating system wasn‚Äôt yet referred to as iOS until iOS 4. What was its original name?</p>\n\n<p><strong>Wildcard:</strong><br />\nLeading the way to haggle all of your friends who appear as green bubbles in your conversations, in which version of iOS did iMessage debut?</p>\n\n<h3 id=\"round-3apple-myth-and-lore\">Round 3‚Ää‚Äî‚ÄäApple Myth and Lore</h3>\n\n<p><strong>Question 1:</strong><br />\nLeading up to its March 25th, 2019 ‚ÄúIt‚Äôs Showtime‚Äù keynote, Apple live streamed Carplay displaying a six hour ride - where was its end destination?</p>\n\n<p><strong>Question 2:</strong><br />\nSteve Jobs, long known as being a master of details, hotly debated <em>what</em> aspect of an Apple Store‚Äôs bathroom signs?</p>\n\n<p><strong>Question 3:</strong><br />\nWhat was the very first thing <em>ever</em> rendered in a Safari browser, produced by Ken Kocienda during its development?</p>\n\n<p><strong>Question 4:</strong> <br />\nTo ensure that a visiting Ross Perot wouldn‚Äôt think Apple and its employees were too rich for investment - Steve Jobs had himself and Randy Adams hide what objects before he arrived?</p>\n\n<p><strong>Wildcard:</strong><br />\nWhat original Apple employee quickly sold off their 10% share of the company in 1977 for only $800 (which would be worth billions today)?</p>\n\n<h3 id=\"answer-key\">Answer Key</h3>\n<p><b>Round 1:</b></p>\n<ol>\n  <li><a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0216-dynamic-callable.md\">@dynamicCallable</a></li>\n  <li><a href=\"http://localhost:4000on-definitive-initialization/\">Definitive Initialization.</a></li>\n  <li>Swift 5.</li>\n  <li>The University of Chicago and Argonne National Laboratory.</li>\n  <li>Wildcard: <a href=\"https://en.wikipedia.org/wiki/List_of_Apple_codenames\">The Apple A6 and A6X chips.</a></li>\n</ol>\n\n<p><b>Round 2:</b></p>\n<ol>\n  <li>iOS 6.</li>\n  <li>Address Space Layout Randomization.</li>\n  <li>18 years old, Scott Goodson.</li>\n  <li>iPhone OS.</li>\n  <li>Wildcard: iOS 5.</li>\n</ol>\n\n<p><b>Round 3:</b></p>\n<ol>\n  <li>Cupertino.</li>\n  <li><a href=\"https://www.businessinsider.com/steve-jobs-attention-to-detail-2011-10#when-he-was-hospitalized-he-rejected-masks-because-they-were-ugly-8\">The shade of gray they should be colored as.</a></li>\n  <li><a href=\"https://asciiwwdc.com/2014/sessions/237\">A black obelisk!</a> Fun fact, it actually rendered in the wrong direction.</li>\n  <li><a href=\"https://www.forbes.com/sites/connieguglielmo/2012/10/03/untold-stories-about-steve-jobs-friends-and-colleagues-share-their-memories/#4932fdc6c584\">Their Porsche 911s</a></li>\n  <li>Wildcard: One of its oft forgotten co-founders, Ronald Wayne.</li>\n</ol>",
            "summary": "Dark mode, Marzipan and who knows what else await us which means we‚Äôre not far from Tim Cook and Friends revealing iOS 13 to the world. With a ton of services announcements already taken care of such as Apple TV+, Apple News+ and more - the tea leaves indicate that they‚Äôre going hard on pure API news this year.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-05-23T00:00:00-05:00",
            "date_modified": "2019-05-23T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["Trivia"]},{
            "id": "http://localhost:4000/NSSecureCoding",
            "url": "http://localhost:4000/NSSecureCoding/",
            "title": "NSSecureCoding",
            "content_html": "<p>Every year when Apple announces a new operating system, I find myself transfixed to the now famous word cloud slide (or tag or bubble cloud depending on who you ask). I‚Äôm talking about the ‚ÄúOh Yeahs‚Äù and the ‚ÄúWe also did this‚Äù API changes that weren‚Äôt deemed worthy enough of a call out during the keynote or state of the union address. Thus, such changes will find themselves relegated to its own cozy corner within the word cloud slide.</p>\n\n<p>However, I find that I have quite a predilection for such API changes. The ones that might not make the press or be the chatter among devs undoubtedly taking over each coffee shop in San Jose are the ones which are often extremely valuable to our work. They just aren‚Äôt as ‚Äúsexy‚Äù, as such, the spotlight eludes them.</p>\n\n<p>This week, let‚Äôs chat about one such enhancement that‚Äôs been around since iOS 6, <code class=\"highlighter-rouge\">NSSecureCoding</code>.</p>\n\n<h3 id=\"archiving-and-serialization\">Archiving and Serialization</h3>\n<p>Every iOS app will eventually be a consumer, or producer, of some sort of data. This data can represent itself in several different ways, each of which requires its own nuanced approach in terms of security and how its used:</p>\n\n<ul>\n  <li><strong>Raw Data:</strong> The actual stream of bites representing information.</li>\n  <li><strong>Primitive Data:</strong> A <a href=\"https://en.wikipedia.org/wiki/Unicode#UTF\" target=\"_blank\">UTF</a> representation of primitive data. On iOS, this typically ends up as JSON.</li>\n  <li><strong>Structured Data:</strong> This is how you‚Äôve chosen to model your data in a strongly typed way. Think of taking some primitive data, and injecting it into a model.</li>\n</ul>\n\n<p>At each point in the life cycle of some data, there are different ways in which developers must handle it. For example, if you are expecting a tiny text file to be returned from your server - you might be tipped off that something is dreadfully wrong if the file is ten gigs when its still in a primitive state:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">DataChecks</span> \n<span class=\"p\">{</span>\n    <span class=\"kd\">static</span> <span class=\"k\">let</span> <span class=\"nv\">maxTextSize</span> <span class=\"o\">=</span> <span class=\"mi\">1048576</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">textData</span> <span class=\"o\">=</span> <span class=\"nf\">someTextFile</span><span class=\"p\">()</span>\n\n<span class=\"k\">guard</span> <span class=\"n\">textData</span><span class=\"o\">.</span><span class=\"n\">length</span> <span class=\"o\">&lt;</span> <span class=\"kt\">DataChecks</span><span class=\"o\">.</span><span class=\"n\">maxTextSize</span> <span class=\"k\">else</span> \n<span class=\"p\">{</span>\n    <span class=\"c1\">// Funny business</span>\n    <span class=\"k\">return</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n\n<p>Conversely, one would also be aware of some tomfoolery afoot if deserializing that data to JSON brought about a much different result:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">data</span> <span class=\"o\">=</span> <span class=\"kt\">NSData</span><span class=\"p\">()</span>\n<span class=\"k\">let</span> <span class=\"nv\">parsedJSON</span><span class=\"p\">:</span><span class=\"kt\">Any</span>\n\n<span class=\"k\">do</span> <span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">option</span> <span class=\"o\">=</span> <span class=\"kt\">JSONSerialization</span><span class=\"o\">.</span><span class=\"kt\">ReadingOptions</span><span class=\"p\">(</span><span class=\"nv\">rawValue</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n\n    <span class=\"c1\">// If this works, we know the data will be strings/arrays/etc.</span>\n    <span class=\"c1\">// Things like XML, for example, would fail here.</span>\n    <span class=\"n\">parsedJSON</span> <span class=\"o\">=</span> <span class=\"k\">try</span> <span class=\"kt\">JSONSerialization</span><span class=\"o\">.</span><span class=\"nf\">jsonObject</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">data</span> <span class=\"k\">as</span> <span class=\"kt\">Data</span><span class=\"p\">,</span> <span class=\"nv\">options</span><span class=\"p\">:</span> <span class=\"n\">option</span><span class=\"p\">)</span>\n<span class=\"p\">}</span> <span class=\"k\">catch</span> <span class=\"p\">{</span> <span class=\"cm\">/* Dragons.here */</span> <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Whether its by using a some type of checksum on a raw data blob or ensuring primitive data becomes what you expect it to, as a programmer you‚Äôre actively taking steps to make sure that the data you‚Äôre playing with, plays nice.</p>\n\n<p>Then, down the road, the data eventually needs to make its way on disk. Consider this example of caching some posts in a hypothetical blogging app:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"kt\">Post</span><span class=\"p\">:</span> <span class=\"kt\">NSCoding</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">title</span><span class=\"p\">:</span><span class=\"kt\">String</span><span class=\"p\">?</span>\n\n    <span class=\"c1\">// For brevity these are unimplemented...</span>\n    <span class=\"kd\">func</span> <span class=\"nf\">encode</span><span class=\"p\">(</span><span class=\"n\">with</span> <span class=\"nv\">aCoder</span><span class=\"p\">:</span> <span class=\"kt\">NSCoder</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span> <span class=\"cm\">/* Imagine this is donesis */</span> <span class=\"p\">}</span>\n    \n    <span class=\"kd\">required</span> <span class=\"nf\">init</span><span class=\"p\">?(</span><span class=\"n\">coder</span> <span class=\"nv\">aDecoder</span><span class=\"p\">:</span> <span class=\"kt\">NSCoder</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span> <span class=\"cm\">/* And this too */</span> <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// Later on down the road, you might do something like this...</span>\n<span class=\"kd\">func</span> <span class=\"nf\">updatePostsCache</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">saveURL</span> <span class=\"o\">=</span> <span class=\"kt\">URL</span><span class=\"p\">(</span><span class=\"nv\">fileURLWithPath</span><span class=\"p\">:</span> <span class=\"s\">\"someDestination\"</span><span class=\"p\">)</span>\n    <span class=\"k\">let</span> <span class=\"nv\">archiver</span> <span class=\"o\">=</span> <span class=\"kt\">NSKeyedArchiver</span><span class=\"o\">.</span><span class=\"nf\">archivedData</span><span class=\"p\">(</span><span class=\"nv\">withRootObject</span><span class=\"p\">:</span> <span class=\"n\">posts</span><span class=\"p\">)</span>\n    <span class=\"k\">try</span><span class=\"p\">?</span> <span class=\"n\">archiver</span><span class=\"o\">.</span><span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"nv\">to</span><span class=\"p\">:</span> <span class=\"n\">saveURL</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// And eventually get it back out...</span>\n<span class=\"k\">let</span> <span class=\"nv\">postCache</span><span class=\"p\">:[</span><span class=\"kt\">Data</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"cm\">/* Data loaded up */</span>\n<span class=\"k\">let</span> <span class=\"nv\">posts</span> <span class=\"o\">=</span> <span class=\"k\">try</span> <span class=\"n\">postCache</span><span class=\"o\">.</span><span class=\"n\">map</span> <span class=\"p\">{</span> <span class=\"n\">postData</span> <span class=\"k\">in</span>\n    <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">postBlob</span> <span class=\"o\">=</span> <span class=\"k\">try</span> <span class=\"kt\">NSKeyedUnarchiver</span><span class=\"o\">.</span><span class=\"nf\">unarchiveTopLevelObject</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">postData</span><span class=\"p\">),</span> <span class=\"k\">let</span> <span class=\"nv\">post</span> <span class=\"o\">=</span> <span class=\"n\">postBlob</span> <span class=\"k\">as?</span> <span class=\"kt\">Post</span> <span class=\"k\">else</span> <span class=\"p\">{</span> <span class=\"k\">throw</span> <span class=\"cm\">/* Error handling */</span> <span class=\"p\">}</span>\n    <span class=\"k\">return</span> <span class=\"n\">post</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>And, just like the scenarios above, malicious actors could step in at this point as well. Foundation would rather not have that happen, but it also could use your help to ensure that it doesn‚Äôt.</p>\n\n<h3 id=\"understanding-the-unarchiving-pipeline\">Understanding the Unarchiving Pipeline</h3>\n<p>To get a feel for how things could go wrong here, it‚Äôs key to understand what exactly <code class=\"highlighter-rouge\">NSKeyedUnarchiver</code> is doing when it unarchives your structured data. When your data is stored, it‚Äôll look a little something like this in the archive:</p>\n\n<div class=\"language-json highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"s2\">\"$class\"</span><span class=\"p\">:</span><span class=\"s2\">\"Post\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"s2\">\"title\"</span><span class=\"p\">:</span><span class=\"s2\">\"...\"</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n\n<p>Later on, when one goes to pull it back out via unarchiving, <code class=\"highlighter-rouge\">NSKeyedUnarchiver</code> will dynamically look for a class with the same name of the key (passed in via its initializer) in your app‚Äôs bundle. Then, a few things happen:</p>\n\n<ul>\n  <li>An instance of that class gets allocated in memory</li>\n  <li>Then, it‚Äôs initialized to allow it to decode</li>\n  <li>Lastly, <code class=\"highlighter-rouge\">awakeAfter(using:)</code> gets invoked to allow for any final state considerations</li>\n</ul>\n\n<p>That all looks reasonable, but consider this - the unarchiver will do this on <em>whatever</em> key you pass. So if a #TerribleHumanBeing injected some nonsense in there, this is what happens:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">unarchiver</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">forKey</span><span class=\"p\">:</span> <span class=\"kt\">NSKeyedArchiverRootObjectKey</span><span class=\"p\">)</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">alloc</span><span class=\"p\">()</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">init</span><span class=\"p\">?(</span><span class=\"nv\">coder</span><span class=\"p\">:)</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">awakeAfer</span><span class=\"p\">(</span><span class=\"nv\">using</span><span class=\"p\">:)</span>\n</code></pre></div></div>\n\n<p>üò±.</p>\n\n<p>Under the hood, when we invoked <code class=\"highlighter-rouge\">unarchiveTopLevelObject(with:)</code> an instance of <code class=\"highlighter-rouge\">KSKeyedUnarchiver</code> popped up and tried to decode an object for the given key. Now, you can see why this line really matters:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">postBlob</span> <span class=\"o\">=</span> <span class=\"k\">try</span> <span class=\"kt\">NSKeyedUnarchiver</span><span class=\"o\">.</span><span class=\"nf\">unarchiveTopLevelObject</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">postData</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>‚Ä¶because even though we‚Äôll fail since the downcast will not pass, and even though we‚Äôll discard the object - the archiver still could‚Äôve just allocated some BS.</p>\n\n<p>And said BS could do a few different things to really flip your biscuits.</p>\n\n<p>Perhaps it might change some global state üíÄ!<br />\nOr initialize some sort of singleton üôÖüèª‚Äç‚ôÇÔ∏è!<br />\n‚Ä¶or perform any other attack vector that they can dream up ‚ö∞Ô∏è.<br /></p>\n\n<blockquote>\n  <p>You might think that‚Äôs dramatic, but archives can be maliciously constructed. Plus, if <a href=\"https://twitter.com/stroughtonsmith/status/1123741346425180161?s=20\" target=\"_blank\">Steve Troughton-Smith</a> can make Marzipan work when Marzipan isn‚Äôt released on apps that he doesn‚Äôt have the source code too - trust no one.</p>\n</blockquote>\n\n<p>So what‚Äôs a dev to do? Of course, the answer is to use <code class=\"highlighter-rouge\">NSSecureCoding</code> - and even better, it‚Äôs typically <em>a one line change</em>.</p>\n\n<h3 id=\"secure-serialization\">Secure Serialization</h3>\n<p>The <code class=\"highlighter-rouge\">NSSecureCoding</code> protocol directly inherits from <code class=\"highlighter-rouge\">NSCoding</code> - and as the name implies it performs the same functions as its parent but in a more secure fashion. Using it, we‚Äôll avoid any arbitrary code execution attacks as mentioned above.</p>\n\n<p>Normally, I‚Äôd dive into the intricacies of the API - but this one only adds a single static boolean property for you to override at the class level.</p>\n\n<p>Continuing with our <code class=\"highlighter-rouge\">Post</code> class:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"kt\">Post</span><span class=\"p\">:</span> <span class=\"kt\">NSSecureCoding</span>\n<span class=\"p\">{</span>\n    <span class=\"kd\">static</span> <span class=\"k\">var</span> <span class=\"nv\">supportsSecureCoding</span><span class=\"p\">:</span> <span class=\"kt\">Bool</span> <span class=\"p\">{</span>\n        <span class=\"k\">get</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"kc\">true</span> <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"c1\">// The rest of the class code omitted for brevity</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Now, the archivers will subtly change their process:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Before secure coding</span>\n<span class=\"n\">decoder</span><span class=\"o\">.</span><span class=\"nf\">decodeObjectForKey</span><span class=\"p\">(</span><span class=\"s\">\"Posts\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// After</span>\n<span class=\"n\">decoder</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">of</span><span class=\"p\">:</span><span class=\"kt\">Post</span><span class=\"o\">.</span><span class=\"k\">self</span><span class=\"p\">,</span> <span class=\"nv\">forKey</span><span class=\"p\">:</span> <span class=\"s\">\"Posts\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>This makes all the difference, because now archivers can directly preflight its contents to ensure it has the types you expect when secure coding is used.</p>\n\n<p>Internally, this is achieved by some bookkeeping done for us by archivers creating an <em>allowed class list</em>. This list contains all of the classes that can be securely decoded and encoded. Think of it as some malformed naughty or nice list, but only real and not used by a portly man donning a red suit.</p>\n\n<p>Considering it, here‚Äôs what the process above looks like now:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">unarchiver</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">of</span><span class=\"p\">:</span><span class=\"kt\">Post</span><span class=\"o\">.</span><span class=\"k\">self</span><span class=\"p\">,</span> <span class=\"nv\">forKey</span><span class=\"p\">:</span> <span class=\"kt\">NSKeyedArchiverRootObjectKey</span><span class=\"p\">)</span>\n<span class=\"c1\">// Class check would fail if it's not a post, and then return with a failure</span>\n<span class=\"c1\">// Thus, this code below would no longer happen...</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">alloc</span><span class=\"p\">()</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">init</span><span class=\"p\">?(</span><span class=\"nv\">coder</span><span class=\"p\">:)</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">awakeAfer</span><span class=\"p\">(</span><span class=\"nv\">using</span><span class=\"p\">:)</span>\n</code></pre></div></div>\n\n<blockquote>\n  <p>You can see this list yourself, as coders have a set property containing its contents: <code class=\"highlighter-rouge\">aCoder.allowedClasses</code></p>\n</blockquote>\n\n<p>Crisis averted, but <code class=\"highlighter-rouge\">NSSecureCoding</code> also comes with another bonus: static type checking. If you‚Äôve got any manual decode calls with conditional downcasts, those can now go away</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Before</span>\n<span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">myPost</span> <span class=\"o\">=</span> <span class=\"n\">coder</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">forKey</span><span class=\"p\">:</span><span class=\"s\">\"Post\"</span><span class=\"p\">)</span> <span class=\"k\">as?</span> <span class=\"kt\">Post</span>\n\n<span class=\"c1\">// After</span>\n<span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">myPost</span> <span class=\"o\">=</span> <span class=\"n\">coder</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">of</span><span class=\"p\">:</span><span class=\"kt\">Post</span><span class=\"o\">.</span><span class=\"k\">self</span> <span class=\"nv\">forKey</span><span class=\"p\">:</span><span class=\"s\">\"Post\"</span><span class=\"p\">)</span> \n</code></pre></div></div>\n\n<p>However, there are a few other intricacies around subclasses to consider. If one‚Äôs class <em>doesn‚Äôt</em> override <code class=\"highlighter-rouge\">init(coder:)</code>, it can still conform to <code class=\"highlighter-rouge\">NSSecureCoding</code> without any changes if it‚Äôs a subclass of another class that does conform. Though, if it does override <code class=\"highlighter-rouge\">init(coder:)</code> it also must decode any nested objects using <code class=\"highlighter-rouge\">decodeObjectOfClass:forKey</code>:.</p>\n\n<h3 id=\"on-failing\">On Failing</h3>\n<p>When decoding fails as above, whether by a programmer‚Äôs error or malicious intent, it‚Äôs known as a secure decoding violation. Additionally, other failure states exist, such as a type mismatch (expecting an object and receiving a primitive) or perhaps the archive faces corruption.</p>\n\n<p>What happens in this scenario is entirely up to you, and you can control it via <code class=\"highlighter-rouge\">NSDecodingPolicyFailure</code></p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">enum</span> <span class=\"kt\">NSCoder</span><span class=\"o\">.</span><span class=\"kt\">NSDecodingFailurePolicy</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">case</span> <span class=\"n\">raiseException</span>\n    <span class=\"k\">case</span> <span class=\"n\">setErrorAndReturn</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>The default choice is to raise an exception, but you can opt for a simple error assignment to the coder and continue execution. So, if it indeed a class injection were occurring, it‚Äôd fail and the coder would invoke <code class=\"highlighter-rouge\">failWithError(_ error: Error)</code>.</p>\n\n<p>Recall that Swift can‚Äôt catch Objective-C or++ exceptions, so be thoughtful here. If you‚Äôd opt for <code class=\"highlighter-rouge\">setErrorAndReturn</code> the coder will have its error property set, and it would return nil. You can also tailor this error to be specific for your own use case:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Assume class injection, a failure from corruption, etc</span>\n<span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">post</span> <span class=\"o\">=</span> <span class=\"n\">unarchiver</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">of</span><span class=\"p\">:</span><span class=\"kt\">Post</span><span class=\"o\">.</span><span class=\"k\">self</span><span class=\"p\">,</span> <span class=\"nv\">forKey</span><span class=\"p\">:</span> <span class=\"s\">\"Post\"</span><span class=\"p\">)</span> <span class=\"k\">else</span> \n<span class=\"p\">{</span>\n    <span class=\"n\">unarchiver</span><span class=\"o\">.</span><span class=\"nf\">failWithError</span><span class=\"p\">(</span><span class=\"kt\">CocoaError</span><span class=\"o\">.</span><span class=\"nf\">error</span><span class=\"p\">(</span><span class=\"o\">.</span><span class=\"n\">coderValueNotFound</span><span class=\"p\">))</span>\n    <span class=\"k\">return</span> <span class=\"kc\">nil</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// obj will be nil, or 0 if its a primitive type</span>\n<span class=\"c1\">// Now handle the populated error however you see fit</span>\n</code></pre></div></div>\n\n<h3 id=\"bonus-points-why-now\">Bonus Points: Why Now?</h3>\n<p>Aside from my love of writing about the outliers of iOS, why write a post about an API that‚Äôs quite old in iOS years? The answer is that I suspect more developers will be wanting for more information over it shortly. Starting with iOS 12, the legacy way of using both keyed archiver/unarchiver are now deprecated:</p>\n\n<p><img src=\"../assets/images/badCoder.jpg\" alt=\"Deprecation\" /></p>\n\n<p>The deprecations means both classes gained new variants of <a href=\"https://developer.apple.com/documentation/foundation/nskeyedunarchiver/2983380-unarchivedobject\" target=\"_blank\">those methods</a> which allow for <a href=\"https://developer.apple.com/documentation/foundation/nskeyedarchiver/2962880-archiveddata\" target=\"_blank\">gated class checks</a> as well.</p>\n\n<p>Further, support for adhering on a per-class basis with the class boolean, <code class=\"highlighter-rouge\">supportSecureCoding</code>, was only added in iOS 10. So, with iOS 13 on the horizon - this means that the lot of us will turn to iOS 12 as our minimum build target, thus the non-secure archiving deprecation will be showing in serialization scenarios within Xcode all over the world quite soon.</p>\n\n<h3 id=\"wrapping-up\">Wrapping Up</h3>\n<p>Refactoring all of ones archiving and serialization pipeline to make sure its vending the intended class might not be the most thrilling task on the backlog. But it‚Äôs a quick win, and it yields a more secure app.</p>\n\n<p>And if we‚Äôre being honest, the chances of a malicious attack targeting your app through this particular vector might be slim. But it never happens <em>until it does</em>. Plus, when the tide goes out - you can tell who was skinny dipping. Don‚Äôt be the dev who got toasted because they forgot to use a more secure archiving technique.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Every year when Apple announces a new operating system, I find myself transfixed to the now famous word cloud slide (or tag or bubble cloud depending on who you ask). I‚Äôm talking about the ‚ÄúOh Yeahs‚Äù and the ‚ÄúWe also did this‚Äù API changes that weren‚Äôt deemed worthy enough of a call out during the keynote or state of the union address. Thus, such changes will find themselves relegated to its own cozy corner within the word cloud slide.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-05-03T00:00:00-05:00",
            "date_modified": "2019-05-03T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["Foundation"]}]
}