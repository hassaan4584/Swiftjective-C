{
    "version": "https://jsonfeed.org/version/1",
    "title": "Swiftjective-C",
    "description": "Swiftjective-C is a periodical over modern iOS software engineering. It houses tactful discussions over Swift, Objective-C and developing high quality apps while peering into various frameworks to see what makes them tick.\n",
    "home_page_url": "http://localhost:4000/",
    "feed_url": "http://localhost:4000/feed.json",
    "author": {
        "name": "Jordan Morgan", "avatar": "/assets/images/about/headshot.jpeg"},
    "items": [
      {
            "id": "http://localhost:4000/WWDC-2020-The-Pregame-Quiz",
            "url": "http://localhost:4000/WWDC-2020-The-Pregame-Quiz/",
            "title": "WWDC 2020: The Pregame Quiz",
            "content_html": "<p>The very first virtual dub dub is coming in hot one week from today! Will we get a juiced up version of Catalyst, a shot of stability to SwiftUI or will UIKit dark horse the whole show and get a mountain of new goodies?</p>\n\n<p>We‚Äôll know soon in seven days, but until then let‚Äôs gear up with the sixth annual Swiftjective-C WWDC Pregame Quiz!</p>\n\n<p>If you‚Äôd like a quick primer on how this all works or how it got started, check out the first five quizzes from <a href=\"http://localhost:4000/WWDC-2015-The-Pregame-Quiz\">2015</a> ,<a href=\"http://localhost:4000/WWDC-2016-The-Pregame-Quiz\">2016</a>, <a href=\"http://localhost:4000/WWDC-2017-The-Pregame-Quiz\">2017</a> ,<a href=\"http://localhost:4000/WWDC-2018-The-Pregame-Quiz\">2018</a> and <a href=\"http://localhost:4000/WWDC-2019-The-Pregame-Quiz\">2019</a>.</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">Now</span> <span class=\"p\">{</span>\n   <span class=\"kt\">Lets</span><span class=\"p\">()</span>\n      <span class=\"o\">.</span><span class=\"nf\">start</span><span class=\"p\">()</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<h3 id=\"ground-rules\">Ground Rules</h3>\n\n<p>There are three rounds, and the point break down is as follows:</p>\n\n<ul>\n  <li><strong>Round 1</strong> ‚Äì 1 point each answer</li>\n  <li><strong>Round 2</strong> - 2 points each answer</li>\n  <li><strong>Round 3</strong> - 3 points each answer</li>\n</ul>\n\n<p>The last question of each round is an optional wildcard question. Get it right, and your team gets <strong>4</strong> <strong>points</strong>, <em>but</em> miss it and the team will be <strong>deducted 2 points</strong>.</p>\n\n<h3 id=\"round-1xcode-xtras\">Round 1‚Ää‚Äî‚ÄäXcode Xtras</h3>\n\n<p><strong>Question 1:</strong><br />\nOur defacto I.D.E. for Apple development shipped its 1.0 release in fall 2003. What previous I.D.E. was it initially based on, developed by NeXT?</p>\n\n<p><strong>Question 2:</strong><br />\nWe all savor the utility of Xcode‚Äôs debugging back end, LLDB - but we didn‚Äôt always have it. Starting with Xcode 5.0, LLDB took over as the primary debugging back end over which previous technology?</p>\n\n<p><strong>Question 3:</strong><br />\nBelieve it or not, Xcode used to be a paid download. It wasn‚Äôt until after 4.1 it was made free - what was its last sticker price before doing so?</p>\n\n<p><strong>Question 4:</strong> <br />\nLet‚Äôs go more recent. Which major version of Xcode was the first to be released with support for Swift - 4, 5, 6 or 7?</p>\n\n<p><strong>Wildcard:</strong><br />\nSwift Playgrounds was initially launched integrated into Xcode, but later took on its own life on iPadOS. Aimed at teaching newcomers code through fun, colorful tutorials based around controlling playful monsters on an island - what were the names of the three monsters included in the initial lessons?</p>\n\n<h3 id=\"round-2swiftui-stumpers\">Round 2‚Ää‚Äî‚ÄäSwiftUI Stumpers</h3>\n\n<p><strong>Question 1:</strong><br />\nOne of SwiftUI‚Äôs main draws is the live previewing canvas, ever updating as we type. As we make edits, Xcode compiles the SwiftUI <code class=\"highlighter-rouge\">View</code> exclusively from the rest of the project.</p>\n\n<p>When it does, it injects the new implementation back into the running application using what Swift language feature?</p>\n\n<p><strong>Question 2:</strong><br />\nAt first glance, one might assume SwiftUI‚Äôs <code class=\"highlighter-rouge\">View</code> type accepts variadic generics within its <code class=\"highlighter-rouge\">VeiwBuilder</code> implementation:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"kd\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"kt\">HStack</span> <span class=\"p\">{</span>\n        <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Sup\"</span><span class=\"p\">)</span>\n        <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hi\"</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"kd\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"kt\">VStack</span> <span class=\"p\">{</span>\n        <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Sup\"</span><span class=\"p\">)</span>\n        <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hi\"</span><span class=\"p\">)</span>\n        <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Yo\"</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>But it‚Äôs actually powered via extensions, with how many different <code class=\"highlighter-rouge\">buildBlock</code> implementations allowing up to X views to be included?</p>\n\n<p><strong>Question 3:</strong><br />\nSwiftUI was said to be called Amber internally at Apple, but to obfuscate it within the O.S. they put it under a framework named what?</p>\n\n<p><strong>Question 4:</strong> <br />\nSwiftUI simply wouldn‚Äôt be possible without Swift 5.1‚Äôs feature set. What four core pieces of API added in that release make SwiftUI syntax like this possible?</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">var</span> <span class=\"nv\">body</span><span class=\"p\">:</span> <span class=\"kd\">some</span> <span class=\"kt\">View</span> <span class=\"p\">{</span>\n    <span class=\"kt\">Text</span><span class=\"p\">(</span><span class=\"s\">\"Hello World\"</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p><strong>Wildcard:</strong><br />\nSwiftUI uses bindings and state property wrappers liberally to control tree diffs and UI updates. A common data type to represent progress is either a Double or Float.</p>\n\n<p>If you were to write:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">@State</span> <span class=\"kd\">private</span> <span class=\"k\">var</span> <span class=\"nv\">progress</span> <span class=\"o\">=</span> <span class=\"mf\">1.2</span>\n</code></pre></div></div>\n\n<p>What the Swift compiler default this type to - a Double or a Float?</p>\n\n<h3 id=\"round-3dub-dub-venues-and-history\">Round 3‚Ää‚Äî‚ÄäDub Dub Venues and History</h3>\n\n<p><strong>Question 1:</strong><br />\nThe first WWDC took place in Santa Clara in what year?</p>\n\n<p><strong>Question 2:</strong><br />\nDub Dub has been officially held in three different locations, all starting with ‚ÄúSan‚Äù - can you name them all?</p>\n\n<p><strong>Question 3:</strong><br />\nWhich of these bands <em>hasn‚Äôt</em> performed at a WWDC bash?</p>\n\n<p><strong>A:</strong> The Barenaked Ladies<br />\n<strong>B:</strong> Good Charlotte<br />\n<strong>C:</strong> Fall Out Boy<br />\n<strong>D:</strong> Paramore<br /></p>\n\n<p><strong>Question 4:</strong> <br />\nAt WWDC 2008, what product was announced that has since been labeled by Yahoo! News as ‚Äúone of the biggest PR disasters in Apple history‚Äù and was officially discontinued in 2012?</p>\n\n<p><strong>Wildcard:</strong><br />\nPaper badges were the norm for WWDC badges for much of its history. Can you name the year they finally made the switch to plastic badges for the first time?</p>\n\n<h3 id=\"answer-key\">Answer Key</h3>\n<p><b>Round 1:</b></p>\n<ol>\n  <li><a href=\"https://en.wikipedia.org/wiki/Project_Builder\">Project Builder, or PBX</a></li>\n  <li><a href=\"https://en.wikipedia.org/wiki/GNU_Debugger\">The GNU Debugger, or GDB</a></li>\n  <li><a href=\"http://appleinsider.com/articles/11/07/20/apple_makes_xcode_free_to_all_with_release_of_4_1_on_mac_app_store.html\">$4.99. Not bad for an entire development suite.</a></li>\n  <li>6.0</li>\n  <li>Wildcard: Byte, Blue and Hopper!</li>\n</ol>\n\n<p><b>Round 2:</b></p>\n<ol>\n  <li><a href=\"https://forums.swift.org/t/how-does-the-hot-reloading-work-in-xcode11/25312/5\">Dynamic Method Replacement</a></li>\n  <li><a href=\"https://twitter.com/rockbruno_/status/1194225536949792769?s=20\">10</a></li>\n  <li><a href=\"https://twitter.com/_inside/status/1141758374285103111?s=20\">TimerSupport</a></li>\n  <li>Function Builders, Opaque Return Types, Implicit Return Statements and Property Wrappers. I wrote about this <a href=\"https://www.swiftjectivec.com/swiftui-what-just-happened/\">here</a>.</li>\n  <li>Wildcard: A Double.</li>\n</ol>\n\n<p><b>Round 3:</b></p>\n<ol>\n  <li>1987, making dub dub a good 33 years old.</li>\n  <li>Santa Clara, San Francisco and San Jose.</li>\n  <li>D, Paramore.</li>\n  <li>MobileMe</li>\n  <li>Wildcard: 2009</li>\n</ol>",
            "summary": "The very first virtual dub dub is coming in hot one week from today! Will we get a juiced up version of Catalyst, a shot of stability to SwiftUI or will UIKit dark horse the whole show and get a mountain of new goodies?",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-06-11T00:00:00-05:00",
            "date_modified": "2020-06-11T00:00:00-05:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["Trivia"]},{
            "id": "http://localhost:4000/The-Big-Update",
            "url": "http://localhost:4000/The-Big-Update/",
            "title": "The Big Update",
            "content_html": "<p>Part of living life as the proud owner of a P.U.F. (paid up front) app is the reality of the bell curve. You‚Äôve seen this if you‚Äôve looked at anyone‚Äôs numbers who makes these kinds of apps. It‚Äôs a product cycle of ups and downs.</p>\n\n<p>Regardless of your pricing scheme, you likely live life on a bell curve too. But with P.U.F. apps, that cycle is somewhat exacerbated. As such, you live <strong>with</strong> the dog days of trickle-in downloads and live <strong>for</strong> the big breaks that come when sales sky rocket.</p>\n\n<p>A lot was riding on Spend Stack‚Äôs 1.2 update. Thankfully, it went well and topped the charts in several countries in the Finance category. Let‚Äôs dig in!</p>\n\n<h3 id=\"the-result\">The Result</h3>\n<p>If you follow me on Twitter, you already have an idea of how things went sales wise:</p>\n\n<div class=\"jekyll-twitter-plugin\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">Here&#39;s coming in close to year 1. I wanted to write about this *a lot* more in-depth but I&#39;m in the middle of building a house and my writing time is very minimal.<br /><br />Takeways:<br /><br />1) I believe you *can* make a living on the App Store.<br />2) I&#39;ve learned a ton about product+marketing <a href=\"https://t.co/oVrgt4vcR3\">https://t.co/oVrgt4vcR3</a> <a href=\"https://t.co/MEtFblkhla\">pic.twitter.com/MEtFblkhla</a></p>&mdash; Jordan Morgan (@JordanMorgan10) <a href=\"https://twitter.com/JordanMorgan10/status/1269629494052237316?ref_src=twsrc%5Etfw\">June 7, 2020</a></blockquote>\n<script async=\"\" src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</div>\n\n<p>I have acquired a large chunk of my revenue from this update alone. It‚Äôs like a launch in several ways, in that you get the initial spike and then ride the wave down. The thing I was most interested in, though, was what kind of numbers I‚Äôd need for this to happen:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/chartIpad.png\" role=\"presentation\" srcset=\"../assets/images/chartIpad.png\" /></p>\n\n<blockquote>\n  <p>Also recall that charting on the iPad and iPhone are different. It also charted #1 on the iPhone in several countries (U.S. included) but the landscape screenshot of the iPad looked nicer ‚ú®.</p>\n</blockquote>\n\n<p>I‚Äôve long wondered what kind of numbers I‚Äôd need to chart #1 in Finance, and I seemingly got my answer around mid-afternoon on May 25th. It was just a bit short of a 1,000 downloads. Though, the next day I saw almost half of those numbers at 500 and change and still remained atop the list. By the third day I bumped down, oscillating between #3-#7 at 300ish downloads.</p>\n\n<p>So, what did it? Was it solely the update?</p>\n\n<p>No - it was absolutely all because of the press. I finally have corrected the biggest mistake I pointed out regarding my <a href=\"http://localhost:4000/On-Launching-Your-Indie-App\">launch</a>.</p>\n\n<h3 id=\"timeline\">Timeline</h3>\n<p>I kind of happened upon this big update. I started by rewriting some of the core parts of the app in Swift. Beforehand, Spend Stack was previously all Objective-C, a symptom of starting it so many years ago when Swift was still the wild west and changed how it split strings every other Tuesday.</p>\n\n<p>Then, Apple announced the support for exporting Apple Card statements. So I hopped on that. Meanwhile, I was already adding multiple currencies. So I‚Äôm doing this - and then I check my inbox and see another pile of emails asking for recurring pricing. ‚ÄúScrew it‚Äù, I say, ‚ÄúYou‚Äôre already in neck deep - what‚Äôs another feature at this point?‚Äù</p>\n\n<p>This is what the thinkpieces on Medium tell you <em>not</em> to do.</p>\n\n<p>Luckily, I never read those. And mostly because I can‚Äôt due to the 48 modals they show as soon as you load an article. But I‚Äôm glad I took my time, because moving to Swift has paid off in many ways. I‚Äôve tweeted here and there about some of the things it opened up:</p>\n\n<p><strong>SwiftUI for modal popups</strong><br /></p>\n\n<div class=\"jekyll-twitter-plugin\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">Got most of Spend Stack&#39;s cursor support done last night ‚ú® The context menu&#39;s originating from the cursor coordinates is so so üòçüòçüòç Apple did such a great job with the execution. <a href=\"https://t.co/RSooDdyRnH\">pic.twitter.com/RSooDdyRnH</a></p>&mdash; Jordan Morgan (@JordanMorgan10) <a href=\"https://twitter.com/JordanMorgan10/status/1252292541720014848?ref_src=twsrc%5Etfw\">April 20, 2020</a></blockquote>\n<script async=\"\" src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</div>\n\n<p><strong>Combine for, like, everything</strong><br /></p>\n\n<div class=\"jekyll-twitter-plugin\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">In other news....<br /><br />Combine + Diffable Data Source = üòç <br /><br />Multiple window support is waaaaay easier now! <a href=\"https://t.co/M3klj0IqPN\">pic.twitter.com/M3klj0IqPN</a></p>&mdash; Jordan Morgan (@JordanMorgan10) <a href=\"https://twitter.com/JordanMorgan10/status/1220514774880071680?ref_src=twsrc%5Etfw\">January 24, 2020</a></blockquote>\n<script async=\"\" src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</div>\n\n<p>But putting the tech discussion aside, I eventually came up with a plan for all of the work I was doing. I figured since I was already investing a lot of time into this update, I should shoot for my ideal press timeline. The magic number for me and large updates?</p>\n\n<p><strong>Six weeks</strong>, just like Apple asks for.</p>\n\n<p>Once the beta was feature completed, I decided that I would at the same time:</p>\n\n<ul>\n  <li>Open a public beta and,</li>\n  <li>Reach out to the press and Apple on that same day.</li>\n</ul>\n\n<p>I used Things 3 to keep it all on track:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/thingsUpdate.png\" role=\"presentation\" srcset=\"../assets/images/thingsUpdate.png\" /></p>\n\n<p>Essentially the flow was something like this:</p>\n\n<ul>\n  <li>Get development done.</li>\n  <li>Get blog posts and marketing assets finished.</li>\n  <li>Announce a beta.</li>\n  <li>Reach out to the press (as mentioned above).</li>\n  <li>Experiment with some form of paid advertising.</li>\n</ul>\n\n<p>In the end it worked out as good as it could‚Äôve. <a href=\"https://www.macstories.net/reviews/spend-stack-adds-apple-card-import-recurring-costs-per-list-currencies-ipad-improvements-and-more/\">MacStories</a>, <a href=\"https://podcasts.apple.com/us/podcast/macstories-perspective-icons-big-spend-stack-update/id1510451759?i=1000476190744\">Unwind</a>, <a href=\"https://9to5mac.com/2020/05/25/spend-stack-apple-card-more/\">9to5 Mac</a>, <a href=\"https://forums.macrumors.com/threads/app-recap-magnet-parcel-unfold-and-major-app-updates.2239187/\">MacRumors</a> and a few others  covered it. Then, Thursday came around Apple featured it (where it still is today):</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/featureIphone.png\" role=\"presentation\" srcset=\"../assets/images/featureIphone.png\" /></p>\n\n<p>That last point about experimenting with paid advertising is another blog post, and an important one as I think a lot indies simply overlook it. But I‚Äôll sum up what I‚Äôve experienced so far:</p>\n\n<ul>\n  <li>Twitter: Boosting posts is worthless.</li>\n  <li>Twitter: Setting up a real campaign had a good R.O.I.</li>\n  <li>Reddit: Extremely hit and miss.</li>\n</ul>\n\n<p>But this all firms up what I‚Äôve always known: If you want the numbers, you need the press. The man at the top of the mountain didn‚Äôt fall there, he had press that rocket launched him to the top.</p>\n\n<blockquote>\n  <p>The other sales bump I had this year was when Andy made Spend Stack his Pick of the Week on <a href=\"https://twit.tv/shows/macbreak-weekly/episodes/702?autostart=false\">Macbreak</a>.</p>\n</blockquote>\n\n<p>You might think this bit of the post is entirely frustrating. I get it, of course press helps. You don‚Äôt need an MBA to figure that out.</p>\n\n<p>But know this - I‚Äôve launched things with zero press, zero returned emails, zero retweets or likes and zero downloads. It takes time and relationship building. In a way, I feel like I‚Äôm in a good spot to talk about it because I‚Äôve lived on both sides of the fence. It‚Äôs quite a topic, and I may or may not be writing a book on the side dealing with things like this ü§´.</p>\n\n<h3 id=\"beta\">Beta</h3>\n<p>Running a beta was such a great experience, it only made me feel remorse that I hadn‚Äôt done it in the first place. If anything, this release gave me a case of the what-ifs:</p>\n\n<ul>\n  <li>What <em>if</em> I had reached the press correctly on my initial launch?</li>\n  <li>What <em>if</em> I had done a public beta first before launching?</li>\n  <li>What <em>if</em> I experimented with advertising long ago?</li>\n</ul>\n\n<p>Ah, but hindsight bats 1.000. After all, experience is what you need long after you finally have it. But I‚Äôve got lessons to take forward from here.</p>\n\n<p>All told, the beta capped at 615 users. My goal was 500, and for a three week period, that was something I was happy with. I learned a lot about how people think about the app and how they use it. The conversations I had with users is directing where I‚Äôm taking things next.</p>\n\n<p>I think for whenever I make another app, the process will look like this:</p>\n\n<ul>\n  <li>Work on the app, define a lean MVP.</li>\n  <li>Update everyone in a thread (S.T.S. did this masterfully with <a href=\"https://twitter.com/stroughtonsmith/status/1270405385816625152?s=20\">Pastel</a>).</li>\n  <li>Beta it when it‚Äôs beta-able.</li>\n  <li>Follow my 6 week timeline again.</li>\n</ul>\n\n<h3 id=\"backwards-momentum\">Backwards Momentum</h3>\n<p>Perhaps you‚Äôre already aware of Spend Stack‚Äôs history. Or, maybe you just stumbled in here. As I hinted at above, events leading up to chart toppin‚Äô was a very long, winding, complicated and grating road.</p>\n\n<p>It took five years to get here!</p>\n\n<p>I‚Äôve worked on Spend Stack for a long time. In fact, I had previously released a version of it in 2012 which flopped gloriously:</p>\n\n<div class=\"jekyll-twitter-plugin\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">Here&#39;s an important thing to remember if you&#39;re just following along: This thing was the 1st version of Spend Stack, &amp; it was downloaded *18* times. It was a complete failure.<br /><br />I&#39;m proud that I&#39;ve hit #1 paid for Finance, but it didn&#39;t start that way at all. Just kept iterating! <a href=\"https://t.co/w0UYD88Ppg\">pic.twitter.com/w0UYD88Ppg</a></p>&mdash; Jordan Morgan (@JordanMorgan10) <a href=\"https://twitter.com/JordanMorgan10/status/1265663472425205762?ref_src=twsrc%5Etfw\">May 27, 2020</a></blockquote>\n<script async=\"\" src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</div>\n\n<p>Look, I‚Äôm not out in the streets in a Lamborghini wearing rock star shades bumping my beats while the money pours in wearing a shirt that says ‚ÄúI MAD$ IT‚Äù. But, I‚Äôm also <em>not</em> putting out something that gets no traction and that‚Äôs not by accident.</p>\n\n<p>What we do often overlook is that any form of success takes time. People want to be some incarnation of an indie, but rarely face the reality of having to work on your product for five years before you hit momentum.</p>\n\n<p>This goes against almost all of the product advice you hear on the Internet. If your thing doesn‚Äôt work, you need to give up on the thing, right?</p>\n\n<p>But why?</p>\n\n<p>Well, I think it‚Äôs because almost all of those texts deal with software as a service, and most of the time our projects in the indie space don‚Äôt fit into that mold. We don‚Äôt have V.C.‚Äôs to report to, a board wanting results or really any stakeholders needing returns. We get to do our own thing, and that‚Äôs what‚Äôs so thrilling about the App Store to me.</p>\n\n<p>We‚Äôre quick to say the gold rush is over, and that may be true - but the fun of it all sure isn‚Äôt.</p>\n\n<p>So, we can‚Äôt look for advice in the same exact ways, but we can take some of the good bits of their thoughts and apply it. The App Store economics are not the same as other storefronts. It‚Äôs really a matter of building something quality and tweaking it as you go. After all, Spend Stack started out as a grocery list app. It <em>can</em> be used for that still, but that‚Äôs no longer its identity. Also, it has a lot less pink üôà.</p>\n\n<h3 id=\"invaluable-insight\">Invaluable Insight</h3>\n<p>The amount I‚Äôve learned about what people think Spend Stack is, what they use it for and what they <em>want</em> to use it for has been the best part of this. If I want to take it to the next level, I‚Äôve got a lot of validated data points that light the path I would need to take.</p>\n\n<p>We make these apps to solve our own problems, and when we sell them it‚Äôs easy to forget that you are now being paid to solve everyone else‚Äôs, too. That‚Äôs not to say you should follow each thread you get and run with it - but you should definitely listen.</p>\n\n<p>Learning about how to do the product thing is new to me, but I‚Äôm starting to get the ropes. Spend Stack is a budgeting and expense tracking app, and I‚Äôll be leaning into that more and more.</p>\n\n<p>The biggest thing for me right now is to make it clear about the value proposition Spend Stack brings, show people how to use it and make sure I cut down on misplaced expectations.</p>\n\n<h3 id=\"some-random-takeaways\">Some Random Takeaways</h3>\n<p>To round things out, here‚Äôs some other random thoughts:</p>\n\n<ul>\n  <li>Praise be, Apple finally used my promo art! #TookAlmostAYear</li>\n  <li>Visibility/ASO wins, crappy apps can and will blow you out of the water sales wise if they‚Äôve been out for years and rank high.</li>\n  <li>It takes time - this is truly a marathon.</li>\n  <li>If you‚Äôre not building relationships with the press, you should have started yesterday.</li>\n  <li>And if you do reach out, give them plenty of time. They need to use your app, form thoughts and then write over it. It takes a lot, and they were already doing a lot when you emailed them.</li>\n  <li>Am I happy going P.U.F.? I think so, but there‚Äôs no question Spend Stack would be a few orders of magnitude larger if I hadn‚Äôt. But so would the time commitment, and I quite like my day job that sends me to WWDC and around the world for free, has flexible hours, fun problems and good pay. So, if I can do both - then why not?</li>\n</ul>\n\n<p>Lastly, as mentioned in the lead, livin‚Äô that P.U.F. life takes you a bell curve product cycle. I also noted a few of the ‚Äúups‚Äù that I‚Äôve had so far in the first ten months:</p>\n\n<div class=\"jekyll-twitter-plugin\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">In my first 10 months &gt;<br /><br />1) Initial launch <br />2) Retail demo<br />3) App Store preview video; search ads went from 1-10 week to 75<br />4) 1.2 Update (~30% of my total numbers) <a href=\"https://t.co/7XczP8TU8l\">https://t.co/7XczP8TU8l</a></p>&mdash; Jordan Morgan (@JordanMorgan10) <a href=\"https://twitter.com/JordanMorgan10/status/1269647593614827525?ref_src=twsrc%5Etfw\">June 7, 2020</a></blockquote>\n<script async=\"\" src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</div>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>I‚Äôve been lucky to have some exciting releases and features with Spend Stack so far in its first 10 months on the  market. There‚Äôs been so much learning taking place. The App Store is a fickle beast, ever changing its inner workings on how features work, the search algorithm ranks or apps are shown on a whim. Selling on such a store front is a bit like building a house whose core ideas remain the same, but the foundation keeps changing out from under you half way through construction.</p>\n\n<p>No matter - I hope more than anything this just demonstrates that getting downloads on the App Store is factor of a few core things that you absolutely can work towards as mentioned above. You truly get to make your own luck. One day you make enough to cover a latte, the next week you make enough to buy everyone a steak dinner. Woot woot!</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Part of living life as the proud owner of a P.U.F. (paid up front) app is the reality of the bell curve. You‚Äôve seen this if you‚Äôve looked at anyone‚Äôs numbers who makes these kinds of apps. It‚Äôs a product cycle of ups and downs.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-06-10T00:00:00-05:00",
            "date_modified": "2020-06-10T00:00:00-05:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/How-a-Feature-Ships",
            "url": "http://localhost:4000/How-a-Feature-Ships/",
            "title": "How a Feature Ships",
            "content_html": "<p>Ah yes, the feature.</p>\n\n<p>A core tenet of both software development and startup life, their existence commands as much mental processing as it does actual coding and manpower. While we each claim to follow our own heuristics that lead us to the ever moving target of being ‚Äúfeature complete‚Äù, I‚Äôve come to appreciate the process and I thought I‚Äôd document what it looks like for me from a recent example.</p>\n\n<p>The feature in question for Spend Stack? The tent pole ‚Äúnice to have‚Äù, and incredibly fun, feature in any iOS app: <strong>custom icons</strong>.</p>\n\n<p>What follows is a mental scribble of how the process takes place for me.</p>\n\n<h3 id=\"the-validation\">The Validation</h3>\n<p>The first lesson I‚Äôve learned in terms of product development is this: Ask some validation questions early and often.</p>\n\n<p>Do you really need to do this? Does it help you achieve a better product, higher quality app or a more entertaining game?</p>\n\n<p>And custom icons is a great example. Why? Because a gillion great, high quality apps exist that don‚Äôt leverage the feature at all. But, what custom icons does bring to the table, it brings very well. It‚Äôs something that many apps overlook or are simply ignorant to - and that is the simple act of bringing about joy in our software.</p>\n\n<p>That‚Äôs right, it‚Äôs about to get all Marie Kondo up in here.</p>\n\n<p>But unlike the undisputed organizational people‚Äôs champ, here we bring joy by simply being <em>fun</em>. And no matter what your app‚Äôs voice is (another blog post in of itself), it can pay to tactfully elicit joy. And that mental thread is what gave me the ‚Äúgo ahead‚Äù to spend time creating such a feature.</p>\n\n<p>So, we validated the thing we want to add. What‚Äôs next?</p>\n\n<h3 id=\"thedesign\">The‚Ä¶Design?</h3>\n<p>Arguably the most challenging part of the entire process isn‚Äôt writing the code or arguing your stance to make the thing, it‚Äôs without question designing said thing. Here is where most of us find ourselves getting lost, losing motivation or simply berating our own work to the point of leaving it behind altogether.</p>\n\n<p>Put simply, we start with a pile of junk. Let‚Äôs call it like it is, our first drafts usually suck. I know that‚Äôs true for me, and probably for most of you reading this. As I mentioned in another <a href=\"http://localhost:4000/Can-You-Learn-Design\">post</a>:</p>\n\n<blockquote>\n  <p>‚Ä¶The common indie dev learned all about retain cycles and pointers instead of color theory and typography‚Ä¶</p>\n</blockquote>\n\n<p>Put simply, design isn‚Äôt natural for a lot of us. So, here‚Äôs what I‚Äôve come to do:</p>\n\n<ol>\n  <li>Find Apple‚Äôs, or other apps you respect, who‚Äôve made what you‚Äôre trying to make.</li>\n  <li>Write down why you enjoy the example you‚Äôve found.</li>\n  <li>If there is no example, question if you‚Äôre really making something that‚Äôs needed.\n    <ul>\n      <li>3a: If you are - great! You‚Äôre charting new territory, perhaps you‚Äôre onto a new innovation in your field and you‚Äôll be the first.</li>\n      <li>3b: Plus, even if your design totally bombs, it‚Äôll be the only design that exists - so at the same time it will also be the best- win, win!</li>\n    </ul>\n  </li>\n  <li>Sketch things out in a way you can move quickly using notes from step 2.</li>\n  <li>Iterate, but don‚Äôt dwell.</li>\n</ol>\n\n<p>This list is fairly easy to grok, but I‚Äôll say a few words about points four and five.</p>\n\n<p><strong>Sketching Things Out</strong><br />\nI‚Äôve found a ton of value in just getting some ideas out quickly. Sketch or Figma are usually what seasoned designers crack open, and that makes sense for them. It‚Äôs their wheelhouse, their Xcode. But for me, I still stumble around in those apps for a bit until I get where I need to be.</p>\n\n<p>So, to that end - I just simply draw. And, half the time, I never even open a high fidelity program to map things out more. Heck, I usually turn to SwiftUI before I do that (both a massive compliment and damning condemnation since I don‚Äôt end up shipping with that work). These days, I‚Äôm using a wonderful to-the-point infinite canvas app, aptly named <a href=\"https://www.scratch-paper.app\">Scratch Paper</a> to do the job:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/crappyDrawing.png\" role=\"presentation\" srcset=\"../assets/images/crappyDrawing.png\" /></p>\n\n<p>Yes, my drawings truly are that terrible. But what they do is help me discover problems early. And here, that dreadful display of my artistic capabilities uncovered the following truths:</p>\n\n<ul>\n  <li>Room for text would be tricky in a grid UI.</li>\n  <li>A grid does allow for more display density, but at a cost.</li>\n  <li>If lines of text didn‚Äôt line up column per column, the varying heights would bother me. A list of row won‚Äôt really have this quirk.</li>\n</ul>\n\n<p><strong>Iterating versus Dwelling</strong><br />\nMaybe it‚Äôs just me, but if I stick on a feature too long I begin to convince myself it‚Äôs straight trash. This is doubly true if you‚Äôve already shipped, because as the features mount you‚Äôre forced to stretch not only your design muscles, but your UX thought process as well. Tough stuff.</p>\n\n<p>So it is, at this point I try not to overthink it. I tend to make it as ‚Äúdumb‚Äù and as simple as it could possibly be. For me, this typically looks like:</p>\n\n<ul>\n  <li>Removing some gratuitous animations. <br /></li>\n  <li>Taking a flow from three taps to one or two. <br /></li>\n  <li>Or, even adding taps if the current flow requires too much preconceived ‚Äúknow how‚Äù bias I might‚Äôve baked in. For example, other devs on Twitter would know to double tap here, or long press there - but my mom wouldn‚Äôt. So, maybe one extra tap and a label explaining what an element does is worth it.</li>\n</ul>\n\n<p>It pays to remember that at this point, the entire planet pretty much uses an iPhone. Your barber, your doctor, your old college professor, your grandparents - it‚Äôs much more than just ‚Äúus‚Äù. So, if your flow is new or people have a chance of getting lost - dial it back. No need to put hot sauce on a jalapeno.</p>\n\n<p>A good design connotes simplicity - nearly 100% of the time. Over the years I‚Äôve come up with a complex flow chart to help remind me of this:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/superDiagram.jpeg\" role=\"presentation\" srcset=\"../assets/images/superDiagram.jpeg\" /></p>\n\n<h3 id=\"creating-the-base-mvp\">Creating the Base MVP</h3>\n<p>This is one of my favorite parts, because for me - I just feel like I can freakin‚Äô build anything, you know? And I bet you can too! Most of the indie developers I interact with (as I alluded to above) are programmers by trade. So, once we‚Äôve done the part that comes <em>least</em> naturally to us, it‚Äôs time to do the part that comes <em>most</em> naturally to us: the coding!</p>\n\n<blockquote>\n  <p>Sidebar: Reading this post back, I could see how this ordering might seem counterintuitive. You need to know a set of requirements before you can design anything. So, here I‚Äôm assuming you‚Äôve done that - this section speaks to defining a ‚Äúshippable MVP‚Äù that you‚Äôre ready to develop. A set of requirements has to be laid down already before you‚Äôd even know what to design.</p>\n</blockquote>\n\n<p>Before we do, though - let‚Äôs lay down what an MVP for this looks like. This is a permutation of the feature that maybe doesn‚Äôt have all that you wanted or envisioned, but it could ship if it had to.</p>\n\n<blockquote>\n  <p>For Spend Stack, this was Siri Shortcuts. It hurt not to launch with them, it hurts more they still aren‚Äôt there. But these are the choices we have to make as indies (for the record, hell or high water, shortcuts are coming).</p>\n</blockquote>\n\n<p>For this feature, my MVP looked like this:</p>\n\n<p><strong>The MVP</strong><br /></p>\n<ul>\n  <li>Assets for, well - new icons.</li>\n  <li>A new view to display icons.</li>\n  <li>A reconfigured settings view to make room for this new option, and a table row to take users there.</li>\n</ul>\n\n<p>And if I shipped with those things, it still would‚Äôve been a success for me and probably would have looked like this:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/basicB.png\" role=\"presentation\" srcset=\"../assets/images/basicB.png\" /></p>\n\n<p>Ah, but lest we stop there.</p>\n\n<h2 id=\"the-sauce\">The Sauce</h2>\n<p>At this point, I could‚Äôve shipped if I had to. But I had more time.</p>\n\n<p>As such, now we get to some of the good stuff. What makes your app stand out? I try to ask myself that critically all the time, and it‚Äôs no different even for something like custom icons. To that end, here‚Äôs what I wanted to really make the experience great:</p>\n\n<ul>\n  <li>A toggle for dark and light icons.</li>\n  <li>An ‚ÄúHD‚Äù preview of the icons, with a custom controller transition.</li>\n  <li>A link to the designer‚Äôs Twitter account.</li>\n</ul>\n\n<p>As you can see, when you mix this with the MVP it‚Äôs clear that all of these things are what are commonly referred to as ‚Äúnice to haves‚Äù. But, these are also little bits that users will notice and likely help foster goodwill among your community.</p>\n\n<p>If you‚Äôve used the Spend Stack beta, there‚Äôs not much to say here because it shipped with these features mentioned above:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/iconsDone.png\" role=\"presentation\" srcset=\"../assets/images/iconsDone.png\" /></p>\n\n<h3 id=\"the-best-in-class-additions\">The Best in Class Additions</h3>\n<p>Lastly, we have to give a feature the fit and finish it truly deserves. This is very different from ‚Äúthe sauce‚Äù above. The sauce (by the way, I feel so weird typing ‚Äúthe sauce‚Äù over and over but I‚Äôll solider on) is what makes your app stand out, be fun or have competitive advantages.</p>\n\n<p>On the other hand, Best in Class Additions are what make an app feel great, show what the platform can be or what software on it should feel like. These are things I believe <em>every</em> app should be doing, or at least aspire to be like.</p>\n\n<p>For custom icons, here was my list:</p>\n\n<ul>\n  <li>Don‚Äôt use <code class=\"highlighter-rouge\">reloadData</code> on the icon table view, batch reload it.</li>\n  <li>Use a slide out animation for the notice table row, but a fade animation for batch reloads (the slides were much too busy looking).</li>\n  <li>iPadOS Cursor Support.</li>\n  <li>Full accessibility and voice over support.</li>\n</ul>\n\n<p>For a quick example of the kind of impacts these things have, consider dismissing this little ‚Äúhint‚Äù using a full reload:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/bad.gif\" role=\"presentation\" srcset=\"../assets/images/bad.gif\" /></p>\n\n<p>Versus a smooth batching animation:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/good.gif\" role=\"presentation\" srcset=\"../assets/images/good.gif\" /></p>\n\n<p>And, here‚Äôs showing an icon with a standard presentation flow which feels a little off:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/noFun.gif\" role=\"presentation\" srcset=\"../assets/images/noFun.gif\" /></p>\n\n<p>And, here‚Äôs with the custom transition. You can‚Äôt really tell due to the .gif quality, but the icon‚Äôs corner radius also animates to its original value alongside the interactive drag dismiss:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/fun.gif\" role=\"presentation\" srcset=\"../assets/images/fun.gif\" /></p>\n\n<p>These are the things that add up over time, and make your app feel ‚Äú<a href=\"https://daringfireball.net/linked/2020/03/20/nnw-5-ios\">iOS-y</a>‚Äù</p>\n\n<p>Also, here are the things I consider best in class but I wasn‚Äôt able to get in:</p>\n\n<ul>\n  <li>Full keyboard support (I‚Äôm currently rewriting all of this logic, so it made sense to wait).</li>\n  <li>Some fun drag and drop options (i.e. drag an icon as an <code class=\"highlighter-rouge\">UIImage</code> payload).</li>\n</ul>\n\n<p>At this point, custom icons was finished and ready to be tested on the beta. The response was great, and I was happy to get it out. To recap, when I make a feature I tend to follow this flow:</p>\n\n<ol>\n  <li>Validate I should actually make the feature.</li>\n  <li>Get a list of what the feature is, roughly sketch it out.</li>\n  <li>From that list and sketch, define a ‚Äúshippable MVP‚Äù.</li>\n  <li>Time permitting - add in sprinkles of awesome.</li>\n  <li>Put in ‚ÄúBest in Class‚Äù additions.</li>\n  <li>Ship it and be proud of yourself.</li>\n  <li>Learn from user feedback, tweak it continually.</li>\n</ol>\n\n<p>On, and don‚Äôt forget step 8 - it‚Äôs always a good thing to tell others about your work!</p>\n\n<div class=\"jekyll-twitter-plugin\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">Went overboard with adding icons to <a href=\"https://twitter.com/SpendStackApp?ref_src=twsrc%5Etfw\">@SpendStackApp</a> üòé<br /><br />üåìToggle between dark or regular icons <br />üé®Check out the talented designers on Twitter <br />üì∏ These icons have some stellar details - so tap on one to view it in HD <br /><br />Rolling out ~today ~on the beta üëâ <a href=\"https://t.co/3CZBLXiE5S\">https://t.co/3CZBLXiE5S</a> <a href=\"https://t.co/xcUQeRW5LO\">pic.twitter.com/xcUQeRW5LO</a></p>&mdash; Jordan Morgan (@JordanMorgan10) <a href=\"https://twitter.com/JordanMorgan10/status/1260670081048199168?ref_src=twsrc%5Etfw\">May 13, 2020</a></blockquote>\n<script async=\"\" src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</div>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>And that‚Äôs how it happens! When creating a feature for your own app, try to find the flows that help you do the most important thing: ship. There‚Äôs a middle ground between everything I‚Äôve listed here and where the reality of actually shipping things lies.</p>\n\n<p>For example, I want to ship every single feature with my ideal flow as I was able to this time: get the MVP done, add in ‚Äúthe sauce‚Äù and make sure you‚Äôve considered any best in class additions. But it doesn‚Äôt always work that way, and what doesn‚Äôt ship today can always ship tomorrow. Thus, my unofficial tour of how Spend Stack becomes the proud parent of a new feature concludes!</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Ah yes, the feature.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-05-19T00:00:00-05:00",
            "date_modified": "2020-05-19T00:00:00-05:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/Exploring-Closures-With-Futures",
            "url": "http://localhost:4000/Exploring-Closures-With-Futures/",
            "title": "Exploring Futures over Closures",
            "content_html": "<p>One of the challenges I have faced with Combine is simply not knowing what all the framework can do, and when it should be doing it. The nascent vocabulary of its pieces combined (sorry) with my few dalliances with reactive programming has led to a steep learning curve. Even so, I‚Äôve replaced <code class=\"highlighter-rouge\">NotificationCenter</code> code with its built in Combine publisher, and I‚Äôve enjoyed the experience quite a lot. Operators are more concise, and clarity at the point of definition is a good way to foster a readable codebase.</p>\n\n<p>And yet.</p>\n\n<p>What more am I missing with Combine? I‚Äôve yet to author my own Publisher type, or know when the situation would call for one. I still struggle to maintain the mental model a passthrough subject affords, other than that it acts as both publisher and receiver.</p>\n\n<p>Thankfully, Apple pumped out a number of freshly minted Combine documentation, one of which led me to utilizing futures in place of closures and delegates. Personally, the benefit for me is that we harness Combine‚Äôs Swiss army knife operators in lieu of boilerplate code usually found within closures and delegate patterns.</p>\n\n<p>While working on <a href=\"https://twitter.com/JordanMorgan10/status/1250532684641775623?s=20\">Apple Card import</a> for Spend Stack, I had the following code:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"kt\">AppleCardImportViewController</span><span class=\"p\">:</span> <span class=\"kt\">SSBaseViewController</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">onImport</span><span class=\"p\">:(([</span><span class=\"kt\">AppleCardLineItem</span><span class=\"p\">])</span> <span class=\"o\">-&gt;</span> <span class=\"p\">(</span><span class=\"kt\">Void</span><span class=\"p\">))?</span>\n\n    <span class=\"kd\">private</span> <span class=\"kd\">func</span> <span class=\"nf\">importItems</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n        <span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"nv\">csv</span><span class=\"p\">:</span> <span class=\"k\">self</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"n\">csv</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">[</span><span class=\"k\">weak</span> <span class=\"k\">self</span><span class=\"p\">]</span> <span class=\"n\">items</span> <span class=\"k\">in</span> \n            <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">handler</span> <span class=\"o\">=</span> <span class=\"k\">self</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"n\">onImport</span> <span class=\"k\">else</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"p\">}</span>\n\n            <span class=\"k\">guard</span> <span class=\"o\">!</span><span class=\"n\">items</span><span class=\"o\">.</span><span class=\"n\">isEmpty</span> <span class=\"k\">else</span> <span class=\"p\">{</span> \n                <span class=\"nf\">handler</span><span class=\"p\">([])</span>\n                <span class=\"k\">return</span> \n            <span class=\"p\">}</span>\n    \n            <span class=\"k\">let</span> <span class=\"nv\">purchases</span> <span class=\"o\">=</span> <span class=\"n\">items</span><span class=\"o\">.</span><span class=\"n\">filter</span> <span class=\"p\">{</span> <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"n\">itemType</span> <span class=\"o\">!=</span> <span class=\"o\">.</span><span class=\"n\">payment</span> <span class=\"p\">}</span>\n            <span class=\"k\">let</span> <span class=\"nv\">translatedTags</span> <span class=\"o\">=</span> <span class=\"n\">purchases</span><span class=\"o\">.</span><span class=\"n\">filter</span> <span class=\"p\">{</span> <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"n\">category</span> <span class=\"o\">!=</span> <span class=\"s\">\"Other\"</span> <span class=\"p\">}</span>\n                                 <span class=\"o\">.</span><span class=\"n\">map</span> <span class=\"p\">{</span> <span class=\"kt\">SSListTag</span><span class=\"p\">(</span><span class=\"nv\">fromAppleTag</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n\n            <span class=\"k\">let</span> <span class=\"nv\">listItems</span> <span class=\"o\">=</span> <span class=\"n\">purchases</span><span class=\"o\">.</span><span class=\"n\">map</span> <span class=\"p\">{</span> <span class=\"kt\">SSListItem</span><span class=\"p\">(</span><span class=\"nv\">fromAppleCardItem</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n            <span class=\"n\">listItems</span><span class=\"o\">.</span><span class=\"n\">forEach</span> <span class=\"p\">{</span> \n                <span class=\"k\">let</span> <span class=\"nv\">translatedTag</span> <span class=\"o\">=</span> <span class=\"n\">translatedTags</span><span class=\"o\">.</span><span class=\"n\">first</span> <span class=\"p\">{</span> <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"o\">==</span> <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"n\">tag</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"p\">}</span>\n                <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">match</span> <span class=\"o\">=</span> <span class=\"n\">translatedTag</span> <span class=\"p\">{</span>\n                    <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"nf\">attach</span><span class=\"p\">(</span><span class=\"nv\">tag</span><span class=\"p\">:</span> <span class=\"n\">match</span><span class=\"p\">)</span>\n                <span class=\"p\">}</span>\n\n                <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"nf\">saveAsync</span><span class=\"p\">()</span>\n            <span class=\"p\">}</span>\n\n            <span class=\"nf\">handler</span><span class=\"p\">([</span><span class=\"n\">items</span><span class=\"p\">])</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// Later on...</span>\n<span class=\"k\">let</span> <span class=\"nv\">importController</span> <span class=\"o\">=</span> <span class=\"kt\">AppleCardImportViewController</span><span class=\"p\">(</span><span class=\"nv\">source</span><span class=\"p\">:</span><span class=\"n\">appleCardStatement</span><span class=\"p\">)</span>\n<span class=\"n\">importController</span><span class=\"o\">.</span><span class=\"n\">onImport</span> <span class=\"o\">=</span> <span class=\"p\">{</span> <span class=\"nv\">items</span><span class=\"p\">:[</span><span class=\"kt\">SSListItem</span><span class=\"p\">]</span> <span class=\"k\">in</span> \n    <span class=\"c1\">// Apply to table view and local data models</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p>While it certainly works, and I don‚Äôt typically advocate rewriting what is stable - this bit of code is unreleased, so I gave myself a pass. Obviously, I‚Äôve learned nothing from Spend Stack‚Äôs five year development cycle ü§†.</p>\n\n<p>Here‚Äôs what I came up with using a Future:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"kt\">AppleCardImportViewController</span><span class=\"p\">:</span> <span class=\"kt\">SSBaseViewController</span> <span class=\"p\">{</span>\n    <span class=\"kd\">func</span> <span class=\"nf\">performImport</span><span class=\"p\">()</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Future</span> <span class=\"o\">&lt;</span><span class=\"p\">[</span><span class=\"kt\">AppleCardItem</span><span class=\"p\">],</span> <span class=\"kt\">Never</span><span class=\"o\">&gt;</span> <span class=\"p\">{</span>\n        <span class=\"k\">return</span> <span class=\"kt\">Future</span><span class=\"p\">()</span> <span class=\"p\">{</span> <span class=\"n\">promise</span> <span class=\"k\">in</span>\n            <span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"nv\">csv</span><span class=\"p\">:</span> <span class=\"k\">self</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"n\">csv</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"n\">items</span> <span class=\"k\">in</span>\n                <span class=\"nf\">promise</span><span class=\"p\">(</span><span class=\"kt\">Result</span><span class=\"o\">.</span><span class=\"nf\">success</span><span class=\"p\">(</span><span class=\"n\">items</span><span class=\"p\">))</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// From the caller</span>\n<span class=\"k\">let</span> <span class=\"nv\">importVC</span> <span class=\"o\">=</span> <span class=\"kt\">AppleCardImportViewController</span><span class=\"p\">(</span><span class=\"nv\">withCSV</span><span class=\"p\">:</span> <span class=\"n\">csvData</span><span class=\"p\">)</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">importCancellable</span> <span class=\"o\">=</span> \n<span class=\"n\">importVC</span><span class=\"o\">.</span><span class=\"nf\">performImport</span><span class=\"p\">()</span>\n        <span class=\"o\">.</span><span class=\"n\">filter</span> <span class=\"p\">{</span> <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"n\">itemType</span> <span class=\"o\">!=</span> <span class=\"o\">.</span><span class=\"n\">payment</span> <span class=\"p\">}</span>\n        <span class=\"o\">.</span><span class=\"nf\">sink</span><span class=\"p\">()</span> <span class=\"p\">{</span> <span class=\"n\">purchases</span> <span class=\"k\">in</span> \n            <span class=\"k\">let</span> <span class=\"nv\">translatedTags</span> <span class=\"o\">=</span> <span class=\"n\">purchases</span><span class=\"o\">.</span><span class=\"n\">filter</span> <span class=\"p\">{</span> <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"n\">category</span> <span class=\"o\">!=</span> <span class=\"s\">\"Other\"</span> <span class=\"p\">}</span>\n            <span class=\"o\">.</span><span class=\"n\">map</span> <span class=\"p\">{</span> <span class=\"kt\">SSListTag</span><span class=\"p\">(</span><span class=\"nv\">fromAppleTag</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n\n            <span class=\"k\">let</span> <span class=\"nv\">listItems</span> <span class=\"o\">=</span> <span class=\"n\">purchases</span><span class=\"o\">.</span><span class=\"n\">map</span> <span class=\"p\">{</span> <span class=\"kt\">SSListItem</span><span class=\"p\">(</span><span class=\"nv\">fromAppleCardItem</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n            <span class=\"n\">listItems</span><span class=\"o\">.</span><span class=\"n\">forEach</span> <span class=\"p\">{</span> \n                <span class=\"k\">let</span> <span class=\"nv\">translatedTag</span> <span class=\"o\">=</span> <span class=\"n\">translatedTags</span><span class=\"o\">.</span><span class=\"n\">first</span> <span class=\"p\">{</span> <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"o\">==</span> <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"n\">tag</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"p\">}</span>\n                <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">match</span> <span class=\"o\">=</span> <span class=\"n\">translatedTag</span> <span class=\"p\">{</span>\n                    <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"nf\">attach</span><span class=\"p\">(</span><span class=\"nv\">tag</span><span class=\"p\">:</span> <span class=\"n\">match</span><span class=\"p\">)</span>\n                <span class=\"p\">}</span>\n\n                <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"nf\">saveAsync</span><span class=\"p\">()</span>\n            <span class=\"p\">}</span>\n\n            <span class=\"c1\">// Apply to table view</span>\n        <span class=\"p\">}</span>\n</code></pre></div></div>\n<p>A few things were reconsidered, namely that I might want all Apple Card items in the future so I removed the payment versus purchase filtering. I also opted for a less strict importing function, and it does much less.</p>\n\n<p>Another implementation point I waffled on was how many operators to utilize. For example, the <code class=\"highlighter-rouge\">sink</code> above could do nothing more than apply things to a table view, allowing for the <code class=\"highlighter-rouge\">map</code> operator to do more of the heavy lifting. I‚Äôm not sure which I‚Äôd prefer. With Combine, there seems to be a natural tension between how much work a publisher should abstract away and then emit, versus how much of that work the subscriber should shoulder when receiving it. In a way, it speaks to the framework‚Äôs utility that engineers even have the choice to begin with.</p>\n\n<p>More than anything, this was a learning exercise. I‚Äôm not quite sure how I feel about supplying the publisher via a function call, which is then chained off of. Maybe it‚Äôs my old Objective-C ‚Äúget off my lawn‚Äù ways, I‚Äôm just not sure if that‚Äôs widely accepted or not. Patterns will emerge, though, and I‚Äôm apt to take Apple at their word and sample code.</p>\n\n<p>If you‚Äôd like some weekend reading, be sure to check the aforementioned sample documentation here:</p>\n\n<ul>\n  <li><a href=\"https://developer.apple.com/documentation/combine/using_combine_for_your_app_s_asynchronous_code\">Using Combine for Your App‚Äôs Asynchronous Code</a></li>\n  <li><a href=\"https://developer.apple.com/documentation/combine/routing_notifications_to_combine_subscribers\">Routing Notifications to Combine Subscribers</a></li>\n  <li><a href=\"https://developer.apple.com/documentation/combine/replacing_foundation_timers_with_timer_publishers\">Replacing Foundation Timers with Timer Publishers</a></li>\n  <li><a href=\"https://developer.apple.com/documentation/combine/performing_key-value_observing_with_combine\">Performing Key-Value Observing with Combine</a></li>\n</ul>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "One of the challenges I have faced with Combine is simply not knowing what all the framework can do, and when it should be doing it. The nascent vocabulary of its pieces combined (sorry) with my few dalliances with reactive programming has led to a steep learning curve. Even so, I‚Äôve replaced NotificationCenter code with its built in Combine publisher, and I‚Äôve enjoyed the experience quite a lot. Operators are more concise, and clarity at the point of definition is a good way to foster a readable codebase.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-04-17T00:00:00-05:00",
            "date_modified": "2020-04-17T00:00:00-05:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["Tech Notes"]},{
            "id": "http://localhost:4000/Its-Okay-To-Do-Nothing",
            "url": "http://localhost:4000/Its-Okay-To-Do-Nothing/",
            "title": "It‚Äôs Okay to Do Nothing",
            "content_html": "<p>If there is one thing I don‚Äôt like doing - it‚Äôs nothing.</p>\n\n<p>I‚Äôve never been good at it. While I‚Äôm miles away from the ‚Äúhustle porn‚Äù ways that are unfortunately pervasive within the tech industry, I‚Äôve always had a natural work ethic and a desire to do more. My near-anathema towards inaction, no goals being set forth or something to solve has served me well in my career.</p>\n\n<p>But right now, I just can‚Äôt. And if you can‚Äôt either, you should know that you don‚Äôt have to.</p>\n\n<p>It‚Äôs something I‚Äôve been having to remind myself. Not even a few hours ago, I retreated to my bathroom, closed the door and buried my head in my hands. I felt defeated - it was 9:00 a.m. and <em>just couldn‚Äôt get anything started</em>.</p>\n\n<p>Typically, my work day would‚Äôve started hours ago. But between (literally) spilled milk, a diaper change, breaking up a fight over a kickball, making another bowl of cereal because a sibling got jealous his brother had one and he didn‚Äôt while also getting myself dressed and somewhat fed - I found no ounce of down time.</p>\n\n<h3 id=\"detour\">Detour</h3>\n\n<p>When I look at my goals for the year, they stick out like a sore thumb and, now, produce a stark juxtaposition of priorities and unrealistic expectations when faced with the current world wide pandemic. I‚Äôm dutifully staying home, as I‚Äôm sure most of you are, and within these walls are my entire life:</p>\n\n<p>My wife, Bennett (age 6), Remy (age 3) and Baylor (1 year old).</p>\n\n<p>Our days are spent almost entirely spent in our 1100 square foot home with three bedrooms. In many ways, I feel thankful and lucky to have this extra time with the people I care most about it.</p>\n\n<p>But when it comes to work, and getting things done - I nearly can‚Äôt. And it bothers me, but I‚Äôve come to accept that this is simply where things are at. Even more so, it‚Äôs the definition of ‚Äúout of my control‚Äù. Either Remy is banging on my bedroom door screaming because he doesn‚Äôt understand why I can‚Äôt come out to play, or Bennett wants help with school work or Baylor wants me to hold her - I‚Äôve come to realize that parenthood doesn‚Äôt give you a pass just because the world is on fire.</p>\n\n<p>So, I‚Äôm doing the best that I can. And some days, it‚Äôs nearly nothing. On those days, I continually count my blessings to offset my mood. I work for an amazing company and team who truly are sympathetic to not only my situation, but everyone across the team. They‚Äôve got my back, and I‚Äôm truly grateful for it. My wife, who does this every day (pandemic or not) keeps us all together and chugging along.</p>\n\n<p>And, in between these moments, I find time to write code. And someday (who knows when) I‚Äôll have time to write more of it.</p>\n\n<p>But right now, Xcode is getting a breather more often than not. And while it does, I‚Äôm going to take my own deep breath, be a great Dad and husband - and give my employer all I can, when I can. Some days that‚Äôs not a lot, some days it‚Äôs a little bit more than yesterday and very rarely it‚Äôs quite a bit.</p>\n\n<p>So if your productivity is  taking a hit, and you‚Äôre a little stressed about it - please know that there are many of us feeling that burn along with you. Spend Stack can wait, blog posts can wait, learning new things can wait - it all can wait. Your employer will hopefully know that some work will have to wait, too. But taking care of myself, my kids and wife cannot.</p>\n\n<p>This is nothing that Twitter hasn‚Äôt already said, but maybe you needed a reminder today. We will put COVID-19 in our rear view mirror someday. Humanity has defeated several forms of sickness before, and we will do it again. But this is not normal, and your throughput won‚Äôt be normal.</p>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>Just a take a breather, know that better days are on the way and please remember; it‚Äôs OK to do nothing. Right now, some days it‚Äôs all you can do.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "If there is one thing I don‚Äôt like doing - it‚Äôs nothing.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-04-10T00:00:00-05:00",
            "date_modified": "2020-04-10T00:00:00-05:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/Keyboard-and-Combine",
            "url": "http://localhost:4000/Keyboard-and-Combine/",
            "title": "Keyboard and Combine",
            "content_html": "<p>While toiling about with some keyboard handling code in Spend Stack, I started to remember one import choice I made several months ago:</p>\n\n<p>Spend Stack‚Äôs minimum build target is iOS 13.</p>\n\n<p>Which means my cup runneth over with Combine. So, today I‚Äôm sharing a little utility I wrote which brings the convenience of Combine into the world of <code class=\"highlighter-rouge\">UIKeyboard</code>.</p>\n\n<p>Normally, the flow to handle the keyboard looks a little like this, give or take:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">keyboardNotifications</span><span class=\"p\">:[</span><span class=\"kt\">NSNotification</span><span class=\"o\">.</span><span class=\"kt\">Name</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardWillShowNotification</span><span class=\"p\">,</span>\n<span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardDidShowNotification</span><span class=\"p\">,</span>\n<span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardWillHideNotification</span><span class=\"p\">,</span>\n<span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardDidHideNotification</span><span class=\"p\">]</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">kbSelector</span> <span class=\"o\">=</span> <span class=\"kd\">#selector(</span><span class=\"nf\">receivedKeyboardNotification(notification:)</span><span class=\"kd\">)</span>\n<span class=\"n\">keyboardNotifications</span><span class=\"o\">.</span><span class=\"n\">forEach</span> <span class=\"p\">{</span>\n    <span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span><span class=\"o\">.</span><span class=\"nf\">addObserver</span><span class=\"p\">(</span><span class=\"k\">self</span><span class=\"p\">,</span>\n                                           <span class=\"nv\">selector</span><span class=\"p\">:</span> <span class=\"n\">kbSelector</span><span class=\"p\">,</span>\n                                           <span class=\"nv\">name</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">,</span>\n                                           <span class=\"nv\">object</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">@objc</span> <span class=\"kd\">func</span> <span class=\"nf\">receivedKeyboardNotification</span><span class=\"p\">(</span><span class=\"nv\">notification</span><span class=\"p\">:</span> <span class=\"kt\">Notification</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"c1\">// Get animation curve, rect or whatever else...</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>The two things I wanted to clean up were that:</p>\n\n<p><strong>1)</strong> That‚Äôs a lot of code to just know when the keyboard is doing stuff and <br />\n<strong>2)</strong> It would be nice to centralize getting all of the information about what‚Äôs going on out of the <code class=\"highlighter-rouge\">userInfo</code> dictionary into something tidier.</p>\n\n<h3 id=\"unify-keyboard-information\">Unify Keyboard Information</h3>\n<p>The latter part is easy enough. A little struct can go a long ways here:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">enum</span> <span class=\"kt\">KeyboardTransitionState</span> <span class=\"p\">{</span>\n    <span class=\"k\">case</span> <span class=\"n\">unset</span><span class=\"p\">,</span> <span class=\"n\">willShow</span><span class=\"p\">,</span> <span class=\"n\">didShow</span><span class=\"p\">,</span> <span class=\"n\">willHide</span><span class=\"p\">,</span> <span class=\"n\">didHide</span>\n<span class=\"p\">}</span>\n\n<span class=\"kd\">struct</span> <span class=\"kt\">KeyboardState</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">state</span><span class=\"p\">:</span><span class=\"kt\">KeyboardTransitionState</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">unset</span>\n    <span class=\"k\">var</span> <span class=\"nv\">height</span> <span class=\"o\">=</span> <span class=\"mf\">0.0</span>\n    <span class=\"k\">var</span> <span class=\"nv\">isVisible</span> <span class=\"o\">=</span> <span class=\"kc\">false</span>\n    <span class=\"k\">var</span> <span class=\"nv\">frame</span><span class=\"p\">:</span><span class=\"kt\">CGRect</span> <span class=\"o\">=</span> <span class=\"kt\">CGRect</span><span class=\"o\">.</span><span class=\"n\">zero</span>\n    <span class=\"k\">var</span> <span class=\"nv\">animationDuration</span> <span class=\"o\">=</span> <span class=\"mf\">0.0</span>\n\n    <span class=\"c1\">// MARK: Private </span>\n    <span class=\"kd\">private</span> <span class=\"k\">let</span> <span class=\"nv\">frameEnd</span> <span class=\"o\">=</span> <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardFrameEndUserInfoKey</span>\n    <span class=\"kd\">private</span> <span class=\"k\">let</span> <span class=\"nv\">animEnd</span> <span class=\"o\">=</span> <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardAnimationDurationUserInfoKey</span>\n\n    <span class=\"nf\">init</span><span class=\"p\">(</span><span class=\"n\">with</span> <span class=\"nv\">note</span><span class=\"p\">:</span><span class=\"kt\">Notification</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"k\">switch</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"p\">{</span>\n        <span class=\"k\">case</span> <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"nv\">keyboardWillShowNotification</span><span class=\"p\">:</span>\n            <span class=\"n\">state</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">willShow</span>\n            <span class=\"k\">let</span> <span class=\"nv\">keyboardEndFrame</span> <span class=\"o\">=</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">userInfo</span><span class=\"p\">?[</span><span class=\"n\">frameEnd</span><span class=\"p\">]</span> <span class=\"k\">as!</span> <span class=\"kt\">CGRect</span>\n            <span class=\"n\">height</span> <span class=\"o\">=</span> <span class=\"kt\">Double</span><span class=\"p\">(</span><span class=\"n\">keyboardEndFrame</span><span class=\"o\">.</span><span class=\"n\">size</span><span class=\"o\">.</span><span class=\"n\">height</span><span class=\"p\">)</span>\n            \n            <span class=\"k\">let</span> <span class=\"nv\">animationDurationValue</span> <span class=\"o\">=</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">userInfo</span><span class=\"p\">?[</span><span class=\"n\">animEnd</span><span class=\"p\">]</span> <span class=\"k\">as!</span> <span class=\"kt\">NSNumber</span>\n            <span class=\"n\">animationDuration</span> <span class=\"o\">=</span> <span class=\"n\">animationDurationValue</span><span class=\"o\">.</span><span class=\"n\">doubleValue</span>\n        <span class=\"k\">break</span>\n        <span class=\"k\">case</span> <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"nv\">keyboardDidShowNotification</span><span class=\"p\">:</span>\n            <span class=\"n\">state</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">didShow</span>\n            <span class=\"n\">isVisible</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n            \n            <span class=\"k\">let</span> <span class=\"nv\">keyboardEndFrame</span> <span class=\"o\">=</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">userInfo</span><span class=\"p\">?[</span><span class=\"n\">frameEnd</span><span class=\"p\">]</span> <span class=\"k\">as!</span> <span class=\"kt\">CGRect</span>\n            <span class=\"n\">height</span> <span class=\"o\">=</span> <span class=\"kt\">Double</span><span class=\"p\">(</span><span class=\"n\">keyboardEndFrame</span><span class=\"o\">.</span><span class=\"n\">size</span><span class=\"o\">.</span><span class=\"n\">height</span><span class=\"p\">)</span>\n        <span class=\"k\">break</span>\n        <span class=\"k\">case</span> <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"nv\">keyboardWillHideNotification</span><span class=\"p\">:</span>\n            <span class=\"n\">state</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">willHide</span>\n            <span class=\"k\">let</span> <span class=\"nv\">animationDurationValue</span> <span class=\"o\">=</span> <span class=\"n\">note</span><span class=\"o\">.</span><span class=\"n\">userInfo</span><span class=\"p\">?[</span><span class=\"n\">animEnd</span><span class=\"p\">]</span> <span class=\"k\">as!</span> <span class=\"kt\">NSNumber</span>\n            <span class=\"n\">animationDuration</span> <span class=\"o\">=</span> <span class=\"n\">animationDurationValue</span><span class=\"o\">.</span><span class=\"n\">doubleValue</span>\n        <span class=\"k\">break</span>\n        <span class=\"k\">case</span> <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"nv\">keyboardDidHideNotification</span><span class=\"p\">:</span>\n            <span class=\"n\">state</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">didHide</span>\n        <span class=\"k\">break</span>\n        <span class=\"k\">default</span><span class=\"p\">:</span>\n            <span class=\"k\">break</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n\n<p>It‚Äôs a smidge dirty and needs a bit of refactoring, but it‚Äôs more than enough to try out a new approach with Combine.</p>\n\n<h3 id=\"combine-it\">Combine It</h3>\n<p>In what‚Äôs become a weekly practice for me, I had a problem and threw Combine at it. I‚Äôm not sure if that‚Äôs a great sign or malpractice, regardless - here‚Äôs how it shaped up (with a backport option for iOS 12):</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"kt\">KeyboardHandler</span> <span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">onChange</span><span class=\"p\">:((</span><span class=\"kt\">KeyboardState</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Void</span><span class=\"p\">)</span>\n    <span class=\"kd\">private(set)</span> <span class=\"k\">var</span> <span class=\"nv\">currentState</span><span class=\"p\">:</span><span class=\"kt\">KeyboardState</span><span class=\"p\">?</span>\n    \n    <span class=\"kd\">@available</span><span class=\"p\">(</span><span class=\"n\">iOS</span> <span class=\"mf\">13.0</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"p\">)</span>\n    <span class=\"kd\">private</span> <span class=\"kd\">lazy</span> <span class=\"k\">var</span> <span class=\"nv\">kbSub</span><span class=\"p\">:</span><span class=\"kt\">AnyCancellable</span><span class=\"p\">?</span> <span class=\"o\">=</span> <span class=\"kt\">AnyCancellable</span><span class=\"p\">()</span> <span class=\"p\">{}</span>\n    <span class=\"kd\">private</span> <span class=\"k\">let</span> <span class=\"nv\">keyboardNotifications</span><span class=\"p\">:[</span><span class=\"kt\">NSNotification</span><span class=\"o\">.</span><span class=\"kt\">Name</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n        <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardWillShowNotification</span><span class=\"p\">,</span>\n        <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardDidShowNotification</span><span class=\"p\">,</span>\n        <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardWillHideNotification</span><span class=\"p\">,</span>\n        <span class=\"kt\">UIResponder</span><span class=\"o\">.</span><span class=\"n\">keyboardDidHideNotification</span><span class=\"p\">]</span>\n    \n    <span class=\"c1\">// MARK: Initializer</span>\n\n    <span class=\"nf\">init</span><span class=\"p\">(</span><span class=\"n\">with</span> <span class=\"nv\">changeHandler</span><span class=\"p\">:</span><span class=\"kd\">@escaping</span> <span class=\"p\">((</span><span class=\"kt\">KeyboardState</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Void</span><span class=\"p\">))</span> <span class=\"p\">{</span>\n        <span class=\"n\">onChange</span> <span class=\"o\">=</span> <span class=\"n\">changeHandler</span>\n        \n        <span class=\"k\">if</span> <span class=\"kd\">#available(iOS 13.0, *)</span> <span class=\"p\">{</span>\n            <span class=\"k\">let</span> <span class=\"nv\">nc</span> <span class=\"o\">=</span> <span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span>\n            <span class=\"n\">kbSub</span> <span class=\"o\">=</span> <span class=\"kt\">Publishers</span><span class=\"o\">.</span><span class=\"kt\">MergeMany</span><span class=\"p\">(</span>\n                <span class=\"n\">keyboardNotifications</span><span class=\"o\">.</span><span class=\"n\">map</span> <span class=\"p\">{</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"nf\">publisher</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n            <span class=\"p\">)</span>\n            <span class=\"o\">.</span><span class=\"nf\">sink</span><span class=\"p\">(</span><span class=\"nv\">receiveValue</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">note</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n                <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">currentState</span> <span class=\"o\">=</span> <span class=\"kt\">KeyboardState</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">note</span><span class=\"p\">)</span>\n                <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"nf\">onChange</span><span class=\"p\">(</span><span class=\"kt\">KeyboardState</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">note</span><span class=\"p\">))</span>\n            <span class=\"p\">})</span>\n        <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n            <span class=\"k\">let</span> <span class=\"nv\">kbSelector</span> <span class=\"o\">=</span> <span class=\"kd\">#selector(</span><span class=\"nf\">receivedKeyboardNotification(notification:)</span><span class=\"kd\">)</span>\n            <span class=\"n\">keyboardNotifications</span><span class=\"o\">.</span><span class=\"n\">forEach</span> <span class=\"p\">{</span>\n                <span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span><span class=\"o\">.</span><span class=\"nf\">addObserver</span><span class=\"p\">(</span><span class=\"k\">self</span><span class=\"p\">,</span>\n                                                       <span class=\"nv\">selector</span><span class=\"p\">:</span> <span class=\"err\">#</span><span class=\"n\">kbSelector</span><span class=\"p\">,</span>\n                                                       <span class=\"nv\">name</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">,</span>\n                                                       <span class=\"nv\">object</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">)</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"kd\">func</span> <span class=\"nf\">unsubscribe</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n        <span class=\"k\">if</span> <span class=\"kd\">#available(iOS 13.0, *)</span> <span class=\"p\">{</span>\n            <span class=\"n\">kbSub</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"nf\">cancel</span><span class=\"p\">()</span>\n        <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n            <span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span><span class=\"o\">.</span><span class=\"nf\">removeObserver</span><span class=\"p\">(</span><span class=\"k\">self</span><span class=\"p\">)</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"c1\">//MARK: Private Functions</span>\n\n    <span class=\"kd\">@objc</span> <span class=\"kd\">func</span> <span class=\"nf\">receivedKeyboardNotification</span><span class=\"p\">(</span><span class=\"nv\">notification</span><span class=\"p\">:</span> <span class=\"kt\">Notification</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"n\">currentState</span> <span class=\"o\">=</span> <span class=\"kt\">KeyboardState</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">notification</span><span class=\"p\">)</span>\n        <span class=\"nf\">onChange</span><span class=\"p\">(</span><span class=\"kt\">KeyboardState</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">notification</span><span class=\"p\">))</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p>There‚Äôs likely a prettier path to merging all of the notifications, but I accepted my Combine na√Øvet√© and moved on. Further, one might not need all of em‚Äô either.</p>\n\n<blockquote>\n  <p>Update: Thanks to <a href=\"https://www.twitter.com/jasdev\">Jasdev Singh</a> for suggesting <code class=\"highlighter-rouge\">mergeMany</code>.</p>\n</blockquote>\n\n<h3 id=\"in-practice\">In Practice</h3>\n<p>So what‚Äôs that leave us with? Well, a tidy little object that‚Äôll hide the messiness of keyboard handling away in a simple package:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">private</span> <span class=\"k\">var</span> <span class=\"nv\">kbHandler</span><span class=\"p\">:</span><span class=\"kt\">KeyboardHandler</span><span class=\"p\">?</span>\n\n<span class=\"c1\">// Later on in viewDidLoad, or wherever appropriate...</span>\n<span class=\"n\">kbHandler</span> <span class=\"o\">=</span> <span class=\"kt\">KeyboardHandler</span> <span class=\"p\">{</span> <span class=\"n\">state</span> <span class=\"k\">in</span>\n    <span class=\"k\">let</span> <span class=\"nv\">duration</span> <span class=\"o\">=</span> <span class=\"n\">state</span><span class=\"o\">.</span><span class=\"n\">animationDuration</span>\n    <span class=\"kt\">UIView</span><span class=\"o\">.</span><span class=\"nf\">animate</span><span class=\"p\">(</span><span class=\"nv\">withDuration</span><span class=\"p\">:</span> <span class=\"n\">duration</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"c1\">// Change table view offsets or whatever</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>What‚Äôs ironic is that after I had written this, I realized I could‚Äôve done this approach years ago. In fact, Combine is abstracted away entirely to the caller.</p>\n\n<p>But, it‚Äôs just another example of how new API can make you look at age old problems in a new light. A problem well stated is a problem half solved I suppose.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "While toiling about with some keyboard handling code in Spend Stack, I started to remember one import choice I made several months ago:",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-03-22T00:00:00-05:00",
            "date_modified": "2020-03-22T00:00:00-05:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["Tech Notes"]},{
            "id": "http://localhost:4000/Creating-A-Retail-Demo",
            "url": "http://localhost:4000/Creating-A-Retail-Demo/",
            "title": "Creating a Retail Demo for Apple",
            "content_html": "<p>Through luck, determination and whatever other stereotypical noble quality you can conjure up, Apple selected <a href=\"https://www.spendstack.com\">Spend Stack</a> to take part in their retail demo program.</p>\n\n<p>Yay! Right!? Just look at it!</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/demoStore.jpeg\" role=\"presentation\" srcset=\"../assets/images/demoStore.jpeg\" /></p>\n\n<p>Well, yes. Of course yes!</p>\n\n<p>But, if you hit the Googles for past experiences with this, you‚Äôll find quite a lot of tumbleweeds. This makes sense, because if you happen to scan the apps that are on retail iPhones and iPads at your local Best Buy, Apple Store, etc. - they tend to be apps that hail from Big Corp¬©. And rightfully so, they all are quality, well made apps with the team and budget to match.</p>\n\n<p>Though, the everyman doesn‚Äôt often appear there. And if they do, it typically tends to be in the form of a game. So today, I figured I‚Äôd spend this indie dev diary chronicling my experience with getting Spend Stack on iPhones and iPads across America üá∫üá∏. Think of it as Spend Stack‚Äôs official road tour üöå.</p>\n\n<p>Or, maybe more than America. I‚Äôm not really sure? I‚Äôll get into that later, as we‚Äôll see.</p>\n\n<h3 id=\"the-reach-out\">The Reach Out</h3>\n<p>During some Saturday in December when I was hacking away at Spend Stack at local coffee shop, I noticed an email that stuck out. Its subject line spoke about an incredible marketing opportunity.</p>\n\n<p>I thought it was spam üòÖ!</p>\n\n<p>Thankfully, I took a closer look and saw the sender had a bonafide Apple domain. The message was simple enough. Someone from developer relations introduced themselves and laid out how the process works.</p>\n\n<p>From there, you just dive into the ~15 page .pdf file they give you to point out the finer details. I will say, this guide was incredibly helpful. It had step-by-step pictures with call out glyphs to ensure you were getting logistical things done correctly (especially helpful when you get into the upload part of the process).</p>\n\n<h3 id=\"the-prep\">The Prep</h3>\n<p>With my requirements in hand, I got to work! Luckily, this occurred over my Christmas break, where I am fortunate enough to take about three weeks off each year. I had quite a large update to Spend Stack planned for this time (which I‚Äôm in the middle of now) but the opportunity cost was worth the trade.</p>\n\n<p>If you‚Äôve spent any number of minutes with these demo apps at stores, you kind of know what to expect. A splash screen saying that‚Äôs it a demo, pre-populated data and some features that are either taken out or gated by an alert controller saying it‚Äôs unavailable.</p>\n\n<p>In Spend Stack, all of this was easy enough. Instead of going through my designs and taking things out, I opted to keep them in so users would be aware they existed. I‚Äôd rather they hit a ‚ÄúYou can‚Äôt do this in the demo‚Äù alert than be none-the-wiser to some pretty great features that are core to Spend Stack (i.e. iCloud sharing and collaborating for lists).</p>\n\n<p>The splash screen was quick to whip up - I originally was using the one I have shipped now, but it was easier to rip it out to make a more ‚Äúto the point‚Äù variation:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/compareSplash.png\" role=\"presentation\" srcset=\"../assets/images/compareSplash.png\" /></p>\n\n<p>If anything, I probably would‚Äôve taken out the ‚ÄúContinue‚Äù button, as I noticed quite a few apps don‚Äôt even use one.</p>\n\n<h3 id=\"the-problems\">The Problems</h3>\n<p>I hit some issues along the way, though. The first and most challenging was around how I chose to tackle demo data. I need quite a bit of it. I wrote a list of lists (meta!) that I wanted to include to best showcase all of the things you can do with Spend Stack. I ended up with a solid line up, and each one was filled with relevant items, images, notes and more:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/listLists.png\" role=\"presentation\" srcset=\"../assets/images/listLists.png\" /></p>\n\n<p>The issue was, I created these all in code for my first go around. And, well - it took about 5 seconds to create the database, drop existing data and populate these on the fly. That‚Äôs a non-starter, obviously, as nobody except my Mom and (maybe) my wife would wait around for that. And even then, it would only be out of love üòÖ.</p>\n\n<p>I tried to turn some tricks with concurrency, but as is so often the case with programming - I stepped away from it and arrived at an answer. The epiphany came, and the solution was dead simple: simply ship the retail demo with a database. Spend Stack uses raw SQLite for data, and once I used the app and had a good set of dummy lists to work with - I simply found it within the file system on my mac and included it as part of the Xcode project.</p>\n\n<p>It booted lightning fast - done and done:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"kt\">NSString</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">databaseFilePath</span>\n<span class=\"p\">{</span>\n    <span class=\"kt\">NSFileManager</span> <span class=\"o\">*</span><span class=\"n\">fileManager</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"kt\">NSFileManager</span> <span class=\"n\">defaultManager</span><span class=\"p\">];</span>\n    <span class=\"kt\">NSArray</span> <span class=\"o\">*</span><span class=\"n\">directories</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">fileManager</span> <span class=\"kt\">URLsForDirectory</span><span class=\"p\">:</span><span class=\"kt\">NSDocumentDirectory</span> <span class=\"nv\">inDomains</span><span class=\"p\">:</span><span class=\"kt\">NSUserDomainMask</span><span class=\"p\">];</span>\n    <span class=\"kt\">NSString</span> <span class=\"o\">*</span><span class=\"n\">documentPath</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">directories</span><span class=\"o\">.</span><span class=\"n\">firstObject</span> <span class=\"kt\">URLByAppendingPathComponent</span><span class=\"p\">:</span><span class=\"s\">@\"spendStack.db\"</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"p\">;</span>\n    \n    <span class=\"k\">return</span> <span class=\"n\">documentPath</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>The other hiccup has to do with multiple spaces on iPadOS. When you ship these retail apps, you‚Äôve got to wipe any data entered on them when the user is ‚Äúdone‚Äù with them. Done is quite ambiguous, and there‚Äôs no concrete ‚Äúwhen‚Äù defined. So, when a user backgrounds Spend Stack I reset everything:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">-</span> <span class=\"p\">(</span><span class=\"n\">void</span><span class=\"p\">)</span><span class=\"nv\">sceneDidEnterBackground</span><span class=\"p\">:(</span><span class=\"kt\">UIScene</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">scene</span>\n<span class=\"p\">{</span>\n    <span class=\"p\">[</span><span class=\"k\">self</span> <span class=\"n\">initateSelfDestructSequence</span><span class=\"p\">];</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>The only fun thing is that when you open a new window, iOS also calls the same delegate method while the window is being setup. You can see this quite easily, and it makes sense I guess - iOS puts up that blurry view while another window slides in. So, I‚Äôve got some jank there that I won‚Äôt share publicly to help avoid any deleterious state bugs üòÖ (spoiler, it‚Äôs <em>totally</em> not a simple GCD delay, no way).</p>\n\n<p>Aside from that - uploading it App Store Connect gave me some fits. Try to hide your surprise üòú. It‚Äôs a bit of a different flow, but again - the .pdf guide they give you really helped out here.</p>\n\n<h3 id=\"the-uncertainty\">The Uncertainty</h3>\n<p>Once it was uploaded, all that was left to do was wait. I didn‚Äôt really get much information on when and where it would be. Was this like App Store promo art, where you supply it and it might be lost to the dark ether of the App Store editorial team (still waiting for mine to be used ü§ûüò≠üôÉ) or show up next week? I had no idea, so I figured I‚Äôd just point blank ask them.</p>\n\n<p>The response?</p>\n\n<p>An email telling me to gate one more feature with an alert ü§£. But, I guess that did mean they were going to use it! Shoot your shot, right?</p>\n\n<p>Getting responses was a little difficult to be honest, and in some ways frustrating, because to smaller indies like me - this is a <strong>big</strong> deal! This is getting Apple‚Äôs stamp of approval for your app! It‚Äôs marketing! Validation! The list goes on. I wanted to know I was doing everything they needed.</p>\n\n<p>Look, there could be a million reasons for why things work the way they do on the App Store and these kind of things. It could be out of certain individual‚Äôs control. It‚Äôs always easy to bemoan X or Y on the outside.</p>\n\n<p>I do know this - the rep I worked with was always kind when I chatted with them, and we cracked a few jokes back and forth. Plus, each person I‚Äôve meet at W.W.D.C. on the App Store team was delightful, and the labs with them were a highlight. It feels like the key here is like anything else, you just need to build relationships to get things moving and I‚Äôm still working on that with the App Store folks.</p>\n\n<p>All that to say - the reason for this tweet was half because I wanted to share the news with my fellows devs, and half because I wanted to get the word out:</p>\n\n<div class=\"jekyll-twitter-plugin\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">ü§©<br /><br />About that Spend Stack news...<br /><br />I‚Äôve always said that my main goal was to make an app I‚Äôm truly proud of. While I‚Äôve got a lot left to do, having Apple want <a href=\"https://twitter.com/SpendStackApp?ref_src=twsrc%5Etfw\">@SpendStackApp</a> on iPhones to demo their product is a huge honor for me and validation that I‚Äôm on the right track. <a href=\"https://t.co/uSGhEbv8YL\">pic.twitter.com/uSGhEbv8YL</a></p>&mdash; Jordan Morgan (@JordanMorgan10) <a href=\"https://twitter.com/JordanMorgan10/status/1224478409423716353?ref_src=twsrc%5Etfw\">February 3, 2020</a></blockquote>\n<script async=\"\" src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</div>\n\n<p>If someone saw Spend Stack at the stores, maybe they would tell me and that would be how I found out it released. Thankfully, that wasn‚Äôt necessary.</p>\n\n<p>Why? Because I straight up walked into Best Buy a few times a week to check (there‚Äôs no Apple Store by me, unfortunately). And, well - one day it was there!</p>\n\n<h3 id=\"the-payoff\">The Payoff</h3>\n<p>There is nothing quite like walking into a brick and mortar store and seeing your own app sitting there on an iPhone. It really is one of those career moments that I‚Äôll never forget. As someone who tends to be extremely critical of their work and a slight perfectionist, I find that being ‚Äúproud‚Äù or feeling ‚Äúfinished‚Äù is always <em>just</em> another milestone away.</p>\n\n<p>But as my wife noted, when I walked in there and saw it - I was unmistakably proud and fulfilled. She said my face lit up, and she caught some convert, candid pics to prove it:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/proud.jpg\" role=\"presentation\" srcset=\"../assets/images/proud.jpg\" /></p>\n\n<p>It was a lot of fun chatting it up with the Best Buy employees too:</p>\n\n<blockquote>\n  <p>Best Buy Person: Hey! Any questions about that iPhone?<br />\n Me: No, but dude - my app is on here!<br />\n Best Buy Person: Wait, what? Which one?<br />\n Me: This one!<br />\n Best Buy Person: No way! How? When? So many questions!</p>\n</blockquote>\n\n<p>They all were genuinely interested, and who knows - maybe I inadvertently created the first Spend Stack sales team üòé. On our way out, my wife and I decided to take a picture to commemorate the occasion. A kind gentleman walking by offered to take it for us:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/wifeyCakes.jpg\" role=\"presentation\" srcset=\"../assets/images/wifeyCakes.jpg\" /></p>\n\n<p>Why is that funny? Well, we‚Äôre obviously very happy in that picture. So another couple walking by asked, with a beaming expression:</p>\n\n<blockquote>\n  <p>Them: Oh my goodness, did you all just get engaged!?<br />\nMe: No, but Spend Stack got selected as a retail demo on the iPhones‚Ä¶<br />\nThem: &lt; They cut me off, looked at me weird and walked away confused before I could finish &gt;</p>\n</blockquote>\n\n<p>We still laugh about that üòú.</p>\n\n<h3 id=\"other-random-insights\">Other Random Insights</h3>\n\n<ul>\n  <li>I‚Äôve noticed that there are about 3-4 different retail demo ‚Äúline ups‚Äù.</li>\n  <li>‚Ä¶though some are very similar. For example, Spend Stack and Lifesum are mutually exclusive. They show up in the same spot (3rd page, 3rd row, 1st item I think) and if one is there, the other won‚Äôt be.</li>\n  <li>Most employees didn‚Äôt recall when their retail demo line up refreshed. It appears to be an over the air thing, which makes sense.</li>\n  <li>The timeline from start to finish was about two and a half months.</li>\n  <li>If it‚Äôs not already obvious from the article, you don‚Äôt apply for the retail demo - Apple proactively reaches out to you.</li>\n  <li>Sales wise it‚Äôs been a huge help, as Spend Stack tends to consistently chart since its retail demo release. Before, it tends to dip in and out throughout the month.</li>\n  <li>I go fairly in-depth on all of this, and talk about how my <a href=\"http://localhost:4000/A-Best-in-Class-App\">Best in Class</a> ideals may have helped Spend Stack get selected on an episode of <a href=\"https://podcasts.apple.com/us/podcast/launched/id1491582246#episodeGuid=47cc2b57-c99a-4ced-8609-74270d651bb9\">Launched.fm</a>.</li>\n  <li>Lastly, here‚Äôs a <a href=\"https://www.reddit.com/r/apple/comments/f7ugww/apple_selected_my_app_spend_stack_to_be_in_its/?utm_source=share&amp;utm_medium=i\">Reddit</a> post on <code class=\"highlighter-rouge\">r/Apple</code> where I chat about it some more while answering some questions others had.</li>\n</ul>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>You never know where our little creations will end up. While you toil away night after late night, it‚Äôs too easy to end up in that phase of doubt:</p>\n\n<ul>\n  <li>‚ÄúWill this even matter at all?‚Äù</li>\n  <li>‚ÄúWill it get a few downloads on launch and meekly wither away?‚Äù</li>\n</ul>\n\n<p>I‚Äôm telling you, I‚Äôve been there. And I have a season pass too, apparently. I revisit that space probably a little too often. You start to look at other apps and their success thinking that your own are always just a day late and a dollar short.</p>\n\n<p>But hey! <strong>Sometimes you get the win!</strong> And when you do, be sure to stop and enjoy it. You never what‚Äôs around the corner, who‚Äôs paying attention to your app or when you‚Äôll get a random email in December from Apple asking you to put your creation on thousands of iPhones with other carefully curated apps hand picked by them.</p>\n\n<p>So keep on truckin‚Äô on that next great app üí™!</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Through luck, determination and whatever other stereotypical noble quality you can conjure up, Apple selected Spend Stack to take part in their retail demo program.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-03-10T00:00:00-05:00",
            "date_modified": "2020-03-10T00:00:00-05:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/Master-Detail-Styling",
            "url": "http://localhost:4000/Master-Detail-Styling/",
            "title": "Dynamic Master Detail View Background Colors",
            "content_html": "<p>One of my goals for the next update for Spend Stack was to tighten up the design of master detail scenarios, which are prevalent on macOS and iPadOS:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_things.png\" role=\"presentation\" srcset=\"../assets/images/mdv_things.png\" /></p>\n\n<p>I‚Äôve noticed that these apps typically have a subtle contrast between the master view and the detail view (though not all, as we‚Äôll see). I decided to follow a similar pattern as well, so I started poking around to see what other apps in the wild did for this kind of thing.</p>\n\n<h3 id=\"the-examples\">The Examples</h3>\n<p>Let‚Äôs take a quick tour of how Apple‚Äôs stock apps handle the situation:</p>\n\n<p><strong>Notes</strong><br />\n<img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_notes.png\" role=\"presentation\" srcset=\"../assets/images/mdv_notes.png\" /></p>\n\n<p><strong>Files</strong><br />\n<img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_files.png\" role=\"presentation\" srcset=\"../assets/images/mdv_files.png\" /></p>\n\n<p><strong>News</strong><br />\n<img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_news.png\" role=\"presentation\" srcset=\"../assets/images/mdv_news.png\" /></p>\n\n<p><strong>Mail</strong><br />\n<img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_mail.png\" role=\"presentation\" srcset=\"../assets/images/mdv_mail.png\" /></p>\n\n<p><strong>Messages</strong><br />\n<img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_messages.png\" role=\"presentation\" srcset=\"../assets/images/mdv_messages.png\" /></p>\n\n<p><strong>Reminders</strong><br />\n<img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_reminders.png\" role=\"presentation\" srcset=\"../assets/images/mdv_reminders.png\" /></p>\n\n<p>I was surprised to see that quite a few of Cupertino &amp; Friends‚Äô¬© apps tend to use the same background color. Still, Spend Stack‚Äôs white on white in this scenario feels a little too jarring.</p>\n\n<h3 id=\"the-implementation\">The Implementation</h3>\n<p>It turns out, this is exactly the kind of task that really eats at you on updates. It was a fleeting thought I had (to address this) and I figured it wouldn‚Äôt take more than thirty minutes. In software development, that and similar phrases are always famous last words.</p>\n\n<p>But as someone who took five years to release an app, I figured another shot of feature creep wouldn‚Äôt hurt ü§†.</p>\n\n<p>After looking at Xcode‚Äôs default master-detail view template (which has no accordances for this kind of thing), I quickly tested things out using <code class=\"highlighter-rouge\">.secondaryBackground</code> for the master view - while keeping the detail view with <code class=\"highlighter-rouge\">.primaryBackground</code>. This is similar to what Mail and Reminders do.</p>\n\n<blockquote>\n  <p>If you aren‚Äôt using SwiftUI and want this process to be forty times less painless - trying using the helpful utility app <a href=\"https://apps.apple.com/us/app/adaptivity-a/id1054670022\">Adaptivity</a> to quickly reference colors.</p>\n</blockquote>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">-</span> <span class=\"p\">(</span><span class=\"n\">void</span><span class=\"p\">)</span><span class=\"nv\">traitCollectionDidChange</span><span class=\"p\">:(</span><span class=\"kt\">UITraitCollection</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">previousTraitCollection</span>\n<span class=\"p\">{</span>\n    <span class=\"p\">[</span><span class=\"k\">super</span> <span class=\"nv\">traitCollectionDidChange</span><span class=\"p\">:</span><span class=\"n\">previousTraitCollection</span><span class=\"p\">];</span>\n    \n    <span class=\"k\">if</span> <span class=\"p\">([</span><span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">traitCollection</span> <span class=\"nv\">isDifferentThanTraitCollection</span><span class=\"p\">:</span><span class=\"n\">previousTraitCollection</span><span class=\"p\">])</span>\n    <span class=\"p\">{</span>\n        <span class=\"p\">[[</span><span class=\"kt\">NSNotificationCenter</span> <span class=\"n\">defaultCenter</span><span class=\"p\">]</span> <span class=\"nv\">postNotificationName</span><span class=\"p\">:</span><span class=\"kt\">SS_TRAIT_COLLECTION_CHANGED</span> <span class=\"nv\">object</span><span class=\"p\">:</span><span class=\"kc\">nil</span><span class=\"p\">];</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"kt\">UIColor</span> <span class=\"o\">*</span><span class=\"n\">color</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"kt\">UIColor</span> <span class=\"n\">systemBackgroundColor</span><span class=\"p\">];</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">traitCollection</span><span class=\"o\">.</span><span class=\"n\">horizontalSizeClass</span> <span class=\"o\">==</span> <span class=\"kt\">UIUserInterfaceSizeClassRegular</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"n\">color</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"kt\">UIColor</span> <span class=\"n\">secondarySystemBackgroundColor</span><span class=\"p\">];</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">backgroundColor</span> <span class=\"o\">=</span> <span class=\"n\">color</span><span class=\"p\">;</span>\n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">tableView</span><span class=\"o\">.</span><span class=\"n\">backgroundColor</span> <span class=\"o\">=</span> <span class=\"n\">color</span><span class=\"p\">;</span>\n    <span class=\"c1\">// These methods do pretty much the same as above</span>\n    <span class=\"p\">[</span><span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">toolbar</span> <span class=\"n\">updateBackgroundColor</span><span class=\"p\">];</span>\n    <span class=\"p\">[</span><span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">navigationController</span> <span class=\"n\">updateBackgroundColor</span><span class=\"p\">];</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Which gets me half way there:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_firstPass.png\" role=\"presentation\" srcset=\"../assets/images/mdv_firstPass.png\" /></p>\n\n<p>Not bad - but the subtleties start to creep in.</p>\n\n<ul>\n  <li>I have to update the table view cells, easier said than done. They look okay in dark mode, but there isn‚Äôt enough contrast in light mode.</li>\n  <li>I also have to tackle both the navigation and tool bars (one of which has been busted since iOS 13, throwing me into several apoplectic fits).</li>\n  <li>And, I have to dynamically switch out styles according to trait collection changes.</li>\n</ul>\n\n<p>That last one can be a bit of a sticker. On iPadOS, you can quickly swap between a regular to compact horizontal trait collection for a number of reasons (namely, multitasking scenarios). In this case, I need to swap back and forth between the ‚Äúold‚Äù style and the master view one:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_switch.png\" role=\"presentation\" srcset=\"../assets/images/mdv_switch.png\" /></p>\n\n<p>This means my navigation, tool bars and master view all need to a get little bit smarter, more configurable or use any other of the other platter of patterns available (delegates, dependency injections, blocks or what have you). These controllers are, as you may have surmised, still written in Objective-C. Regrettably, my new favorite toy, Combine is out of the question.</p>\n\n<p>Alas, as with most of these kinds of tasks within <code class=\"highlighter-rouge\">UIKit</code>, it‚Äôs always a hop, skip and a step away from being as simple as checking the device idiom:</p>\n\n<div class=\"language-objc highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">UIColor</span> <span class=\"o\">*</span><span class=\"n\">fill</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">UIColor</span> <span class=\"nf\">systemBackgroundColor</span><span class=\"p\">];</span>\n<span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">view</span><span class=\"p\">.</span><span class=\"n\">window</span><span class=\"p\">.</span><span class=\"n\">traitCollection</span><span class=\"p\">.</span><span class=\"n\">horizontalSizeClass</span> <span class=\"o\">==</span> <span class=\"n\">UIUserInterfaceSizeClassRegular</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">fill</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">UIColor</span> <span class=\"nf\">secondarySystemBackgroundColor</span><span class=\"p\">];</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">UINavigationBarAppearance</span> <span class=\"o\">*</span><span class=\"n\">navBarAppearance</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">UINavigationBarAppearance</span> <span class=\"nf\">new</span><span class=\"p\">];</span>\n<span class=\"p\">[</span><span class=\"n\">navBarAppearance</span> <span class=\"nf\">configureWithOpaqueBackground</span><span class=\"p\">];</span>\n<span class=\"n\">navBarAppearance</span><span class=\"p\">.</span><span class=\"n\">backgroundColor</span> <span class=\"o\">=</span> <span class=\"n\">fill</span><span class=\"p\">;</span>\n<span class=\"n\">navBarAppearance</span><span class=\"p\">.</span><span class=\"n\">largeTitleTextAttributes</span> <span class=\"o\">=</span> <span class=\"p\">@{</span><span class=\"n\">NSForegroundColorAttributeName</span><span class=\"o\">:</span><span class=\"p\">[</span><span class=\"n\">UIColor</span> <span class=\"nf\">ssMainFontColor</span><span class=\"p\">]};</span>\n<span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">navigationBar</span><span class=\"p\">.</span><span class=\"n\">standardAppearance</span> <span class=\"o\">=</span> <span class=\"n\">navBarAppearance</span><span class=\"p\">;</span>\n<span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">navigationBar</span><span class=\"p\">.</span><span class=\"n\">compactAppearance</span> <span class=\"o\">=</span> <span class=\"n\">navBarAppearance</span><span class=\"p\">;</span>\n<span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">navigationBar</span><span class=\"p\">.</span><span class=\"n\">scrollEdgeAppearance</span> <span class=\"o\">=</span> <span class=\"n\">navBarAppearance</span><span class=\"p\">;</span>\n\n<span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">navigationBar</span><span class=\"p\">.</span><span class=\"n\">barTintColor</span> <span class=\"o\">=</span> <span class=\"n\">fill</span><span class=\"p\">;</span>\n\n<span class=\"c1\">// Avoid bleed on push/pop</span>\n<span class=\"n\">self</span><span class=\"p\">.</span><span class=\"n\">view</span><span class=\"p\">.</span><span class=\"n\">backgroundColor</span> <span class=\"o\">=</span> <span class=\"n\">navBarAppearance</span><span class=\"p\">.</span><span class=\"n\">backgroundColor</span><span class=\"p\">;</span>\n</code></pre></div></div>\n\n<p>That gets me closer, but I either have to propagate those changes to the table cell or check in their trait collection change events as well (the latter seems to be more appropriate, though I‚Äôve yet to get that far yet).</p>\n\n<p>There are many places where I don‚Äôt want to occur, such as modals:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_modal.png\" role=\"presentation\" srcset=\"../assets/images/mdv_modal.png\" /></p>\n\n<p>Worse yet, my navigation and toolbars are all jank-town now. That‚Äôs to be expected (as to this point, I‚Äôve just hardcoded a new color in) but I feel like navigation bar‚Äôs new API never quite does what I expect it to. For the life of me, I can‚Äôt quite get my navigation bar to respect my <code class=\"highlighter-rouge\">UINavigationBarAppearance</code> choices until it lays out its subviews.</p>\n\n<p>Here, I purposely want the navigation bar to reflect the ‚Äúold‚Äù styling, yet it doesn‚Äôt update until it does another layout pass:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/mdv_nav.gif\" role=\"presentation\" srcset=\"../assets/images/mdv_nav.gif\" /></p>\n\n<p>I use a subclassed <code class=\"highlighter-rouge\">UINavigationBar</code> throughout Spend Stack (same for the toolbar) and I won‚Äôt always want this behavior, so it‚Äôs not as simple as trait collection bookkeeping. For now, I‚Äôm leaning towards a simple <code class=\"highlighter-rouge\">bool</code> flag to pipe right into the initializer since I style each of them there, far earlier than any trait collection change might occur.</p>\n\n<p>We‚Äôll see what happens, and of course - I‚Äôll have the final product in the next version of Spend Stack, version 1.2.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "One of my goals for the next update for Spend Stack was to tighten up the design of master detail scenarios, which are prevalent on macOS and iPadOS:",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-02-05T00:00:00-06:00",
            "date_modified": "2020-02-05T00:00:00-06:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["Tech Notes"]},{
            "id": "http://localhost:4000/CollectionDifference",
            "url": "http://localhost:4000/CollectionDifference/",
            "title": "CollectionDifference",
            "content_html": "<p>In the not so distant past, it was a foregone conclusion that developers would eventually fall back to the jackhammer when it came to table or collection views: <code class=\"highlighter-rouge\">reloadData</code>.</p>\n\n<p>The reasons why were simple:</p>\n\n<p>1) Getting a diff of what‚Äôs changed in your data was hard, and <br />\n2) Mapping that with the right index paths was even harder.</p>\n\n<p>But the payoff was always worth it, a buttery smooth batch reload in your interface. And hey - you can‚Äôt make an omelet without crackin‚Äô a few eggs.</p>\n\n<p>Fast forward to today, and we can thankfully say that WWDC 2019 mercifully addressed both pain points. Today, let‚Äôs take a look at <code class=\"highlighter-rouge\">CollectionDifference</code>, a lightweight way to calculate the once elusive diff mentioned in reason #1 above.</p>\n\n<h3 id=\"the-little-struct-that-could\">The Little Struct That Could</h3>\n<p><code class=\"highlighter-rouge\">CollectionDifference</code> arrived in Swift 5.1 by way of <a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0240-ordered-collection-diffing.md\">SE-0240</a>. Authors Scott Perry and Kyle Macomber wanted a way to ‚Äúprovide an interchange format for diffs as well as diffing/patching functionality for appropriate collection types.‚Äù</p>\n\n<p>Perhaps the most telling part of their proposal, though, is where they state the following:</p>\n\n<blockquote>\n  <p>‚ÄúRepresenting, manufacturing, and applying transactions between states today requires writing a lot of error-prone code.‚Äù</p>\n</blockquote>\n\n<p>You don‚Äôt say.</p>\n\n<p>Thankfully, they took the problem to task and what we arrive at is <code class=\"highlighter-rouge\">CollectionDifference</code> - a struct that houses insertions and removals that describe the delta between two ordered collections:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">CollectionDifference</span><span class=\"o\">&lt;</span><span class=\"kt\">ChangeElement</span><span class=\"o\">&gt;</span>\n</code></pre></div></div>\n\n<p>Perhaps the highest compliment I can extend it is that the API is easy on the eyes (uncommon for diffing libraries). As we‚Äôll see, it‚Äôs typically a one or two line affair to get a diff and apply it, context depending.</p>\n\n<blockquote>\n  <p>Keep in mind this diffing capability is for <em>ordered</em> collections only. In Swift, this is any collection conforming <a href=\"https://developer.apple.com/documentation/swift/bidirectionalcollection\"><code class=\"highlighter-rouge\">BidirectionalCollection</code></a>.</p>\n</blockquote>\n\n<p>Performance-wise, the worst you can expect is O(n * m) - where <em>n</em> represents the count of the first collection, and <em>m</em> the other. You do have some influence here. If your elements conform to <code class=\"highlighter-rouge\">Hashable</code> (and why the heck wouldn‚Äôt they - we got diffable data source this year which requires it) or the collection share many common elements, expect the diff to perform better.</p>\n\n<p>Either way, since Swift is an ever-mutating project, the diffing performance has <a href=\"https://github.com/apple/swift/pull/25808\">already been improved</a> from its first incarnation by utilizing the <a href=\"http://www.xmailserver.org/diff2.pdf\">Myers algorithm</a>.</p>\n\n<h3 id=\"diffin\">Diffin‚Äô</h3>\n<p>As an API consumer, if one simply needs to diff something and move about their day, then there are two essential functions to know about which are invoked from the collections themselves:</p>\n\n<p><code class=\"highlighter-rouge\">difference(from:)</code></p>\n\n<p>and</p>\n\n<p><code class=\"highlighter-rouge\">applying(_)</code></p>\n\n<p>One to generate a diff (giving us a <code class=\"highlighter-rouge\">CollectionDifference</code>) and one to get the result of the diff by passing it in as a parameter:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">firstDraft</span> <span class=\"o\">=</span> <span class=\"s\">\"It was the best of times...\"</span>\n<span class=\"k\">let</span> <span class=\"nv\">secondDraft</span> <span class=\"o\">=</span> <span class=\"s\">\"It was the worst of times...\"</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">diff</span> <span class=\"o\">=</span> <span class=\"n\">secondDraft</span><span class=\"o\">.</span><span class=\"nf\">difference</span><span class=\"p\">(</span><span class=\"nv\">from</span><span class=\"p\">:</span><span class=\"n\">firstDraft</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">finalDraft</span> <span class=\"o\">=</span> <span class=\"n\">firstDraft</span><span class=\"o\">.</span><span class=\"nf\">applying</span><span class=\"p\">(</span><span class=\"n\">diff</span><span class=\"p\">)</span> <span class=\"c1\">// \"It was the worst of times...\"</span>\n\n<span class=\"c1\">// Or, reverse that</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">diff</span> <span class=\"o\">=</span> <span class=\"n\">firstDraft</span><span class=\"o\">.</span><span class=\"nf\">difference</span><span class=\"p\">(</span><span class=\"nv\">from</span><span class=\"p\">:</span><span class=\"n\">secondDraft</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">finalDraft</span> <span class=\"o\">=</span> <span class=\"n\">secondDraft</span><span class=\"o\">.</span><span class=\"nf\">applying</span><span class=\"p\">(</span><span class=\"n\">diff</span><span class=\"p\">)</span> <span class=\"c1\">// \"It was the best of times...\"</span>\n</code></pre></div></div>\n<p>Also note that if you need to finely tune the diff, you can also supply a closure to return a boolean based on your own equality standards:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">foo</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]</span>\n<span class=\"k\">let</span> <span class=\"nv\">bar</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">]</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">diff</span> <span class=\"o\">=</span> <span class=\"n\">bar</span><span class=\"o\">.</span><span class=\"nf\">difference</span><span class=\"p\">(</span><span class=\"nv\">from</span><span class=\"p\">:</span> <span class=\"n\">foo</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"n\">oldNum</span><span class=\"p\">,</span> <span class=\"n\">newNum</span> <span class=\"k\">in</span>\n    <span class=\"nf\">return</span> <span class=\"p\">(</span><span class=\"n\">oldNum</span> <span class=\"o\">+</span> <span class=\"n\">newNum</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"mi\">2</span> <span class=\"o\">==</span> <span class=\"mi\">0</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>The flow is identifying what you want to compare, and then getting the results of the diff into a data structure to operate on. If that‚Äôs all you need from <code class=\"highlighter-rouge\">CollectionDifference</code>, then you can hang it up and call it a day. For the curious among us, let‚Äôs look a little deeper.</p>\n\n<h3 id=\"change-enum\">Change Enum</h3>\n<p>A <code class=\"highlighter-rouge\">CollectionDifference</code> houses changes as represented by the <code class=\"highlighter-rouge\">Change</code> enum. And, since Swift‚Äôs enums are drunk with power, they house three important parts of the diff:</p>\n\n<p>1) An <code class=\"highlighter-rouge\">offset</code> Int. <br />\n2) The <code class=\"highlighter-rouge\">element</code> itself. <br />\n3) An optional Int, <code class=\"highlighter-rouge\">associatedWith</code>, that helps you track moves.</p>\n\n<p>The last one is both interesting and important. In the diff, if it moved an existing element - that‚Äôs actually a two-step dance. It‚Äôs first a removal, and then an insertion. What <code class=\"highlighter-rouge\">associatedWith</code> does it track the relationship between the two. This opens up some very nice UIKit-y scenarios.</p>\n\n<p>This, however, requires a bit more work from a performance standpoint - thus the optional Int. We don‚Äôt get very many free lunches in programming, and doubly so when it comes to diffing. So, if we want the associations, we ask for them by invoking <code class=\"highlighter-rouge\">inferringMoves</code>.</p>\n\n<p>For example, notice the association (represented by <code class=\"highlighter-rouge\">move</code>) is nil in the following print statements:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">foo</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">\"A\"</span><span class=\"p\">,</span> <span class=\"s\">\"B\"</span><span class=\"p\">,</span> <span class=\"s\">\"D\"</span><span class=\"p\">]</span>\n<span class=\"k\">let</span> <span class=\"nv\">bar</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">\"B\"</span><span class=\"p\">,</span> <span class=\"s\">\"A\"</span><span class=\"p\">,</span> <span class=\"s\">\"D\"</span><span class=\"p\">]</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">diff</span> <span class=\"o\">=</span> <span class=\"n\">bar</span><span class=\"o\">.</span><span class=\"nf\">difference</span><span class=\"p\">(</span><span class=\"nv\">from</span><span class=\"p\">:</span> <span class=\"n\">foo</span><span class=\"p\">)</span>\n\n<span class=\"k\">for</span> <span class=\"n\">update</span> <span class=\"k\">in</span> <span class=\"n\">diff</span> <span class=\"p\">{</span>\n    <span class=\"k\">switch</span> <span class=\"n\">update</span> <span class=\"p\">{</span>\n    <span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nf\">remove</span><span class=\"p\">(</span><span class=\"k\">let</span> <span class=\"nv\">offset</span><span class=\"p\">,</span> <span class=\"k\">let</span> <span class=\"nv\">letter</span><span class=\"p\">,</span> <span class=\"k\">let</span> <span class=\"nv\">move</span><span class=\"p\">):</span>\n        <span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">\"Removed </span><span class=\"se\">\\(</span><span class=\"n\">letter</span><span class=\"se\">)</span><span class=\"s\"> at idx </span><span class=\"se\">\\(</span><span class=\"n\">offset</span><span class=\"se\">)</span><span class=\"s\"> and moved to </span><span class=\"se\">\\(</span><span class=\"kt\">String</span><span class=\"p\">(</span><span class=\"nv\">describing</span><span class=\"p\">:</span> <span class=\"n\">move</span><span class=\"p\">)</span><span class=\"se\">)</span><span class=\"s\">\"</span><span class=\"p\">)</span>\n    <span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nf\">insert</span><span class=\"p\">(</span><span class=\"k\">let</span> <span class=\"nv\">offset</span><span class=\"p\">,</span> <span class=\"k\">let</span> <span class=\"nv\">letter</span><span class=\"p\">,</span> <span class=\"k\">let</span> <span class=\"nv\">move</span><span class=\"p\">):</span>\n        <span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">\"Inserted </span><span class=\"se\">\\(</span><span class=\"n\">letter</span><span class=\"se\">)</span><span class=\"s\"> at idx </span><span class=\"se\">\\(</span><span class=\"n\">offset</span><span class=\"se\">)</span><span class=\"s\"> from </span><span class=\"se\">\\(</span><span class=\"kt\">String</span><span class=\"p\">(</span><span class=\"nv\">describing</span><span class=\"p\">:</span> <span class=\"n\">move</span><span class=\"p\">)</span><span class=\"se\">)</span><span class=\"s\">\"</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/* Prints\nRemoved A at idx 0 and moved to nil\nInserted A at idx 1 from nil\n*/</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">baz</span> <span class=\"o\">=</span> <span class=\"n\">foo</span><span class=\"o\">.</span><span class=\"nf\">applying</span><span class=\"p\">(</span><span class=\"n\">diff</span><span class=\"p\">)</span> <span class=\"c1\">// [\"Z\", \"A\", \"C\"]</span>\n</code></pre></div></div>\n<p>The diff simply tells us that ‚ÄúA‚Äù at index 0 was removed, and ‚ÄúA‚Äù was inserted at index 1. But it doesn‚Äôt tell us about any potential moves, just the end result. This makes sense because we‚Äôre left with the true, and accurate, diff - so from an API perspective we shouldn‚Äôt opt in to that extra work if it‚Äôs not needed.</p>\n\n<p>If we do need it, notice how we get the associations by way of <code class=\"highlighter-rouge\">inferringMoves</code>. Consider the exact code above, just with one changes in the for-loop:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">for</span> <span class=\"n\">update</span> <span class=\"k\">in</span> <span class=\"n\">diff</span><span class=\"o\">.</span><span class=\"n\">inferringMoves</span> <span class=\"p\">{</span> <span class=\"cm\">/* code */</span> <span class=\"p\">}</span>\n\n<span class=\"cm\">/* Now prints\nRemoved A at idx 0 and moved to 1\nInserted A at idx 1 from 0\n*/</span>\n</code></pre></div></div>\n<p>Now, we can safely program against the moves.</p>\n\n<h3 id=\"applications\">Applications</h3>\n<p>While playing around with diffing, I toyed with a few applications for UIKit.</p>\n\n<p><strong>Batch Updates</strong><br />\nIf you‚Äôre unable to move to <a href=\"http://localhost:4000/Diffable-Datasource-Empty-View\">diffable data source</a>, or you‚Äôre just a complete glutton for pain - you can reasonably backport a diffing function with a little legwork for table and collection views. Since we know a non-nil association represents a move, we can map these over to index paths.</p>\n\n<p>For a single section table view, something like this works to produce a batch update:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">var</span> <span class=\"nv\">deletes</span><span class=\"p\">:[</span><span class=\"kt\">IndexPath</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">var</span> <span class=\"nv\">inserts</span><span class=\"p\">:[</span><span class=\"kt\">IndexPath</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"k\">var</span> <span class=\"nv\">moves</span><span class=\"p\">:[(</span><span class=\"nv\">from</span><span class=\"p\">:</span><span class=\"kt\">IndexPath</span><span class=\"p\">,</span> <span class=\"nv\">to</span><span class=\"p\">:</span><span class=\"kt\">IndexPath</span><span class=\"p\">)]</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n<span class=\"k\">for</span> <span class=\"n\">update</span> <span class=\"k\">in</span> <span class=\"n\">diff</span><span class=\"o\">.</span><span class=\"nf\">inferringMoves</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">switch</span> <span class=\"n\">update</span> <span class=\"p\">{</span>\n    <span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nf\">remove</span><span class=\"p\">(</span><span class=\"k\">let</span> <span class=\"nv\">offset</span><span class=\"p\">,</span> <span class=\"k\">let</span> <span class=\"nv\">element</span><span class=\"p\">,</span> <span class=\"k\">let</span> <span class=\"nv\">move</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">m</span> <span class=\"o\">=</span> <span class=\"n\">move</span> <span class=\"p\">{</span>\n            <span class=\"n\">moves</span><span class=\"o\">.</span><span class=\"nf\">append</span><span class=\"p\">((</span><span class=\"kt\">IndexPath</span><span class=\"p\">(</span><span class=\"nv\">row</span><span class=\"p\">:</span> <span class=\"n\">offset</span><span class=\"p\">,</span> <span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"kt\">IndexPath</span><span class=\"p\">(</span><span class=\"nv\">row</span><span class=\"p\">:</span> <span class=\"n\">m</span><span class=\"p\">,</span> <span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">)))</span>\n        <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n            <span class=\"n\">deletes</span><span class=\"o\">.</span><span class=\"nf\">append</span><span class=\"p\">(</span><span class=\"kt\">IndexPath</span><span class=\"p\">(</span><span class=\"nv\">row</span><span class=\"p\">:</span> <span class=\"n\">offset</span><span class=\"p\">,</span> <span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">))</span>\n        <span class=\"p\">}</span>\n    <span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nf\">insert</span><span class=\"p\">(</span><span class=\"k\">let</span> <span class=\"nv\">offset</span><span class=\"p\">,</span> <span class=\"k\">let</span> <span class=\"nv\">element</span><span class=\"p\">,</span> <span class=\"k\">let</span> <span class=\"nv\">move</span><span class=\"p\">):</span>\n        <span class=\"c1\">// If there's no move, it's a true insertion and not the result of a move.</span>\n        <span class=\"k\">if</span> <span class=\"n\">move</span> <span class=\"o\">==</span> <span class=\"kc\">nil</span> <span class=\"p\">{</span>\n            <span class=\"n\">inserts</span><span class=\"o\">.</span><span class=\"nf\">append</span><span class=\"p\">(</span><span class=\"kt\">IndexPath</span><span class=\"p\">(</span><span class=\"nv\">row</span><span class=\"p\">:</span> <span class=\"n\">offset</span><span class=\"p\">,</span> <span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">))</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">tableView</span><span class=\"o\">.</span><span class=\"nf\">performBatchUpdates</span><span class=\"p\">({</span>\n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">myData</span> <span class=\"o\">=</span> <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">myData</span><span class=\"o\">.</span><span class=\"nf\">applying</span><span class=\"p\">(</span><span class=\"n\">diff</span><span class=\"p\">)</span> <span class=\"p\">??</span> <span class=\"p\">[]</span>\n\n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">tableView</span><span class=\"o\">.</span><span class=\"nf\">deleteRows</span><span class=\"p\">(</span><span class=\"nv\">at</span><span class=\"p\">:</span> <span class=\"n\">deletes</span><span class=\"p\">,</span> <span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">left</span><span class=\"p\">)</span>\n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">tableView</span><span class=\"o\">.</span><span class=\"nf\">insertRows</span><span class=\"p\">(</span><span class=\"nv\">at</span><span class=\"p\">:</span> <span class=\"n\">inserts</span><span class=\"p\">,</span> <span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">right</span><span class=\"p\">)</span>\n    \n    <span class=\"n\">moves</span><span class=\"o\">.</span><span class=\"n\">forEach</span> <span class=\"p\">{</span> <span class=\"n\">move</span> <span class=\"k\">in</span>\n        <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">tableView</span><span class=\"o\">.</span><span class=\"nf\">moveRow</span><span class=\"p\">(</span><span class=\"nv\">at</span><span class=\"p\">:</span> <span class=\"n\">move</span><span class=\"o\">.</span><span class=\"n\">from</span><span class=\"p\">,</span> <span class=\"nv\">to</span><span class=\"p\">:</span> <span class=\"n\">move</span><span class=\"o\">.</span><span class=\"n\">to</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n    \n<span class=\"p\">},</span> <span class=\"nv\">completion</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Trying that out on a little demo app, sure enough - I was treated to batch reloads. This process was painless compared to the hoops you had to ceremoniously jump through before, and then crash on edges cases while devolving back into our burn-it-all-down ways of <code class=\"highlighter-rouge\">reloadData</code>:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/batch.gif\" role=\"presentation\" srcset=\"../assets/images/batch.gif\" /></p>\n\n<p><strong>Fresh Interfaces</strong><br />\nAnother way to give your interface a dash of that <em>je ne sais quoi</em> is to accurately represent the changes occuring with interface data. Think of an inbox type scenario where the user has seen X items, but Y items just came in from a network hit:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">currentItems</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">]</span>\n<span class=\"k\">let</span> <span class=\"nv\">newItems</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">6</span><span class=\"p\">]</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">diff</span> <span class=\"o\">=</span> <span class=\"n\">newItems</span><span class=\"o\">.</span><span class=\"nf\">difference</span><span class=\"p\">(</span><span class=\"nv\">from</span><span class=\"p\">:</span> <span class=\"n\">currentItems</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">newCount</span> <span class=\"o\">=</span> <span class=\"n\">diff</span><span class=\"o\">.</span><span class=\"n\">insertions</span><span class=\"o\">.</span><span class=\"n\">count</span>\n\n<span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">\"</span><span class=\"se\">\\(</span><span class=\"n\">newCount</span><span class=\"se\">)</span><span class=\"s\"> new items.\"</span><span class=\"p\">)</span> <span class=\"c1\">// 3 new items</span>\n\n<span class=\"n\">label</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"s\">\"</span><span class=\"se\">\\(</span><span class=\"n\">newCount</span><span class=\"se\">)</span><span class=\"s\"> new items to view.\"</span>\n</code></pre></div></div>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>Swift continues to benefit from a lot of talented engineers lending their handy work to the language. There is no denying that Cupertino &amp; Friends‚Äô¬© open-source initiative has led to brilliant work from engineers outside their walls to be enjoyed by the masses. <code class=\"highlighter-rouge\">CollectionDifference</code> is a textbook example.</p>\n\n<p>Now, go forth and serve up diffs with a newfound level of equanimity as you do so.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "In the not so distant past, it was a foregone conclusion that developers would eventually fall back to the jackhammer when it came to table or collection views: reloadData.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-01-29T00:00:00-06:00",
            "date_modified": "2020-01-29T00:00:00-06:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["Swift"]},{
            "id": "http://localhost:4000/Diffable-Datasource-Empty-View",
            "url": "http://localhost:4000/Diffable-Datasource-Empty-View/",
            "title": "Empty View With Diffable Datasource",
            "content_html": "<p>Among my favorite APIs introduced at W.W.D.C. is without a doubt the new diffable data source for both <a href=\"https://developer.apple.com/documentation/uikit/views_and_controls/collection_views/\" target=\"_blank\">table and collection views</a>. Replacing a decade old protocol, it brings about a robust way of expressing what should show when, where the truth is and, <em>finally</em>, a way to forgo the death trap that is batch updates.</p>\n\n<p>While rewriting the list view of Spend Stack, I immediately become aware of its benefits:</p>\n\n<div class=\"jekyll-twitter-plugin\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">Diffable data source is just bonkers. Literally ripping out 100s of lines of code I had to do batch updates.<br /><br />Just look at the before and after code, look at it üòÜ! Free beers for <a href=\"https://twitter.com/_breeno?ref_src=twsrc%5Etfw\">@_breeno</a> and friends next dub dub üçª <a href=\"https://t.co/Du17rdxM3t\">pic.twitter.com/Du17rdxM3t</a></p>&mdash; Jordan Morgan (@JordanMorgan10) <a href=\"https://twitter.com/JordanMorgan10/status/1217622139718774784?ref_src=twsrc%5Etfw\">January 16, 2020</a></blockquote>\n<script async=\"\" src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</div>\n\n<p>As far as user experience, batch updates are far superior to the sledgehammer approach of <code class=\"highlighter-rouge\">reloadData</code>, so this is a needed step forward. But, that‚Äôs only part of it. I‚Äôm personally a believer in showing ‚Äúempty view‚Äù states, and if you peek into Apple‚Äôs stock apps - they are too. Here‚Äôs an example of a bag with no items in the Apple Store app:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/empty.jpeg\" role=\"presentation\" srcset=\"../assets/images/empty.jpeg\" /></p>\n\n<p>Previously, I used associated objects and the <a href=\"https://gist.github.com/DreamingInBinary/e4218c00dbeff815e26426af402ca2ad\" target=\"_blank\">Objective-C Funtime to do the same thing</a> in Spend Stack:</p>\n\n<p><img class=\"lozad rounded center-img\" data-src=\"../assets/images/emptySS.jpeg\" role=\"presentation\" srcset=\"../assets/images/emptySS.jpeg\" /></p>\n\n<p>But hey - I‚Äôm being all <em>swifty</em> now, right? So I‚Äôve been thinking about how to do the same with my new bestie, diffable data source while forgoing swizzling. Here‚Äôs what I‚Äôve got so far:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">func</span> <span class=\"nf\">createSubscriptions</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">nc</span> <span class=\"o\">=</span> <span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span>\n\n    <span class=\"c1\">// Other subs..</span>\n\n    <span class=\"c1\">// The one when a list is mutated</span>\n    <span class=\"k\">let</span> <span class=\"nv\">tvAnim</span> <span class=\"o\">=</span> <span class=\"kt\">Int</span><span class=\"p\">(</span><span class=\"kt\">SSTableViewBatchUpdateAnimation</span><span class=\"p\">)</span>\n    <span class=\"k\">let</span> <span class=\"nv\">listCRUD</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"nf\">publisher</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">listCRUD</span><span class=\"p\">)</span>\n    <span class=\"o\">.</span><span class=\"n\">compactMap</span> <span class=\"p\">{</span> <span class=\"nv\">$0</span><span class=\"o\">.</span><span class=\"n\">object</span> <span class=\"k\">as?</span> <span class=\"kt\">SSList</span> <span class=\"p\">}</span>\n    <span class=\"o\">.</span><span class=\"nf\">debounce</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">milliseconds</span><span class=\"p\">(</span><span class=\"n\">tvAnim</span><span class=\"p\">),</span> <span class=\"nv\">scheduler</span><span class=\"p\">:</span> <span class=\"kt\">RunLoop</span><span class=\"o\">.</span><span class=\"n\">main</span><span class=\"p\">)</span>\n    <span class=\"o\">.</span><span class=\"n\">sink</span> <span class=\"p\">{</span> <span class=\"p\">[</span><span class=\"k\">unowned</span> <span class=\"k\">self</span><span class=\"p\">]</span> <span class=\"n\">list</span> <span class=\"k\">in</span>\n        <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"nf\">showEmptyViewIfNeeded</span><span class=\"p\">()</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"n\">subscriptions</span><span class=\"o\">.</span><span class=\"nf\">append</span><span class=\"p\">(</span><span class=\"n\">listCRUD</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>This function runs when I initialize my subclassed diffable data source (to provide for things like <code class=\"highlighter-rouge\">tableView(_ tableView: UITableView, moveRowAt sourceIndexPath:, to:)</code>). When Combine fires off the closure, I simply check if the data is empty:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">func</span> <span class=\"nf\">showEmptyViewIfNeeded</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">view</span> <span class=\"o\">=</span> <span class=\"n\">emptyView</span><span class=\"p\">,</span> <span class=\"k\">let</span> <span class=\"nv\">tv</span> <span class=\"o\">=</span> <span class=\"n\">tableView</span> <span class=\"k\">else</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"p\">}</span>\n    <span class=\"k\">let</span> <span class=\"nv\">shouldShow</span> <span class=\"o\">=</span> <span class=\"nf\">snapshot</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">itemIdentifiers</span><span class=\"o\">.</span><span class=\"n\">isEmpty</span> <span class=\"o\">&amp;&amp;</span> <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">superview</span> <span class=\"o\">==</span> <span class=\"kc\">nil</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">shouldShow</span> <span class=\"p\">{</span>\n        <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">vc</span> <span class=\"o\">=</span> <span class=\"n\">tv</span><span class=\"o\">.</span><span class=\"nf\">closestViewController</span><span class=\"p\">()</span> <span class=\"k\">else</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"p\">}</span>\n        <span class=\"n\">vc</span><span class=\"o\">.</span><span class=\"n\">view</span><span class=\"o\">.</span><span class=\"nf\">addSubview</span><span class=\"p\">(</span><span class=\"n\">view</span><span class=\"p\">)</span>\n\n        <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">constraints</span> <span class=\"o\">=</span> <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">emptyViewConstraints</span> <span class=\"p\">{</span>\n            <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">snp</span><span class=\"o\">.</span><span class=\"n\">remakeConstraints</span> <span class=\"p\">{</span> <span class=\"n\">make</span> <span class=\"k\">in</span>\n                <span class=\"nf\">constraints</span><span class=\"p\">(</span><span class=\"n\">make</span><span class=\"p\">)</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n        <span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n            <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"nf\">removeFromSuperview</span><span class=\"p\">()</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>This all works, but there are some things that need to improve. Notably, there are two core properties on my data source that need to be abstracted out in some fashion:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Properties on data source object</span>\n<span class=\"k\">var</span> <span class=\"nv\">emptyView</span><span class=\"p\">:</span><span class=\"kt\">UIView</span><span class=\"p\">?</span>\n<span class=\"k\">var</span> <span class=\"nv\">emptyViewConstraints</span><span class=\"p\">:((</span><span class=\"n\">_</span> <span class=\"nv\">make</span><span class=\"p\">:</span> <span class=\"kt\">ConstraintMaker</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Void</span><span class=\"p\">)?</span>\n\n<span class=\"c1\">// Then later on, when initializing in a view controller or something similar</span>\n<span class=\"n\">dataSource</span><span class=\"o\">.</span><span class=\"n\">emptyView</span> <span class=\"o\">=</span> <span class=\"kt\">SSEmptyStateView</span><span class=\"p\">(</span><span class=\"nv\">stateText</span><span class=\"p\">:</span> <span class=\"nf\">ss_Localized</span><span class=\"p\">(</span><span class=\"s\">\"list.vc.empty\"</span><span class=\"p\">))</span>\n<span class=\"n\">dataSource</span><span class=\"o\">.</span><span class=\"n\">emptyViewConstraints</span> <span class=\"o\">=</span> <span class=\"p\">{</span> <span class=\"p\">[</span><span class=\"k\">unowned</span> <span class=\"k\">self</span><span class=\"p\">]</span> <span class=\"n\">make</span> <span class=\"k\">in</span>\n    <span class=\"k\">let</span> <span class=\"nv\">lg</span> <span class=\"o\">=</span> <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">safeAreaLayoutGuide</span>\n    <span class=\"n\">make</span><span class=\"o\">.</span><span class=\"n\">top</span><span class=\"o\">.</span><span class=\"nf\">equalTo</span><span class=\"p\">(</span><span class=\"n\">lg</span><span class=\"o\">.</span><span class=\"n\">snp</span><span class=\"o\">.</span><span class=\"n\">top</span><span class=\"p\">)</span>\n    <span class=\"n\">make</span><span class=\"o\">.</span><span class=\"n\">bottom</span><span class=\"o\">.</span><span class=\"nf\">equalTo</span><span class=\"p\">(</span><span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">toolBar</span><span class=\"o\">.</span><span class=\"n\">snp</span><span class=\"o\">.</span><span class=\"n\">top</span><span class=\"p\">)</span>\n    <span class=\"n\">make</span><span class=\"o\">.</span><span class=\"n\">centerX</span><span class=\"o\">.</span><span class=\"nf\">equalTo</span><span class=\"p\">(</span><span class=\"n\">lg</span><span class=\"o\">.</span><span class=\"n\">snp</span><span class=\"o\">.</span><span class=\"n\">centerX</span><span class=\"p\">)</span>\n    <span class=\"n\">make</span><span class=\"o\">.</span><span class=\"n\">width</span><span class=\"o\">.</span><span class=\"nf\">equalTo</span><span class=\"p\">(</span><span class=\"n\">lg</span><span class=\"o\">.</span><span class=\"n\">snp</span><span class=\"o\">.</span><span class=\"n\">width</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Currently, the empty data view only works with this particular instance. I already know I‚Äôll need it for the rest of the app, too. As I mentioned above, in Objective-C I have an <code class=\"highlighter-rouge\">EmptyDataSetDelegate</code> protocol which is tacked onto any collection or table view via associated objects.</p>\n\n<p>I <em>could</em> do something similar, I suppose. Here are some thoughts so far.</p>\n\n<p>I could use a protocol so other types could do something similar:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">protocol</span> <span class=\"kt\">EmptyDataViewProviding</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">emptyView</span><span class=\"p\">:</span><span class=\"kt\">UIView</span><span class=\"p\">?</span> <span class=\"p\">{</span> <span class=\"k\">get</span> <span class=\"k\">set</span> <span class=\"p\">}</span>\n    <span class=\"k\">var</span> <span class=\"nv\">emptyViewConstraints</span><span class=\"p\">:((</span><span class=\"n\">_</span> <span class=\"nv\">make</span><span class=\"p\">:</span> <span class=\"kt\">ConstraintMaker</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Void</span><span class=\"p\">)?</span> <span class=\"p\">{</span> <span class=\"k\">get</span> <span class=\"k\">set</span> <span class=\"p\">}</span>\n    \n    <span class=\"kd\">func</span> <span class=\"nf\">showEmptyDataView</span><span class=\"p\">()</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Void</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p>Plus, with protocol extensions I could vend a default implementation.</p>\n\n<p>Next, I could simply extend the type. But without associated objects, I‚Äôd lose the two properties I need that describe the view and how it should be constrained.</p>\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">extension</span> <span class=\"kt\">UITableViewDiffableDataSource</span> <span class=\"p\">{</span>\n    <span class=\"kd\">func</span> <span class=\"nf\">showEmptyView</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n        <span class=\"k\">if</span> <span class=\"nf\">snapshot</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">itemIdentifiers</span><span class=\"o\">.</span><span class=\"n\">isEmpty</span> <span class=\"p\">{</span>\n            <span class=\"c1\">// Do stuff</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>At first, I attempted this route by trying to include the properties using a property wrapper implementation, but that‚Äôs not allowed in extensions as far as I can tell:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">extension</span> <span class=\"kt\">UITableViewDiffableDataSource</span> <span class=\"p\">{</span>\n    <span class=\"kd\">@AssociatedObject</span> <span class=\"nv\">var</span><span class=\"p\">:</span><span class=\"n\">emptyView</span><span class=\"p\">?</span>\n    <span class=\"kd\">@AssociatedObject</span> <span class=\"nv\">var</span><span class=\"p\">:</span><span class=\"nv\">emptyViewConstraints</span><span class=\"p\">:((</span><span class=\"n\">_</span> <span class=\"nv\">make</span><span class=\"p\">:</span> <span class=\"kt\">ConstraintMaker</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Void</span><span class=\"p\">)?</span>\n\n    <span class=\"kd\">func</span> <span class=\"nf\">showEmptyView</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n        <span class=\"k\">if</span> <span class=\"nf\">snapshot</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">itemIdentifiers</span><span class=\"o\">.</span><span class=\"n\">isEmpty</span> <span class=\"p\">{</span>\n            <span class=\"c1\">// Do stuff</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Or, perhaps plain old object oriented programming is the answer? Simply a base type that others extend. <a href=\"https://developer.apple.com/videos/play/wwdc2015/408/\">Krusty</a> would be so disappointed in me though.</p>\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"kt\">BaseDiffable</span> <span class=\"p\">:</span> <span class=\"kt\">UITableViewDiffableDataSource</span><span class=\"o\">&lt;</span><span class=\"kt\">SSListTag</span><span class=\"p\">,</span> <span class=\"kt\">SSListItem</span><span class=\"o\">&gt;</span> <span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">emptyView</span><span class=\"p\">:</span><span class=\"kt\">UIView</span><span class=\"p\">?</span>\n    <span class=\"k\">var</span> <span class=\"nv\">emptyViewConstraints</span><span class=\"p\">:((</span><span class=\"n\">_</span> <span class=\"nv\">make</span><span class=\"p\">:</span> <span class=\"kt\">ConstraintMaker</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Void</span><span class=\"p\">)?</span>\n    \n    <span class=\"k\">override</span> <span class=\"kd\">func</span> <span class=\"nf\">apply</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">snapshot</span><span class=\"p\">:</span> <span class=\"kt\">NSDiffableDataSourceSnapshot</span><span class=\"o\">&lt;</span><span class=\"kt\">SSListTag</span><span class=\"p\">,</span> <span class=\"kt\">SSListItem</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"nv\">animatingDifferences</span><span class=\"p\">:</span> <span class=\"kt\">Bool</span> <span class=\"o\">=</span> <span class=\"kc\">true</span><span class=\"p\">,</span> <span class=\"nv\">completion</span><span class=\"p\">:</span> <span class=\"p\">(()</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Void</span><span class=\"p\">)?</span> <span class=\"o\">=</span> <span class=\"kc\">nil</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"k\">super</span><span class=\"o\">.</span><span class=\"nf\">apply</span><span class=\"p\">(</span><span class=\"n\">snapshot</span><span class=\"p\">,</span> <span class=\"nv\">animatingDifferences</span><span class=\"p\">:</span><span class=\"n\">animatingDifferences</span><span class=\"p\">,</span> <span class=\"nv\">completion</span><span class=\"p\">:</span> <span class=\"n\">completion</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">snapshot</span><span class=\"o\">.</span><span class=\"n\">itemIdentifiers</span><span class=\"o\">.</span><span class=\"n\">isEmpty</span> <span class=\"p\">{</span>\n            <span class=\"c1\">// Show empty view</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>I can‚Äôt decide which I like the most. In the end, my existing Objective-C solution bridges over fine, but if I can avoid swizzling batch updates, I will.</p>\n\n<p>I‚Äôll follow up on Twitter with where I end up.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Among my favorite APIs introduced at W.W.D.C. is without a doubt the new diffable data source for both table and collection views. Replacing a decade old protocol, it brings about a robust way of expressing what should show when, where the truth is and, finally, a way to forgo the death trap that is batch updates.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2020-01-22T00:00:00-06:00",
            "date_modified": "2020-01-22T00:00:00-06:00",
            "author": {
              "name": "Jordan Morgan"},
            "tags": ["Tech Notes"]}]
}