{
    "version": "https://jsonfeed.org/version/1",
    "title": "Swiftjective-C",
    "description": "Swiftjective-C is a periodical over modern iOS software engineering. It houses tactful discussions over Swift, Objective-C and developing high quality apps while peering into various frameworks to see what makes them tick.\n",
    "home_page_url": "http://localhost:4000/",
    "feed_url": "http://localhost:4000/feed.json",
    "author": {
        "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
    "items": [
      {
            "id": "http://localhost:4000/iOS-13-Notable-UIKit-Additions",
            "url": "http://localhost:4000/iOS-13-Notable-UIKit-Additions/",
            "title": "iOS 13: Notable UIKit Additions",
            "content_html": "<p>Phew.</p>\n\n<p>This year‚Äôs WWDC has simply been a monster of the best kind. SwiftUI is a seismic shift, yet it‚Äôs <em>far</em> from the only relevant news. Now that we‚Äôve finally got a good look at iOS 13 (and, for the pedantic, iPadOS) and all it has on offer - the problem now becomes knowing where to start and how to focus your attention.</p>\n\n<p>Each year, I dive in on the latest version of iOS and try to surface some of the new APIs that our favorite framework, UIKit, has brought to the table. There is plenty to look at this year, so let‚Äôs dive right in on some of my favorite additions.</p>\n\n<p>If you want to catch up on this series first, view the <a href=\"http://localhost:4000/iOS-11-notable-uikit-additions\">iOS 11</a> and <a href=\"http://localhost:4000/iOS-12-notable-uikit-additions\">iOS 12</a> versions of this article.</p>\n\n<p>For now, let‚Äôs chat UIKit and iOS 13 centerpieces!</p>\n\n<h3 id=\"diffing\">Diffing</h3>\n<p>Last year, Apple and friends dove in on how to do batch updates the right way. It was a needed session, but the sentiment afterwards was still the same as it ever has been, <em>it‚Äôs still hard to get right</em>.</p>\n\n<p>Well, at least it was.</p>\n\n<p>Now, UIKit offers powerful diffing which pipes right on down to your collection and table views to perform batch updates on your behalf. This is accomplished via a dedicated data source object which works in tandem with snapshots of your ever mutating data.</p>\n\n<p>Take this sample data model:</p>\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">:</span> <span class=\"kt\">Hashable</span> <span class=\"p\">{</span>\n    <span class=\"kd\">static</span> <span class=\"k\">let</span> <span class=\"nv\">cellID</span> <span class=\"o\">=</span> <span class=\"s\">\"testID\"</span>\n    <span class=\"k\">let</span> <span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"kt\">String</span>\n    <span class=\"k\">let</span> <span class=\"nv\">identifier</span> <span class=\"o\">=</span> <span class=\"kt\">UUID</span><span class=\"p\">()</span>\n    <span class=\"kd\">func</span> <span class=\"nf\">hash</span><span class=\"p\">(</span><span class=\"n\">into</span> <span class=\"nv\">hasher</span><span class=\"p\">:</span> <span class=\"k\">inout</span> <span class=\"kt\">Hasher</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"n\">hasher</span><span class=\"o\">.</span><span class=\"nf\">combine</span><span class=\"p\">(</span><span class=\"n\">identifier</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n    <span class=\"kd\">static</span> <span class=\"kd\">func</span> <span class=\"o\">==</span> <span class=\"p\">(</span><span class=\"nv\">lhs</span><span class=\"p\">:</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">,</span> <span class=\"nv\">rhs</span><span class=\"p\">:</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Bool</span> <span class=\"p\">{</span>\n        <span class=\"k\">return</span> <span class=\"n\">lhs</span><span class=\"o\">.</span><span class=\"n\">identifier</span> <span class=\"o\">==</span> <span class=\"n\">rhs</span><span class=\"o\">.</span><span class=\"n\">identifier</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// And this at the controller level for brevity</span>\n<span class=\"kd\">enum</span> <span class=\"kt\">Section</span><span class=\"p\">:</span> <span class=\"kt\">CaseIterable</span> <span class=\"p\">{</span>\n    <span class=\"k\">case</span> <span class=\"n\">firstSection</span>\n    <span class=\"k\">case</span> <span class=\"n\">secondSection</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">exampleData</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"One\"</span><span class=\"p\">),</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Two\"</span><span class=\"p\">),</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Three\"</span><span class=\"p\">)]</span>\n</code></pre></div></div>\n\n<p>One can apply such a data model to populate either a table or collection view. In our case, a table view - wherein its data source is typed as such:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">var</span> <span class=\"nv\">dataSource</span><span class=\"p\">:</span> <span class=\"kt\">UITableViewDiffableDataSource</span><span class=\"o\">&lt;</span><span class=\"kt\">SectionIdentifierType</span><span class=\"p\">,</span> <span class=\"kt\">ItemIdentifierType</span><span class=\"o\">&gt;!</span>\n<span class=\"c1\">// Or a UICollectionViewDiffableDataSource</span>\n</code></pre></div></div>\n\n<p>Both the section and item identifier must be <code class=\"highlighter-rouge\">hashable</code> - and they‚Äôll correspond to your sections and their contents when initialized. So, for a single section table view with our data model, it could look like this:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">dataSource</span> <span class=\"o\">=</span> <span class=\"kt\">UITableViewDiffableDataSource</span><span class=\"o\">&lt;</span><span class=\"kt\">Section</span><span class=\"p\">,</span> <span class=\"kt\">ExampleRow</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"nv\">tableView</span><span class=\"p\">:</span> <span class=\"n\">tv</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">tableview</span><span class=\"p\">,</span> <span class=\"n\">indexPath</span><span class=\"p\">,</span> <span class=\"n\">exampleRow</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">UITableViewCell</span> <span class=\"k\">in</span>\n    <span class=\"k\">let</span> <span class=\"nv\">demoCell</span> <span class=\"o\">=</span> <span class=\"n\">tableview</span><span class=\"o\">.</span><span class=\"nf\">dequeueReusableCell</span><span class=\"p\">(</span><span class=\"nv\">withIdentifier</span><span class=\"p\">:</span> <span class=\"n\">cellIdentifier</span><span class=\"p\">,</span> <span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">indexPath</span><span class=\"p\">)</span>\n    <span class=\"n\">demoCell</span><span class=\"o\">.</span><span class=\"n\">textLabel</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"n\">exampleRow</span><span class=\"o\">.</span><span class=\"n\">title</span>\n    <span class=\"k\">return</span> <span class=\"n\">demoCell</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>This describes to the table view what the data model will look like and how it should be handled, but initially populating it something works much the same way with a concrete <code class=\"highlighter-rouge\">NSDiffableDataSourceSnapshot&lt;SectionIdentifierType, ItemIdentifierType&gt;</code>:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">snapshot</span> <span class=\"o\">=</span> <span class=\"kt\">NSDiffableDataSourceSnapshot</span><span class=\"o\">&lt;</span><span class=\"kt\">Section</span><span class=\"p\">,</span> <span class=\"kt\">ExampleRow</span><span class=\"o\">&gt;</span><span class=\"p\">()</span>\n<span class=\"n\">snapshot</span><span class=\"o\">.</span><span class=\"nf\">appendSections</span><span class=\"p\">([</span><span class=\"o\">.</span><span class=\"n\">firstSection</span><span class=\"p\">])</span>\n<span class=\"n\">snapshot</span><span class=\"o\">.</span><span class=\"nf\">appendItems</span><span class=\"p\">(</span><span class=\"n\">exampleData</span><span class=\"p\">)</span>\n<span class=\"n\">dataSource</span><span class=\"o\">.</span><span class=\"nf\">apply</span><span class=\"p\">(</span><span class=\"n\">snapshot</span><span class=\"p\">,</span> <span class=\"nv\">animatingDifferences</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Doing so would give us this:\n<img src=\"../assets/images/firstSnapshot.png\" alt=\"Data Snapshot\" /></p>\n\n<p>By applying the diff to the existing data source handler for the table view, the C.R.U.D. operations are applied. This is essentially the flow each time.</p>\n\n<p>The existing data source handler has a reference to the current diff, so if you simply wanted to add three items to our table view, it might go something like this:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">snapshot</span> <span class=\"o\">=</span> <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">dataSource</span><span class=\"o\">.</span><span class=\"nf\">snapshot</span><span class=\"p\">()</span>\n<span class=\"n\">snapshot</span><span class=\"o\">.</span><span class=\"nf\">appendItems</span><span class=\"p\">([</span><span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Six\"</span><span class=\"p\">),</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Eigth\"</span><span class=\"p\">),</span> <span class=\"kt\">ExampleRow</span><span class=\"p\">(</span><span class=\"nv\">title</span><span class=\"p\">:</span> <span class=\"s\">\"Nine\"</span><span class=\"p\">)],</span> <span class=\"nv\">toSection</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">firstSection</span><span class=\"p\">)</span>\n<span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">dataSource</span><span class=\"o\">.</span><span class=\"nf\">apply</span><span class=\"p\">(</span><span class=\"n\">snapshot</span><span class=\"p\">,</span> <span class=\"nv\">animatingDifferences</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>The result:\n<img src=\"../assets/images/secondSnapshot.png\" alt=\"Second Data Snapshot\" /></p>\n\n<p>Peering into the header for diffable snapshot reveals all sorts of things you‚Äôd want it do, such as updates, moves, etc.</p>\n\n<blockquote>\n  <p>One can apply snaphots from any queue, as well. The only requirement is consistency. So, if you update off of main, then one should <em>always</em> apply snapshots off of main.</p>\n</blockquote>\n\n<p>The flow is much different than what you were used to (a common theme for just about everything announced this year at dub dub), as reliance on a data source conformer along with index paths have less of an emphasis. But the changes are welcome, and they both eliminate a common source of friction for developers and provide a more fluid user experience to consumers.</p>\n\n<h3 id=\"compositional-layouts\">Compositional Layouts</h3>\n<p>Ever wonder how one might go about making the layout in the Apps or Games tab within the App Store on iOS? You‚Äôve got a central vertically scrolling layout, interspersed with horizontally scrolling layouts. While composing collection or table views within one another works (and is widely used), with iOS 13 - there‚Äôs a better way.</p>\n\n<p>Enter collection view‚Äôs new compositional layout:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">itemSize</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSize</span><span class=\"p\">(</span><span class=\"nv\">widthDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalWidth</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">),</span>\n                                             <span class=\"nv\">heightDimension</span><span class=\"p\">:</span><span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">))</span>\n<span class=\"k\">let</span> <span class=\"nv\">item</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutItem</span><span class=\"p\">(</span><span class=\"nv\">layoutSize</span><span class=\"p\">:</span> <span class=\"n\">itemSize</span><span class=\"p\">)</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">groupSize</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSize</span><span class=\"p\">(</span><span class=\"nv\">widthDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalWidth</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">),</span>\n                                      <span class=\"nv\">heightDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">0.25</span><span class=\"p\">))</span>\n<span class=\"k\">let</span> <span class=\"nv\">group</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutGroup</span><span class=\"o\">.</span><span class=\"nf\">horizontal</span><span class=\"p\">(</span><span class=\"nv\">layoutSize</span><span class=\"p\">:</span> <span class=\"n\">groupSize</span><span class=\"p\">,</span>\n                                                 <span class=\"nv\">subitems</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"n\">item</span><span class=\"p\">])</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">section</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSection</span><span class=\"p\">(</span><span class=\"nv\">group</span><span class=\"p\">:</span> <span class=\"n\">group</span><span class=\"p\">)</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">layout</span> <span class=\"o\">=</span> <span class=\"kt\">UICollectionViewCompositionalLayout</span><span class=\"p\">(</span><span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"n\">section</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// Now assign it as the layout</span>\n<span class=\"n\">collectionView</span> <span class=\"o\">=</span> <span class=\"kt\">UICollectionView</span><span class=\"p\">(</span><span class=\"nv\">frame</span><span class=\"p\">:</span> <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">bounds</span><span class=\"p\">,</span> <span class=\"nv\">collectionViewLayout</span><span class=\"p\">:</span> <span class=\"n\">layout</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>The above code produces a table view like experience, where each row spans the full width of the view and each row is about one quarter of its height. At first glance, one might assume our old line breaking layout of yore, <code class=\"highlighter-rouge\">UICollectionViewFlowLayout</code>, would yield the same results with less code.</p>\n\n<p>And you‚Äôre right. But looking at it purely with those optics is also missing the point. As the name suggests, composability comes naturally with this new layout. Looking closer we can see by reading from bottom to top that:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// An item's size</span>\n<span class=\"k\">let</span> <span class=\"nv\">itemSize</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSize</span><span class=\"p\">(</span><span class=\"nv\">widthDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalWidth</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">),</span>\n                                             <span class=\"nv\">heightDimension</span><span class=\"p\">:</span><span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">))</span>\n\n<span class=\"c1\">// An item in a group</span>\n<span class=\"k\">let</span> <span class=\"nv\">item</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutItem</span><span class=\"p\">(</span><span class=\"nv\">layoutSize</span><span class=\"p\">:</span> <span class=\"n\">itemSize</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// A group size</span>\n<span class=\"k\">let</span> <span class=\"nv\">groupSize</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSize</span><span class=\"p\">(</span><span class=\"nv\">widthDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalWidth</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">),</span>\n                                      <span class=\"nv\">heightDimension</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">0.25</span><span class=\"p\">))</span>\n\n<span class=\"c1\">// A group has a group size with items</span>\n<span class=\"k\">let</span> <span class=\"nv\">group</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutGroup</span><span class=\"o\">.</span><span class=\"nf\">horizontal</span><span class=\"p\">(</span><span class=\"nv\">layoutSize</span><span class=\"p\">:</span> <span class=\"n\">groupSize</span><span class=\"p\">,</span>\n                                                 <span class=\"nv\">subitems</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"n\">item</span><span class=\"p\">])</span>\n\n<span class=\"c1\">// A section has groups</span>\n<span class=\"k\">let</span> <span class=\"nv\">section</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSection</span><span class=\"p\">(</span><span class=\"nv\">group</span><span class=\"p\">:</span> <span class=\"n\">group</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// A layout has sections</span>\n<span class=\"k\">let</span> <span class=\"nv\">layout</span> <span class=\"o\">=</span> <span class=\"kt\">UICollectionViewCompositionalLayout</span><span class=\"p\">(</span><span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"n\">section</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>‚Ä¶it builds on top of itself with a (mostly) <em>has a</em> relationship. This means more complex layouts can be achieved with far less cognitive load than it used to require. Code is read much more than it‚Äôs written, and this setup makes layouts easier to reason about.</p>\n\n<p>I think Apple saw this, too. Collection view has been around since iOS 6, and in 2018 they gave us the aforementioned session on how to do custom layouts sprinkled with a ‚ÄúWe know you find this a bit difficult‚Äù kind of sentiment.</p>\n\n<p>Going further, compositional layout gives us this notion of a <code class=\"highlighter-rouge\">NSCollectionLayoutDimension</code>. Using it, one could size things many different ways:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">fractionalHeight</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutDimension</span><span class=\"o\">.</span><span class=\"nf\">fractionalHeight</span><span class=\"p\">(</span><span class=\"mf\">1.0</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">absoluteHeight</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutDimension</span><span class=\"o\">.</span><span class=\"nf\">absolute</span><span class=\"p\">(</span><span class=\"mf\">44.0</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">estimatedHeight</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutDimension</span><span class=\"o\">.</span><span class=\"nf\">estimated</span><span class=\"p\">(</span><span class=\"mi\">64</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Even better, one can easily mix and match an axis to scroll on, a l√° the App Store scenario, by way of <code class=\"highlighter-rouge\">UICollectionLayoutSectionOrthogonalScrollingBehavior</code>:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">section</span> <span class=\"o\">=</span> <span class=\"kt\">NSCollectionLayoutSection</span><span class=\"p\">(</span><span class=\"nv\">group</span><span class=\"p\">:</span> <span class=\"n\">group</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// Default scrolling, more or less</span>\n<span class=\"n\">section</span><span class=\"o\">.</span><span class=\"n\">orthogonalScrollingBehavior</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">continuous</span>\n\n<span class=\"c1\">// Rests at the leading edge of the *group's* boundary</span>\n<span class=\"n\">section</span><span class=\"o\">.</span><span class=\"n\">orthogonalScrollingBehavior</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">continuousGroupLeadingBoundary</span>\n\n<span class=\"c1\">// Hey, we know this one! Paging driven by the collection view's bounds.</span>\n<span class=\"n\">section</span><span class=\"o\">.</span><span class=\"n\">orthogonalScrollingBehavior</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">paging</span>\n\n<span class=\"c1\">// Paging is driven by the section layout group's dimension</span>\n<span class=\"n\">section</span><span class=\"o\">.</span><span class=\"n\">orthogonalScrollingBehavior</span> <span class=\"o\">=</span> <span class=\"n\">groupPaging</span> \n</code></pre></div></div>\n\n<p>The API design is very well put together and lends itself well to later refactors. And, though I cannot assert with absolute authority that it was Steve Breen who authored it, anyone who rolls up to dub dub to emcee a session wearing a T-Shirt with wolves on it while wearing blue jeans is someone who goes so hard in the paint that I wouldn‚Äôt even question it if it weren‚Äôt.</p>\n\n<p>Steve Breen is the G.O.A.T. of dub dub talks - and I‚Äôve learned quite a lot from all of his content so far. For all of the hoorahs SwiftUI has (deservedly so) received, it can be easy to forget that engineers such as Steve are still here to ensure UIKit stays relevant, efficient and a pragmatic choice to build apps with.</p>\n\n<blockquote>\n  <p>You may have asked yourself why the <code class=\"highlighter-rouge\">NS</code> prefix is here in a <code class=\"highlighter-rouge\">UIKit</code> world? Catalyst, and UIKit for Mac, is likely the reason.</p>\n</blockquote>\n\n<h3 id=\"scenes\">Scenes</h3>\n<p>When it comes to vanilla UIKit, this is probably the most foundational change. At its core, scenes allow for iPadOS to kick off multiple instances of your app even though they still all run within one process. Though, even if you aren‚Äôt targeting iPadOS - it‚Äôs still a wise choice to adopt the model in your app. The tea leaves are here and they aren‚Äôt exactly subtle.</p>\n\n<p>Create a new project using the single view template in Xcode 11 and look at the files:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">AppDelegate</span><span class=\"o\">.</span><span class=\"n\">swift</span>\n<span class=\"kt\">SceneDelegate</span><span class=\"o\">.</span><span class=\"n\">swift</span> <span class=\"c1\">// New, conforms to UIWindowSceneDelegate</span>\n</code></pre></div></div>\n\n<p>And in the <code class=\"highlighter-rouge\">info.plist</code>:</p>\n\n<div class=\"language-xml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nt\">&lt;key&gt;</span>UIApplicationSceneManifest<span class=\"nt\">&lt;/key&gt;</span>\n    <span class=\"nt\">&lt;dict&gt;</span>\n        <span class=\"nt\">&lt;key&gt;</span>UIApplicationSupportsMultipleScenes<span class=\"nt\">&lt;/key&gt;</span>\n        <span class=\"nt\">&lt;true/&gt;</span>\n        <span class=\"nt\">&lt;key&gt;</span>UISceneConfigurations<span class=\"nt\">&lt;/key&gt;</span>\n        <span class=\"nt\">&lt;dict&gt;</span>\n            <span class=\"nt\">&lt;key&gt;</span>UIWindowSceneSessionRoleApplication<span class=\"nt\">&lt;/key&gt;</span>\n            <span class=\"nt\">&lt;array&gt;</span>\n                <span class=\"nt\">&lt;dict&gt;</span>\n                    <span class=\"nt\">&lt;key&gt;</span>UILaunchStoryboardName<span class=\"nt\">&lt;/key&gt;</span>\n                    <span class=\"nt\">&lt;string&gt;</span>LaunchScreen<span class=\"nt\">&lt;/string&gt;</span>\n                    <span class=\"nt\">&lt;key&gt;</span>UISceneConfigurationName<span class=\"nt\">&lt;/key&gt;</span>\n                    <span class=\"nt\">&lt;string&gt;</span>Default Configuration<span class=\"nt\">&lt;/string&gt;</span>\n                    <span class=\"nt\">&lt;key&gt;</span>UISceneDelegateClassName<span class=\"nt\">&lt;/key&gt;</span>\n                    <span class=\"nt\">&lt;string&gt;</span>$(PRODUCT_MODULE_NAME).SceneDelegate<span class=\"nt\">&lt;/string&gt;</span>\n                    <span class=\"nt\">&lt;key&gt;</span>UISceneStoryboardFile<span class=\"nt\">&lt;/key&gt;</span>\n                    <span class=\"nt\">&lt;string&gt;</span>Main<span class=\"nt\">&lt;/string&gt;</span>\n                <span class=\"nt\">&lt;/dict&gt;</span>\n            <span class=\"nt\">&lt;/array&gt;</span>\n        <span class=\"nt\">&lt;/dict&gt;</span>\n    <span class=\"nt\">&lt;/dict&gt;</span>\n<span class=\"nt\">&lt;/key&gt;</span>\n</code></pre></div></div>\n\n<p>The path of least resistance is to conceptually take your root view construction out of the app delegate, and instead consider the concept of several scenes that could occur - and assign views to those.</p>\n\n<p>The .plist approach, of course, isn‚Äôt the only way. You can skip the manifest and roll it in code:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// In your app delegate objecet...</span>\n<span class=\"kd\">func</span> <span class=\"nf\">application</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">application</span><span class=\"p\">:</span> <span class=\"kt\">UIApplication</span><span class=\"p\">,</span> <span class=\"n\">configurationForConnecting</span> <span class=\"nv\">connectingSceneSession</span><span class=\"p\">:</span> <span class=\"kt\">UISceneSession</span><span class=\"p\">,</span> <span class=\"nv\">options</span><span class=\"p\">:</span> <span class=\"kt\">UIScene</span><span class=\"o\">.</span><span class=\"kt\">ConnectionOptions</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">UISceneConfiguration</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"kt\">UISceneConfiguration</span><span class=\"p\">(</span><span class=\"nv\">name</span><span class=\"p\">:</span> <span class=\"s\">\"Default Configuration\"</span><span class=\"p\">,</span> <span class=\"nv\">sessionRole</span><span class=\"p\">:</span> <span class=\"n\">connectingSceneSession</span><span class=\"o\">.</span><span class=\"n\">role</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// And then in your scene delegate</span>\n<span class=\"kd\">func</span> <span class=\"nf\">scene</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">scene</span><span class=\"p\">:</span> <span class=\"kt\">UIScene</span><span class=\"p\">,</span> <span class=\"n\">willConnectTo</span> <span class=\"nv\">session</span><span class=\"p\">:</span> <span class=\"kt\">UISceneSession</span><span class=\"p\">,</span> <span class=\"n\">options</span> <span class=\"nv\">connectionOptions</span><span class=\"p\">:</span> <span class=\"kt\">UIScene</span><span class=\"o\">.</span><span class=\"kt\">ConnectionOptions</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">windowScene</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">scene</span> <span class=\"k\">as?</span> <span class=\"kt\">UIWindowScene</span><span class=\"p\">)</span> <span class=\"k\">else</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"p\">}</span>\n    <span class=\"k\">let</span> <span class=\"nv\">window</span> <span class=\"o\">=</span> <span class=\"kt\">UIWindow</span><span class=\"p\">(</span><span class=\"nv\">windowScene</span><span class=\"p\">:</span> <span class=\"n\">windowScene</span><span class=\"p\">)</span>\n    <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">rootViewController</span> <span class=\"o\">=</span> <span class=\"kt\">UIViewController</span><span class=\"p\">()</span>\n    <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"nf\">makeKeyAndVisible</span><span class=\"p\">()</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>This is a larger subject that I‚Äôm personally excited to dive more into, as other app-delegatey things have also moved (such as accepting CloudKit shares). The shift from thinking of an app delegate as a keeper of multiple sessions instead of a 1:1 execution flow allows for all sorts of exciting scenarios.</p>\n\n<h3 id=\"glyphs-and-images\">Glyphs and Images</h3>\n<p>No doubt you‚Äôve heard about a 1,500+ strong icon pack that the crack Apple design team has provided. For the curious among us, you can even download a <a href=\"https://developer.apple.com/design/downloads/SF-Symbols.dmg\" target=\"_blank\">dedicated macOS app</a> to view them all right now.</p>\n\n<p><em>Cool! An icon pack!</em></p>\n\n<p>Nay, it‚Äôs much more than that. The subtleties are what become difficult about glpyhs - getting them all in the correct weights and sizes, ensuring sure line heights stay in harmony with system fonts or making them big when they should be and small when they shouldn‚Äôt.</p>\n\n<p>And, that‚Äôs only after you‚Äôve got them all exported out and then tack on the time it takes to maintain them. But that‚Äôs pre iOS 13, because a lot of these pain points have been solved:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// A pencil glyph</span>\n<span class=\"k\">let</span> <span class=\"nv\">glyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"p\">(</span><span class=\"nv\">systemName</span><span class=\"p\">:</span> <span class=\"s\">\"pencil\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// Or overload it according to a traitCollection or image config</span>\n<span class=\"k\">let</span> <span class=\"nv\">canExpandGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"p\">(</span><span class=\"nv\">systemName</span><span class=\"p\">:</span> <span class=\"s\">\"square.split.2x1\"</span><span class=\"p\">,</span> <span class=\"nv\">compatibleWith</span><span class=\"p\">:</span> <span class=\"n\">regularWidthCollection</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">didExpandGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"p\">(</span><span class=\"nv\">systemName</span><span class=\"p\">:</span> <span class=\"s\">\"square.split.2x1.filled\"</span><span class=\"p\">,</span> <span class=\"nv\">compatibleWith</span><span class=\"p\">:</span> <span class=\"n\">compactWidthCollection</span><span class=\"o\">.</span><span class=\"p\">)</span>\n</code></pre></div></div>\n<p>While other overloads and techniques exist, that code sample is enough to get you up and going. And that‚Äôs a good thing.</p>\n\n<p>Another little gimme <code class=\"highlighter-rouge\">UIImage</code> has given us are class level instances for common user experience actions, like closing or adding an item:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">closeGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"o\">.</span><span class=\"n\">close</span>\n<span class=\"k\">let</span> <span class=\"nv\">addGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"o\">.</span><span class=\"n\">add</span>\n<span class=\"k\">let</span> <span class=\"nv\">removeGlyph</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"o\">.</span><span class=\"n\">remove</span>\n</code></pre></div></div>\n\n<p>These are just convenience initializers (not in the concrete Swift term) that boil down to what Cupertino and Friends¬© have deemed most appropriate for those items. For example, in the first beta of iOS 13, <code class=\"highlighter-rouge\">UIImage.close</code> is returning the ‚Äúxmark‚Äù glyph.</p>\n\n<p>Going further, with the highlighted emphasis Apple has placed upon <code class=\"highlighter-rouge\">UITraitCollection</code>, it‚Äôs not a lot of work to make an image (or color) toggle based upon the trait collection housing it. See this <a href=\"https://gist.github.com/timonus/8b4feb47eccb6dde47ca6320d8fc6b11\" target=\"_blank\">gist</a>, via <a href=\"https://twitter.com/timonus\" target=\"_blank\">Tim</a>, to get a feel for what that looks like.</p>\n\n<h3 id=\"bonus---grouped-inset\">Bonus - Grouped Inset</h3>\n<p>This is a small one, albeit one that we should have seen coming for the last year. If you follow <a href=\"https://github.com/ResearchKit/ResearchKit\" target=\"_blank\">Research Kit‚Äôs</a> development, then it was clear where iOS was taking some of its new table view styles:</p>\n\n<p><img src=\"../assets/images/RK2Stable.png\" alt=\"Research Kit 2.0\" /></p>\n\n<p>The grouped table view hearkens back to the original grouped style, yet it adds a subtle corner radius to the beginning and end cells. The Research Kit team added this style as part of its version 2 release. It‚Äôs a style that‚Äôs easily achieved on your own, but why would you?</p>\n\n<p>Enter <a href=\"https://developer.apple.com/documentation/uikit/uitableview/style/insetgrouped\" target=\"_blank\">.groupedInset</a>:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">tableView</span> <span class=\"o\">=</span> <span class=\"kt\">UITableView</span><span class=\"p\">(</span><span class=\"nv\">frame</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">zero</span><span class=\"p\">,</span> <span class=\"nv\">style</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">insetGrouped</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>Now, you‚Äôll get this new style for free.</p>\n\n<h3 id=\"double-bonus---uitraitcollection\">Double Bonus - UITraitCollection</h3>\n<p>I alluded to this earlier, but seriously! So much changed with trait collections, so much was added and so much responsibility was bequeathed unto it with iOS 13 that you just need to book up on it. It‚Äôs a post for another day, but many would-be problems were solved with it in iOS 13, making things like dark mode friendly to adopt.</p>\n\n<h3 id=\"final-thoughts\">Final Thoughts</h3>\n<p>WWDC 2019 will certainly be remembered as the year SwiftUI started. With such a powerfully abstracted declarative framework, who knows where it might end up. I can‚Äôt believe I‚Äôm writing this, but SwiftUI could end up being the best way to create even Android apps years from now (doubtful, <em>but</em> not as doubtful as that statement was before last week).</p>\n\n<p>But, even though SwiftUI is <em>not</em> UIKit, the latter is certainly here to stay. And this year, it became better than it ever has been.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Phew.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-06-07T00:00:00-05:00",
            "date_modified": "2019-06-07T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["UIKit"]},{
            "id": "http://localhost:4000/WWDC-2019-The-Pregame-Quiz",
            "url": "http://localhost:4000/WWDC-2019-The-Pregame-Quiz/",
            "title": "WWDC 2019: The Pregame Quiz",
            "content_html": "<p>Dark mode, Marzipan and who knows what else await us which means we‚Äôre not far from Tim Cook and Friends revealing iOS 13 to the world. With a ton of services announcements already taken care of such as Apple TV+, Apple News+ and more - the tea leaves indicate that they‚Äôre going hard on pure API news this year.</p>\n\n<p>At this point it‚Äôs all conjecture, so let‚Äôs ready up with the fifth annual Swiftjective-C WWDC Pregame Quiz!</p>\n\n<p>If you‚Äôd like a quick primer on how this all works or how it got started, check out the first four quizzes from <a href=\"http://localhost:4000/WWDC-2015-The-Pregame-Quiz\">2015</a> ,<a href=\"http://localhost:4000/WWDC-2016-The-Pregame-Quiz\">2016</a>, <a href=\"http://localhost:4000/WWDC-2017-The-Pregame-Quiz\">2017</a> and <a href=\"http://localhost:4000/WWDC-2018-The-Pregame-Quiz\">2018</a>.</p>\n\n<p>Now - Lets.Play(with:üî•)!</p>\n\n<h3 id=\"ground-rules\">Ground Rules</h3>\n\n<p>There are three rounds, and the point break down is as follows:</p>\n\n<ul>\n  <li><strong>Round 1</strong> ‚Äì 1 point each answer</li>\n  <li><strong>Round 2</strong> - 2 points each answer</li>\n  <li><strong>Round 3</strong> - 3 points each answer</li>\n</ul>\n\n<p>The last question of each round is an optional wildcard question. Get it right, and your team gets <strong>4</strong> <strong>points</strong>, <em>but</em> miss it and the team will be <strong>deducted 2 points</strong>.</p>\n\n<h3 id=\"round-1swift-decisions\">Round 1‚Ää‚Äî‚ÄäSwift Decisions</h3>\n\n<p><strong>Question 1:</strong><br />\nWhat‚Äôs the name of the Swift attribute, added in Swift 5 to bolster dynamic language interoperability, that allows one to call named types like you‚Äôd call functions using a simple syntactic sugar?</p>\n\n<p>Example:</p>\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"err\">@</span><span class=\"p\">(</span><span class=\"n\">the</span> <span class=\"n\">attribute</span> <span class=\"n\">name</span><span class=\"p\">)</span> <span class=\"kd\">struct</span> <span class=\"kt\">SwiftjectiveC</span> \n<span class=\"p\">{</span>\n    <span class=\"kd\">func</span> <span class=\"nf\">showArticles</span><span class=\"p\">(</span><span class=\"nv\">withTags</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"kt\">String</span><span class=\"p\">])</span> <span class=\"p\">{}</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">instance</span> <span class=\"o\">=</span> <span class=\"kt\">SwiftjectiveC</span><span class=\"p\">()</span>\n\n<span class=\"nf\">instance</span><span class=\"p\">(</span><span class=\"s\">\"Foundation\"</span><span class=\"p\">,</span> <span class=\"s\">\"Swift\"</span><span class=\"p\">)</span>\n<span class=\"c1\">// This will desugar down to instance.showArticles(withTags: [\"Foundation\", \"Swift\"])</span>\n</code></pre></div></div>\n\n<p><strong>Question 2:</strong><br />\nIn Swift, variables are initialized before they are used by a concept enforced by LLVM‚Äôs optimizer. What is this concept in computer science referred to as?</p>\n\n<p><strong>Question 3:</strong><br />\nSIMD Vector and Result types were finally added to Swift in an official capacity in what version?</p>\n\n<p><strong>Question 4:</strong> <br />\nBefore Apple‚Äôs Swift was announced, there already existed a parallel programming language by the same name - who were its developers?</p>\n\n<p><strong>Wildcard:</strong><br />\nBefore Swift was a popular programming language at Apple, it was also the codename for an Apple-designed processor - which one was it?</p>\n\n<h3 id=\"round-2ios-history-101\">Round 2‚Ää‚Äî‚ÄäiOS History 101</h3>\n\n<p><strong>Question 1:</strong><br />\nAuto Layout, long a core component of laying out user interfaces on macOS, didn‚Äôt arrive on iOS until which major release?</p>\n\n<p><strong>Question 2:</strong><br />\nSecurity is a hallmark feature of iOS, and this specific feature involves placing data in random locations in memory and works alongside ARM‚Äôs XN (Execute Never) feature to prevent buffer overflow attacks - what is it?</p>\n\n<p><strong>Question 3:</strong><br />\nWhen iOS was still shrouded in secrecy within Apple, how old was the youngest engineer working on iOS 1.0?</p>\n\n<p><strong>Question 4:</strong> <br />\nWhen the iPhone was first launched on June 29th, 2007 its operating system wasn‚Äôt yet referred to as iOS until iOS 4. What was its original name?</p>\n\n<p><strong>Wildcard:</strong><br />\nLeading the way to haggle all of your friends who appear as green bubbles in your conversations, in which version of iOS did iMessage debut?</p>\n\n<h3 id=\"round-3apple-myth-and-lore\">Round 3‚Ää‚Äî‚ÄäApple Myth and Lore</h3>\n\n<p><strong>Question 1:</strong><br />\nLeading up to its March 25th, 2019 ‚ÄúIt‚Äôs Showtime‚Äù keynote, Apple live streamed Carplay displaying a six hour ride - where was its end destination?</p>\n\n<p><strong>Question 2:</strong><br />\nSteve Jobs, long known as being a master of details, hotly debated <em>what</em> aspect of an Apple Store‚Äôs bathroom signs?</p>\n\n<p><strong>Question 3:</strong><br />\nWhat was the very first thing <em>ever</em> rendered in a Safari browser, produced by Ken Kocienda during its development?</p>\n\n<p><strong>Question 4:</strong> <br />\nTo ensure that a visiting Ross Perot wouldn‚Äôt think Apple and its employees were too rich for investment - Steve Jobs had himself and Randy Adams hide what objects before he arrived?</p>\n\n<p><strong>Wildcard:</strong><br />\nWhat original Apple employee quickly sold off their 10% share of the company in 1977 for only $800 (which would be worth billions today)?</p>\n\n<h3 id=\"answer-key\">Answer Key</h3>\n<p><b>Round 1:</b></p>\n<ol>\n  <li><a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0216-dynamic-callable.md\">@dynamicCallable</a></li>\n  <li><a href=\"http://localhost:4000on-definitive-initialization/\">Definitive Initialization.</a></li>\n  <li>Swift 5.</li>\n  <li>The University of Chicago and Argonne National Laboratory.</li>\n  <li>Wildcard: <a href=\"https://en.wikipedia.org/wiki/List_of_Apple_codenames\">The Apple A6 and A6X chips.</a></li>\n</ol>\n\n<p><b>Round 2:</b></p>\n<ol>\n  <li>iOS 6.</li>\n  <li>Address Space Layout Randomization.</li>\n  <li>18 years old, Scott Goodson.</li>\n  <li>iPhone OS.</li>\n  <li>Wildcard: iOS 5.</li>\n</ol>\n\n<p><b>Round 3:</b></p>\n<ol>\n  <li>Cupertino.</li>\n  <li><a href=\"https://www.businessinsider.com/steve-jobs-attention-to-detail-2011-10#when-he-was-hospitalized-he-rejected-masks-because-they-were-ugly-8\">The shade of gray they should be colored as.</a></li>\n  <li><a href=\"https://asciiwwdc.com/2014/sessions/237\">A black obelisk!</a> Fun fact, it actually rendered in the wrong direction.</li>\n  <li><a href=\"https://www.forbes.com/sites/connieguglielmo/2012/10/03/untold-stories-about-steve-jobs-friends-and-colleagues-share-their-memories/#4932fdc6c584\">Their Porsche 911s</a></li>\n  <li>Wildcard: One of its oft forgotten co-founders, Ronald Wayne.</li>\n</ol>",
            "summary": "Dark mode, Marzipan and who knows what else await us which means we‚Äôre not far from Tim Cook and Friends revealing iOS 13 to the world. With a ton of services announcements already taken care of such as Apple TV+, Apple News+ and more - the tea leaves indicate that they‚Äôre going hard on pure API news this year.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-05-23T00:00:00-05:00",
            "date_modified": "2019-05-23T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["Trivia"]},{
            "id": "http://localhost:4000/NSSecureCoding%20copy",
            "url": "http://localhost:4000/NSSecureCoding-copy/",
            "title": "NSSecureCoding",
            "content_html": "<p>Every year when Apple announces a new operating system, I find myself transfixed to the now famous word cloud slide (or tag or bubble cloud depending on who you ask). I‚Äôm talking about the ‚ÄúOh Yeahs‚Äù and the ‚ÄúWe also did this‚Äù API changes that weren‚Äôt deemed worthy enough of a call out during the keynote or state of the union address. Thus, such changes will find themselves relegated to its own cozy corner within the word cloud slide.</p>\n\n<p>However, I find that I have quite a predilection for such API changes. The ones that might not make the press or be the chatter among devs undoubtedly taking over each coffee shop in San Jose are the ones which are often extremely valuable to our work. They just aren‚Äôt as ‚Äúsexy‚Äù, as such, the spotlight eludes them.</p>\n\n<p>This week, let‚Äôs chat about one such enhancement that‚Äôs been around since iOS 6, <code class=\"highlighter-rouge\">NSSecureCoding</code>.</p>\n\n<h3 id=\"archiving-and-serialization\">Archiving and Serialization</h3>\n<p>Every iOS app will eventually be a consumer, or producer, of some sort of data. This data can represent itself in several different ways, each of which requires its own nuanced approach in terms of security and how its used:</p>\n\n<ul>\n  <li><strong>Raw Data:</strong> The actual stream of bites representing information.</li>\n  <li><strong>Primitive Data:</strong> A <a href=\"https://en.wikipedia.org/wiki/Unicode#UTF\" target=\"_blank\">UTF</a> representation of primitive data. On iOS, this typically ends up as JSON.</li>\n  <li><strong>Structured Data:</strong> This is how you‚Äôve chosen to model your data in a strongly typed way. Think of taking some primitive data, and injecting it into a model.</li>\n</ul>\n\n<p>At each point in the life cycle of some data, there are different ways in which developers must handle it. For example, if you are expecting a tiny text file to be returned from your server - you might be tipped off that something is dreadfully wrong if the file is ten gigs when its still in a primitive state:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">struct</span> <span class=\"kt\">DataChecks</span> \n<span class=\"p\">{</span>\n    <span class=\"kd\">static</span> <span class=\"k\">let</span> <span class=\"nv\">maxTextSize</span> <span class=\"o\">=</span> <span class=\"mi\">1048576</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">textData</span> <span class=\"o\">=</span> <span class=\"nf\">someTextFile</span><span class=\"p\">()</span>\n\n<span class=\"k\">guard</span> <span class=\"n\">textData</span><span class=\"o\">.</span><span class=\"n\">length</span> <span class=\"o\">&lt;</span> <span class=\"kt\">DataChecks</span><span class=\"o\">.</span><span class=\"n\">maxTextSize</span> <span class=\"k\">else</span> \n<span class=\"p\">{</span>\n    <span class=\"c1\">// Funny business</span>\n    <span class=\"k\">return</span>\n<span class=\"p\">}</span>\n\n</code></pre></div></div>\n\n<p>Conversely, one would also be aware of some tomfoolery afoot if deserializing that data to JSON brought about a much different result:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">data</span> <span class=\"o\">=</span> <span class=\"kt\">NSData</span><span class=\"p\">()</span>\n<span class=\"k\">let</span> <span class=\"nv\">parsedJSON</span><span class=\"p\">:</span><span class=\"kt\">Any</span>\n\n<span class=\"k\">do</span> <span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">option</span> <span class=\"o\">=</span> <span class=\"kt\">JSONSerialization</span><span class=\"o\">.</span><span class=\"kt\">ReadingOptions</span><span class=\"p\">(</span><span class=\"nv\">rawValue</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n\n    <span class=\"c1\">// If this works, we know the data will be strings/arrays/etc.</span>\n    <span class=\"c1\">// Things like XML, for example, would fail here.</span>\n    <span class=\"n\">parsedJSON</span> <span class=\"o\">=</span> <span class=\"k\">try</span> <span class=\"kt\">JSONSerialization</span><span class=\"o\">.</span><span class=\"nf\">jsonObject</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">data</span> <span class=\"k\">as</span> <span class=\"kt\">Data</span><span class=\"p\">,</span> <span class=\"nv\">options</span><span class=\"p\">:</span> <span class=\"n\">option</span><span class=\"p\">)</span>\n<span class=\"p\">}</span> <span class=\"k\">catch</span> <span class=\"p\">{</span> <span class=\"cm\">/* Dragons.here */</span> <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Whether its by using a some type of checksum on a raw data blob or ensuring primitive data becomes what you expect it to, as a programmer you‚Äôre actively taking steps to make sure that the data you‚Äôre playing with, plays nice.</p>\n\n<p>Then, down the road, the data eventually needs to make its way on disk. Consider this example of caching some posts in a hypothetical blogging app:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"kt\">Post</span><span class=\"p\">:</span> <span class=\"kt\">NSCoding</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">var</span> <span class=\"nv\">title</span><span class=\"p\">:</span><span class=\"kt\">String</span><span class=\"p\">?</span>\n\n    <span class=\"c1\">// For brevity these are unimplemented...</span>\n    <span class=\"kd\">func</span> <span class=\"nf\">encode</span><span class=\"p\">(</span><span class=\"n\">with</span> <span class=\"nv\">aCoder</span><span class=\"p\">:</span> <span class=\"kt\">NSCoder</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span> <span class=\"cm\">/* Imagine this is donesis */</span> <span class=\"p\">}</span>\n    \n    <span class=\"kd\">required</span> <span class=\"nf\">init</span><span class=\"p\">?(</span><span class=\"n\">coder</span> <span class=\"nv\">aDecoder</span><span class=\"p\">:</span> <span class=\"kt\">NSCoder</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span> <span class=\"cm\">/* And this too */</span> <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// Later on down the road, you might do something like this...</span>\n<span class=\"kd\">func</span> <span class=\"nf\">updatePostsCache</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">saveURL</span> <span class=\"o\">=</span> <span class=\"kt\">URL</span><span class=\"p\">(</span><span class=\"nv\">fileURLWithPath</span><span class=\"p\">:</span> <span class=\"s\">\"someDestination\"</span><span class=\"p\">)</span>\n    <span class=\"k\">let</span> <span class=\"nv\">archiver</span> <span class=\"o\">=</span> <span class=\"kt\">NSKeyedArchiver</span><span class=\"o\">.</span><span class=\"nf\">archivedData</span><span class=\"p\">(</span><span class=\"nv\">withRootObject</span><span class=\"p\">:</span> <span class=\"n\">posts</span><span class=\"p\">)</span>\n    <span class=\"k\">try</span><span class=\"p\">?</span> <span class=\"n\">archiver</span><span class=\"o\">.</span><span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"nv\">to</span><span class=\"p\">:</span> <span class=\"n\">saveURL</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// And eventually get it back out...</span>\n<span class=\"k\">let</span> <span class=\"nv\">postCache</span><span class=\"p\">:[</span><span class=\"kt\">Data</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"cm\">/* Data loaded up */</span>\n<span class=\"k\">let</span> <span class=\"nv\">posts</span> <span class=\"o\">=</span> <span class=\"k\">try</span> <span class=\"n\">postCache</span><span class=\"o\">.</span><span class=\"n\">map</span> <span class=\"p\">{</span> <span class=\"n\">postData</span> <span class=\"k\">in</span>\n    <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">postBlob</span> <span class=\"o\">=</span> <span class=\"k\">try</span> <span class=\"kt\">NSKeyedUnarchiver</span><span class=\"o\">.</span><span class=\"nf\">unarchiveTopLevelObject</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">postData</span><span class=\"p\">),</span> <span class=\"k\">let</span> <span class=\"nv\">post</span> <span class=\"o\">=</span> <span class=\"n\">postBlob</span> <span class=\"k\">as?</span> <span class=\"kt\">Post</span> <span class=\"k\">else</span> <span class=\"p\">{</span> <span class=\"k\">throw</span> <span class=\"cm\">/* Error handling */</span> <span class=\"p\">}</span>\n    <span class=\"k\">return</span> <span class=\"n\">post</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>And, just like the scenarios above, malicious actors could step in at this point as well. Foundation would rather not have that happen, but it also could use your help to ensure that it doesn‚Äôt.</p>\n\n<h3 id=\"understanding-the-unarchiving-pipeline\">Understanding the Unarchiving Pipeline</h3>\n<p>To get a feel for how things could go wrong here, it‚Äôs key to understand what exactly <code class=\"highlighter-rouge\">NSKeyedUnarchiver</code> is doing when it unarchives your structured data. When your data is stored, it‚Äôll look a little something like this in the archive:</p>\n\n<div class=\"language-json highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"s2\">\"$class\"</span><span class=\"p\">:</span><span class=\"s2\">\"Post\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"s2\">\"title\"</span><span class=\"p\">:</span><span class=\"s2\">\"...\"</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n\n<p>Later on, when one goes to pull it back out via unarchiving, <code class=\"highlighter-rouge\">NSKeyedUnarchiver</code> will dynamically look for a class with the same name of the key (passed in via its initializer) in your app‚Äôs bundle. Then, a few things happen:</p>\n\n<ul>\n  <li>An instance of that class gets allocated in memory</li>\n  <li>Then, it‚Äôs initialized to allow it to decode</li>\n  <li>Lastly, <code class=\"highlighter-rouge\">awakeAfter(using:)</code> gets invoked to allow for any final state considerations</li>\n</ul>\n\n<p>That all looks reasonable, but consider this - the unarchiver will do this on <em>whatever</em> key you pass. So if a #TerribleHumanBeing injected some nonsense in there, this is what happens:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">unarchiver</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">forKey</span><span class=\"p\">:</span> <span class=\"kt\">NSKeyedArchiverRootObjectKey</span><span class=\"p\">)</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">alloc</span><span class=\"p\">()</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">init</span><span class=\"p\">?(</span><span class=\"nv\">coder</span><span class=\"p\">:)</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">awakeAfer</span><span class=\"p\">(</span><span class=\"nv\">using</span><span class=\"p\">:)</span>\n</code></pre></div></div>\n\n<p>üò±.</p>\n\n<p>Under the hood, when we invoked <code class=\"highlighter-rouge\">unarchiveTopLevelObject(with:)</code> an instance of <code class=\"highlighter-rouge\">KSKeyedUnarchiver</code> popped up and tried to decode an object for the given key. Now, you can see why this line really matters:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">postBlob</span> <span class=\"o\">=</span> <span class=\"k\">try</span> <span class=\"kt\">NSKeyedUnarchiver</span><span class=\"o\">.</span><span class=\"nf\">unarchiveTopLevelObject</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">postData</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>‚Ä¶because even though we‚Äôll fail since the downcast will not pass, and even though we‚Äôll discard the object - the archiver still could‚Äôve just allocated some BS.</p>\n\n<p>And said BS could do a few different things to really flip your biscuits.</p>\n\n<p>Perhaps it might change some global state üíÄ!<br />\nOr initialize some sort of singleton üôÖüèª‚Äç‚ôÇÔ∏è!<br />\n‚Ä¶or perform any other attack vector that they can dream up ‚ö∞Ô∏è.<br /></p>\n\n<blockquote>\n  <p>You might think that‚Äôs dramatic, but archives can be maliciously constructed. Plus, if <a href=\"https://twitter.com/stroughtonsmith/status/1123741346425180161?s=20\" target=\"_blank\">Steve Troughton-Smith</a> can make Marzipan work when Marzipan isn‚Äôt released on apps that he doesn‚Äôt have the source code too - trust no one.</p>\n</blockquote>\n\n<p>So what‚Äôs a dev to do? Of course, the answer is to use <code class=\"highlighter-rouge\">NSSecureCoding</code> - and even better, it‚Äôs typically <em>a one line change</em>.</p>\n\n<h3 id=\"secure-serialization\">Secure Serialization</h3>\n<p>The <code class=\"highlighter-rouge\">NSSecureCoding</code> protocol directly inherits from <code class=\"highlighter-rouge\">NSCoding</code> - and as the name implies it performs the same functions as its parent but in a more secure fashion. Using it, we‚Äôll avoid any arbitrary code execution attacks as mentioned above.</p>\n\n<p>Normally, I‚Äôd dive into the intricacies of the API - but this one only adds a single static boolean property for you to override at the class level.</p>\n\n<p>Continuing with our <code class=\"highlighter-rouge\">Post</code> class:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"kt\">Post</span><span class=\"p\">:</span> <span class=\"kt\">NSSecureCoding</span>\n<span class=\"p\">{</span>\n    <span class=\"kd\">static</span> <span class=\"k\">var</span> <span class=\"nv\">supportsSecureCoding</span><span class=\"p\">:</span> <span class=\"kt\">Bool</span> <span class=\"p\">{</span>\n        <span class=\"k\">get</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"kc\">true</span> <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"c1\">// The rest of the class code omitted for brevity</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Now, the archivers will subtly change their process:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Before secure coding</span>\n<span class=\"n\">decoder</span><span class=\"o\">.</span><span class=\"nf\">decodeObjectForKey</span><span class=\"p\">(</span><span class=\"s\">\"Posts\"</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// After</span>\n<span class=\"n\">decoder</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">of</span><span class=\"p\">:</span><span class=\"kt\">Post</span><span class=\"o\">.</span><span class=\"k\">self</span><span class=\"p\">,</span> <span class=\"nv\">forKey</span><span class=\"p\">:</span> <span class=\"s\">\"Posts\"</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>This makes all the difference, because now archivers can directly preflight its contents to ensure it has the types you expect when secure coding is used.</p>\n\n<p>Internally, this is achieved by some bookkeeping done for us by archivers creating an <em>allowed class list</em>. This list contains all of the classes that can be securely decoded and encoded. Think of it as some malformed naughty or nice list, but only real and not used by a portly man donning a red suit.</p>\n\n<p>Considering it, here‚Äôs what the process above looks like now:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">unarchiver</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">of</span><span class=\"p\">:</span><span class=\"kt\">Post</span><span class=\"o\">.</span><span class=\"k\">self</span><span class=\"p\">,</span> <span class=\"nv\">forKey</span><span class=\"p\">:</span> <span class=\"kt\">NSKeyedArchiverRootObjectKey</span><span class=\"p\">)</span>\n<span class=\"c1\">// Class check would fail if it's not a post, and then return with a failure</span>\n<span class=\"c1\">// Thus, this code below would no longer happen...</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">alloc</span><span class=\"p\">()</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">init</span><span class=\"p\">?(</span><span class=\"nv\">coder</span><span class=\"p\">:)</span>\n<span class=\"kt\">BadTerribleThings</span><span class=\"o\">.</span><span class=\"nf\">awakeAfer</span><span class=\"p\">(</span><span class=\"nv\">using</span><span class=\"p\">:)</span>\n</code></pre></div></div>\n\n<blockquote>\n  <p>You can see this list yourself, as coders have a set property containing its contents: <code class=\"highlighter-rouge\">aCoder.allowedClasses</code></p>\n</blockquote>\n\n<p>Crisis averted, but <code class=\"highlighter-rouge\">NSSecureCoding</code> also comes with another bonus: static type checking. If you‚Äôve got any manual decode calls with conditional downcasts, those can now go away</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Before</span>\n<span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">myPost</span> <span class=\"o\">=</span> <span class=\"n\">coder</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">forKey</span><span class=\"p\">:</span><span class=\"s\">\"Post\"</span><span class=\"p\">)</span> <span class=\"k\">as?</span> <span class=\"kt\">Post</span>\n\n<span class=\"c1\">// After</span>\n<span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">myPost</span> <span class=\"o\">=</span> <span class=\"n\">coder</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">of</span><span class=\"p\">:</span><span class=\"kt\">Post</span><span class=\"o\">.</span><span class=\"k\">self</span> <span class=\"nv\">forKey</span><span class=\"p\">:</span><span class=\"s\">\"Post\"</span><span class=\"p\">)</span> \n</code></pre></div></div>\n\n<p>However, there are a few other intricacies around subclasses to consider. If one‚Äôs class <em>doesn‚Äôt</em> override <code class=\"highlighter-rouge\">init(coder:)</code>, it can still conform to <code class=\"highlighter-rouge\">NSSecureCoding</code> without any changes if it‚Äôs a subclass of another class that does conform. Though, if it does override <code class=\"highlighter-rouge\">init(coder:)</code> it also must decode any nested objects using <code class=\"highlighter-rouge\">decodeObjectOfClass:forKey</code>:.</p>\n\n<h3 id=\"on-failing\">On Failing</h3>\n<p>When decoding fails as above, whether by a programmer‚Äôs error or malicious intent, it‚Äôs known as a secure decoding violation. Additionally, other failure states exist, such as a type mismatch (expecting an object and receiving a primitive) or perhaps the archive faces corruption.</p>\n\n<p>What happens in this scenario is entirely up to you, and you can control it via <code class=\"highlighter-rouge\">NSDecodingPolicyFailure</code></p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">enum</span> <span class=\"kt\">NSCoder</span><span class=\"o\">.</span><span class=\"kt\">NSDecodingFailurePolicy</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">case</span> <span class=\"n\">raiseException</span>\n    <span class=\"k\">case</span> <span class=\"n\">setErrorAndReturn</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>The default choice is to raise an exception, but you can opt for a simple error assignment to the coder and continue execution. So, if it indeed a class injection were occurring, it‚Äôd fail and the coder would invoke <code class=\"highlighter-rouge\">failWithError(_ error: Error)</code>.</p>\n\n<p>Recall that Swift can‚Äôt catch Objective-C or++ exceptions, so be thoughtful here. If you‚Äôd opt for <code class=\"highlighter-rouge\">setErrorAndReturn</code> the coder will have its error property set, and it would return nil. You can also tailor this error to be specific for your own use case:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Assume class injection, a failure from corruption, etc</span>\n<span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">post</span> <span class=\"o\">=</span> <span class=\"n\">unarchiver</span><span class=\"o\">.</span><span class=\"nf\">decodeObject</span><span class=\"p\">(</span><span class=\"nv\">of</span><span class=\"p\">:</span><span class=\"kt\">Post</span><span class=\"o\">.</span><span class=\"k\">self</span><span class=\"p\">,</span> <span class=\"nv\">forKey</span><span class=\"p\">:</span> <span class=\"s\">\"Post\"</span><span class=\"p\">)</span> <span class=\"k\">else</span> \n<span class=\"p\">{</span>\n    <span class=\"n\">unarchiver</span><span class=\"o\">.</span><span class=\"nf\">failWithError</span><span class=\"p\">(</span><span class=\"kt\">CocoaError</span><span class=\"o\">.</span><span class=\"nf\">error</span><span class=\"p\">(</span><span class=\"o\">.</span><span class=\"n\">coderValueNotFound</span><span class=\"p\">))</span>\n    <span class=\"k\">return</span> <span class=\"kc\">nil</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\">// obj will be nil, or 0 if its a primitive type</span>\n<span class=\"c1\">// Now handle the populated error however you see fit</span>\n</code></pre></div></div>\n\n<h3 id=\"bonus-points-why-now\">Bonus Points: Why Now?</h3>\n<p>Aside from my love of writing about the outliers of iOS, why write a post about an API that‚Äôs quite old in iOS years? The answer is that I suspect more developers will be wanting for more information over it shortly. Starting with iOS 12, the legacy way of using both keyed archiver/unarchiver are now deprecated:</p>\n\n<p><img src=\"../assets/images/badCoder.jpg\" alt=\"Deprecation\" /></p>\n\n<p>The deprecations means both classes gained new variants of <a href=\"https://developer.apple.com/documentation/foundation/nskeyedunarchiver/2983380-unarchivedobject\" target=\"_blank\">those methods</a> which allow for <a href=\"https://developer.apple.com/documentation/foundation/nskeyedarchiver/2962880-archiveddata\" target=\"_blank\">gated class checks</a> as well.</p>\n\n<p>Further, support for adhering on a per-class basis with the class boolean, <code class=\"highlighter-rouge\">supportSecureCoding</code>, was only added in iOS 10. So, with iOS 13 on the horizon - this means that the lot of us will turn to iOS 12 as our minimum build target, thus the non-secure archiving deprecation will be showing in serialization scenarios within Xcode all over the world quite soon.</p>\n\n<h3 id=\"wrapping-up\">Wrapping Up</h3>\n<p>Refactoring all of ones archiving and serialization pipeline to make sure its vending the intended class might not be the most thrilling task on the backlog. But it‚Äôs a quick win, and it yields a more secure app.</p>\n\n<p>And if we‚Äôre being honest, the chances of a malicious attack targeting your app through this particular vector might be slim. But it never happens <em>until it does</em>. Plus, when the tide goes out - you can tell who was skinny dipping. Don‚Äôt be the dev who got toasted because they forgot to use a more secure archiving technique.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Every year when Apple announces a new operating system, I find myself transfixed to the now famous word cloud slide (or tag or bubble cloud depending on who you ask). I‚Äôm talking about the ‚ÄúOh Yeahs‚Äù and the ‚ÄúWe also did this‚Äù API changes that weren‚Äôt deemed worthy enough of a call out during the keynote or state of the union address. Thus, such changes will find themselves relegated to its own cozy corner within the word cloud slide.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-05-03T00:00:00-05:00",
            "date_modified": "2019-05-03T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["Foundation"]},{
            "id": "http://localhost:4000/making-pancakes",
            "url": "http://localhost:4000/making-pancakes/",
            "title": "I Made Some Pancakes",
            "content_html": "<p>Wouldn‚Äôt you know it - today I made some pancakes for breakfast. I know, I know - pics or it didn‚Äôt happen:</p>\n\n<p><img src=\"../assets/images/pancakes.jpg\" alt=\"DopePancakes\" /></p>\n\n<p>And it was the weirdest thing.</p>\n\n<p>As I was sitting there mixing up the batter, getting the cast iron skillet heated up <em>just</em> right - I found myself humming along as I popped on Spotify to give me some tunes to push these from good-enough pancakes to straight up artisanal masterpieces. I wasn‚Äôt rushed at all. For whatever reason, I was only completely focused on making these pancakes and I was having the time of my life.</p>\n\n<p>For me, that‚Äôs huge.</p>\n\n<h3 id=\"what-i-wasnt-thinking-of\">What I Wasn‚Äôt Thinking Of</h3>\n<p>Life is busy for all of us. As a married dad of three kiddos, I find myself objectively busier than I used to be. Given that, I find that there‚Äôs times when my mental space and anxiety can constantly be playing their ‚ÄúGreatest Hits‚Äù album over and over:</p>\n\n<ul>\n  <li>How can I find time to release this side project?</li>\n  <li>Will it even matter when I do? <a href=\"http://localhost:4000/the-chart-that-lies\" target=\"_blank\">Time spent on it doesn‚Äôt really matter.</a></li>\n  <li>Beyond side projects, how do I do even better at my job?</li>\n  <li>Oh yeah - real life. When am I going to finish all of this laundry?</li>\n  <li>I‚Äôm so close to being out of debt, it‚Äôs exhausting putting all my disposable income towards it.</li>\n  <li>But then, do I just trade debt payments for saving for a down payment on a house? I want to enjoy my good income for once! Maybe I‚Äôll buy a new iPad.</li>\n  <li>Hmm, that‚Äôs a lot though. Wow, you know what - it‚Äôs crazy that my oldest will need a cell phone before I know it!</li>\n  <li>Oh shoot - <strong>all</strong> of my kids will need a cell phone üò¨!</li>\n  <li>and a car üò¨üò¨,</li>\n  <li>and go to college üò¨üò¨üò¨,</li>\n  <li>and also probably get married üò¨üò¨üò¨üò¨.</li>\n  <li>üíÄ.</li>\n</ul>\n\n<p>The point is, I typically would not take time to make any pancakes. Let alone, during a weekday. There‚Äôs just too much to do that I simply can‚Äôt afford myself the joy of cracking open a box of premade pancake batter and seeing them through to fruition. Ouch.</p>\n\n<h3 id=\"when-life-hits-you-with-a-sigabrt\">When Life Hits You with a SIGABRT()</h3>\n<p>When you find yourself thinking ahead so fast that you can‚Äôt take the time to make pancakes, or enjoy a movie on Netflix or just take 15 minutes to talk with a loved one - you have to realize that‚Äôs your brain telling you to quite literally relax.</p>\n\n<p>If you‚Äôre at this point, you might be carrying on like I do when I need to chill out but haven‚Äôt realized it yet:<br /><br />\n<strong>Did your mom call you?</strong> <em>I‚Äôll call back later, I need to finish this post.</em> <br />\n<strong>Is it nice outside?</strong> <em>I‚Äôll take the walk another time, this project needed to finish up yesterday.</em><br />\n<strong>A new video game out you‚Äôd enjoy?</strong> <em>I‚Äôll play it later, I‚Äôve gotta ship my side project now so I can learn from users, otherwise I won‚Äôt be following the lean startup principles!</em><br /></p>\n\n<p>You aren‚Äôt at all a bad person if you do these things, I think we all do. Most texts suggest ways to avoid those situations all together, but I personally don‚Äôt find that a realistic goal.</p>\n\n<p>No matter the epiphany you experience today, tomorrow or the next week you‚Äôll eventually start back on your old ways. I think that‚Äôs healthy, actually - if we didn‚Äôt, we‚Äôd never start back in on working towards our goals again. Like anything - the answer is balance.</p>\n\n<h3 id=\"finding-the-pancake-moments\">Finding the Pancake Moments</h3>\n\n<p>Why was it that I felt so peaceful, calm and balanced today? Enough to wake up early and jam on some delish pancakes. I‚Äôve yearned to answer that type of question for a long time. And, being an engineer, long ago I started to document my ‚Äúpancake‚Äù moments when they did pop up to later try extrapolate why they arrived.</p>\n\n<p>What I‚Äôve found really isn‚Äôt that exciting. There are a few commonalities among the corpus - such as a vacation or time off on the horizon, a date night with my wife, a fun event with one of my kids is coming, etc. But as I dug deeper into my Day One journal archives, I began to realize that I typically only journal when I‚Äôm at a high point.</p>\n\n<p>This was convenient for my current investigation, but the reality is that I couldn‚Äôt really nail down why sometimes I take time for myself, and other times I don‚Äôt. This time, I‚Äôd have to accept that this wasn‚Äôt a problem I could analyze several different ways and apply a few late nights to eventually uncover the answer to.</p>\n\n<blockquote>\n  <p>As a funny aside, when I was digging through my journal during this time my wife popped around the corner and casually asked ‚ÄúWatcha doin?‚Äù. I said I was simply reading my journal, as saying I was in the middle of an in-depth investigation into why I can let myself relax enough to make pancakes and generally be normal was too odd of an answer.</p>\n</blockquote>\n\n<p>The truth is that taking time to enjoy life‚Äôs many simple pleasures isn‚Äôt something that‚Äôs a trivial matter. If it was, there wouldn‚Äôt be numerous books, conferences or classes explaining how to do it. This blog post certainly doesn‚Äôt offer up the silver bullet either.</p>\n\n<p>What we can do, then, is simply take our own advice - <em>savor</em> and <em>enjoy</em> those little ‚Äúpancake‚Äù moments when they come. Even if we can‚Äôt replicate them systemically, we can take heart that there is assuredly another one on the horizon.</p>\n\n<p>Conversely, just as important is being sure not to put them off. If you do, you‚Äôre the lucky winner of free conference tickets to BurnOut Conf. Neglecting some time for yourself is like putting a band-aid over a bullet hole. Eventually, you‚Äôre gonna feel it.</p>\n\n<h3 id=\"wrapping-up\">Wrapping Up</h3>\n<p>As indie developers, we find ourselves punishing our drive and a perceived lack-thereof if we don‚Äôt spend each free moment working towards our app, but then we put ourselves into a mental rut if we always do. But honestly, I‚Äôm kinda okay with life‚Äôs ebbs and flows - enjoying the times when I‚Äôm magnificently firing on all cylinders and all is in order, as much as the chaotic weeks where I feel like everything is just not working out.</p>\n\n<p>This isn‚Äôt a novel, new or groundbreaking realization. In fact, any of your favorite authors found on the interwebs have likely written about it in their own way at some point.</p>\n\n<p>And yet - so often I find myself needing to be reminded of it.</p>\n\n<p>So if I may be so bold, perhaps you don‚Äôt need a huge life change, to work constantly to ship the side project, or read a self help book while implementing some other drastic change (or maybe you do, that‚Äôs cool too honestly).</p>\n\n<p>Maybe you just need to make some freakin‚Äô pancakes ü•û.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Wouldn‚Äôt you know it - today I made some pancakes for breakfast. I know, I know - pics or it didn‚Äôt happen:",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-04-02T00:00:00-05:00",
            "date_modified": "2019-04-02T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/iCloud-Photo-Handling",
            "url": "http://localhost:4000/iCloud-Photo-Handling/",
            "title": "Handling iCloud Assets",
            "content_html": "<p>There is a reason Cupertino &amp; Friends¬© encourage us to leverage UIKit and its components in our own apps.</p>\n\n<p>They have a decade‚Äôs worth of talent and hardening baked right into them. While you should stray from a mechanism that can undermine your own structure, sometimes you just need to roll up your sleeves, toss Apple‚Äôs preheated solutions to the side and do it yourself. Building your own version of component X or Y is fatalistic in software development, after all.</p>\n\n<p>That‚Äôs where we find ourselves this week. While <code class=\"highlighter-rouge\">UIImagePickerController</code> has a lot baked in and should be used most of the time, this post is about that <em>other</em> time.</p>\n\n<p>And, if you find yourself building a media picker, fetching assets found in iCloud can be deceptively tricky.</p>\n\n<h3 id=\"fetch-options\">Fetch Options</h3>\n<p>Everything in the Photos framework is generally vended via a manager singleton (i.e. <code class=\"highlighter-rouge\">PHImageManager</code>, <code class=\"highlighter-rouge\">PHCachingImageManager</code>) - and what you want to retrieve from them is specified in from an optional options object, <code class=\"highlighter-rouge\">PHFetchOptions</code>.</p>\n\n<p>Generally, if you ran this code and saw images getting piped back to you - it‚Äôd be easy to call it a day:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// In viewDidLoad</span>\n<span class=\"k\">let</span> <span class=\"nv\">mostRecentMedia</span> <span class=\"o\">=</span> <span class=\"kt\">PHFetchOptions</span><span class=\"p\">()</span>\n<span class=\"n\">mostRecentMedia</span><span class=\"o\">.</span><span class=\"n\">sortDescriptors</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"kt\">NSSortDescriptor</span><span class=\"p\">(</span><span class=\"nv\">key</span><span class=\"p\">:</span> <span class=\"s\">\"creationDate\"</span><span class=\"p\">,</span> <span class=\"nv\">ascending</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">)]</span>\n<span class=\"k\">let</span> <span class=\"nv\">allPhotos</span><span class=\"p\">:</span><span class=\"kt\">PHFetchResult</span> <span class=\"o\">=</span> <span class=\"kt\">PHAsset</span><span class=\"o\">.</span><span class=\"nf\">fetchAssets</span><span class=\"p\">(</span><span class=\"nv\">with</span><span class=\"p\">:</span> <span class=\"n\">mostRecentMedia</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// In a cellForRow for a collection or table view</span>\n<span class=\"k\">let</span> <span class=\"nv\">asset</span> <span class=\"o\">=</span> <span class=\"n\">allPhotos</span><span class=\"o\">.</span><span class=\"nf\">object</span><span class=\"p\">(</span><span class=\"nv\">at</span><span class=\"p\">:</span> <span class=\"n\">indexPath</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"kt\">CGSize</span><span class=\"p\">(</span><span class=\"nv\">width</span><span class=\"p\">:</span> <span class=\"mi\">80</span><span class=\"p\">,</span> <span class=\"nv\">height</span><span class=\"p\">:</span> <span class=\"mi\">80</span><span class=\"p\">)</span>\n\n<span class=\"kt\">PHCachingImageManager</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"nf\">requestImage</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">asset</span><span class=\"p\">,</span> <span class=\"nv\">targetSize</span><span class=\"p\">:</span> <span class=\"n\">size</span><span class=\"p\">,</span> <span class=\"nv\">contentMode</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">aspectFill</span><span class=\"p\">,</span> <span class=\"nv\">options</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">,</span> <span class=\"nv\">resultHandler</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"n\">image</span><span class=\"p\">,</span> <span class=\"n\">_</span> <span class=\"k\">in</span>\n    <span class=\"c1\">// Ensure we're dealing with the same cell when the asset returns</span>\n    <span class=\"c1\">// In case its since been recycled</span>\n    <span class=\"k\">if</span> <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"n\">localAssetID</span> <span class=\"o\">==</span> <span class=\"n\">asset</span><span class=\"o\">.</span><span class=\"n\">localIdentifier</span> \n    <span class=\"p\">{</span>\n        <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"n\">theImageViewImage</span> <span class=\"o\">=</span> <span class=\"n\">image</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n<p>While the Photos Framework does benefit from sensible API design, it‚Äôs a somewhat hidden forgone conclusion that media living in iCloud will be staying there from the previous code sample. Adding to the possible confusion is that they will technically appear from the fetch, as their corresponding <code class=\"highlighter-rouge\">PHAsset</code> will be returned - it‚Äôs just that looking for the media yields no result:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">PHCachingImageManager</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"nf\">requestImage</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">asset</span><span class=\"p\">,</span> <span class=\"nv\">targetSize</span><span class=\"p\">:</span> <span class=\"n\">size</span><span class=\"p\">,</span> <span class=\"nv\">contentMode</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">aspectFill</span><span class=\"p\">,</span> <span class=\"nv\">options</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">,</span> <span class=\"nv\">resultHandler</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"n\">image</span><span class=\"p\">,</span> <span class=\"n\">_</span> <span class=\"k\">in</span>\n    <span class=\"k\">if</span> <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"n\">localAssetID</span> <span class=\"o\">==</span> <span class=\"n\">asset</span><span class=\"o\">.</span><span class=\"n\">localIdentifier</span> \n    <span class=\"p\">{</span>\n        <span class=\"c1\">// Media found in iCloud will report a nil result for the image here</span>\n        <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"n\">theImageViewImage</span> <span class=\"o\">=</span> <span class=\"n\">image</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n<p>Considering fetching an image‚Äôs common use case, such as displaying them in a grid, you can add other common bugs to this scenario as well such as cell reuse.</p>\n\n<p>Lipso facto - if you ran this code and saw no images being populated even though assets were being fetched, it can be hard to know where to look.</p>\n\n<h3 id=\"in-the-clouds\">In the Clouds</h3>\n<p>The first step to solving a problem isn‚Äôt really admitting you have one in programming, it‚Äôs identifying really what you‚Äôre trying to solve to begin with. And here, we need to know how to identify which assets are indeed housed within iCloud and not yet on the device.</p>\n\n<p>Hitting the Googles can yield some straight up wild solutions, partly due to the fact that Apple doesn‚Äôt have a simple <code class=\"highlighter-rouge\">isIniCloud</code> boolean to indicate as much. The answer for us is housed within the <code class=\"highlighter-rouge\">info</code> dictionary that pervades much of UIKit‚Äôs closures.</p>\n\n<p>For our previous fetch, we can reliably know if the asset is in iCloud via the <code class=\"highlighter-rouge\">PHImageResultIsInCloudKey</code> key that will be returned in the aforementioned dictionary:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">PHCachingImageManager</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"nf\">requestImage</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">asset</span><span class=\"p\">,</span> <span class=\"nv\">targetSize</span><span class=\"p\">:</span> <span class=\"n\">size</span><span class=\"p\">,</span> <span class=\"nv\">contentMode</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">aspectFill</span><span class=\"p\">,</span> <span class=\"nv\">options</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">,</span> <span class=\"nv\">resultHandler</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"n\">image</span><span class=\"p\">,</span> <span class=\"n\">info</span> <span class=\"k\">in</span>\n    <span class=\"k\">if</span> <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"n\">localAssetID</span> <span class=\"o\">==</span> <span class=\"n\">asset</span><span class=\"o\">.</span><span class=\"n\">localIdentifier</span> \n    <span class=\"p\">{</span>\n        <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">img</span> <span class=\"o\">=</span> <span class=\"n\">image</span> <span class=\"k\">else</span> \n        <span class=\"p\">{</span> \n            <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">isIniCloud</span> <span class=\"o\">=</span> <span class=\"n\">info</span><span class=\"p\">?[</span><span class=\"kt\">PHImageResultIsInCloudKey</span><span class=\"p\">]</span> <span class=\"k\">as?</span> <span class=\"kt\">NSNumber</span><span class=\"p\">,</span> <span class=\"n\">isIniCloud</span><span class=\"o\">.</span><span class=\"n\">boolValue</span> <span class=\"o\">==</span> <span class=\"kc\">true</span>\n            <span class=\"p\">{</span>\n                <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"nf\">showLoadingFromCloudUI</span><span class=\"p\">()</span>\n            <span class=\"p\">}</span>\n\n            <span class=\"k\">return</span>\n        <span class=\"p\">}</span>\n\n        <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"n\">theImageViewImage</span> <span class=\"o\">=</span> <span class=\"n\">img</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n\n<p>Now, we‚Äôve provided clarity to the user to at least know why media isn‚Äôt displaying for a particular item. Progress.</p>\n\n<h3 id=\"hot-reloads\">Hot Reloads</h3>\n<p>Assuming we‚Äôre in a collection or table view situation here, what we‚Äôd see now is that we‚Äôve identified the asset is in iCloud, and we could even track its progression and see it successfully download. As with the fetch, we can get this done by using another options construct, namely <code class=\"highlighter-rouge\">PHImageRequestOptions</code>:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">reqOptions</span> <span class=\"o\">=</span> <span class=\"kt\">PHImageRequestOptions</span><span class=\"p\">()</span>\n<span class=\"n\">reqOptions</span><span class=\"o\">.</span><span class=\"n\">isNetworkAccessAllowed</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n<span class=\"n\">reqOptions</span><span class=\"o\">.</span><span class=\"n\">progressHandler</span> <span class=\"o\">=</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">progress</span><span class=\"p\">,</span> <span class=\"n\">error</span><span class=\"p\">,</span> <span class=\"n\">stop</span><span class=\"p\">,</span> <span class=\"n\">info</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n    <span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"s\">\"Asset download progress is at </span><span class=\"se\">\\(</span><span class=\"n\">progress</span><span class=\"se\">)</span><span class=\"s\">\"</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n<span class=\"kt\">PHCachingImageManager</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"nf\">requestImage</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">asset</span><span class=\"p\">,</span> <span class=\"nv\">targetSize</span><span class=\"p\">:</span> <span class=\"n\">size</span><span class=\"p\">,</span> <span class=\"nv\">contentMode</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">aspectFill</span><span class=\"p\">,</span> <span class=\"nv\">options</span><span class=\"p\">:</span> <span class=\"n\">reqOptions</span><span class=\"p\">,</span> <span class=\"nv\">resultHandler</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"n\">image</span><span class=\"p\">,</span> <span class=\"n\">info</span> <span class=\"k\">in</span>\n    <span class=\"k\">if</span> <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"n\">localAssetID</span> <span class=\"o\">==</span> <span class=\"n\">asset</span><span class=\"o\">.</span><span class=\"n\">localIdentifier</span> \n    <span class=\"p\">{</span>\n        <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">img</span> <span class=\"o\">=</span> <span class=\"n\">image</span> <span class=\"k\">else</span> \n        <span class=\"p\">{</span> \n            <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">isIniCloud</span> <span class=\"o\">=</span> <span class=\"n\">info</span><span class=\"p\">?[</span><span class=\"kt\">PHImageResultIsInCloudKey</span><span class=\"p\">]</span> <span class=\"k\">as?</span> <span class=\"kt\">NSNumber</span><span class=\"p\">,</span> <span class=\"n\">isIniCloud</span><span class=\"o\">.</span><span class=\"n\">boolValue</span> <span class=\"o\">==</span> <span class=\"kc\">true</span>\n            <span class=\"p\">{</span>\n                <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"nf\">showLoadingFromCloudUI</span><span class=\"p\">()</span>\n            <span class=\"p\">}</span>\n\n            <span class=\"k\">return</span>\n        <span class=\"p\">}</span>\n\n        <span class=\"n\">cell</span><span class=\"o\">.</span><span class=\"n\">theImageViewImage</span> <span class=\"o\">=</span> <span class=\"n\">img</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">})</span>\n</code></pre></div></div>\n\n<blockquote>\n  <p>Though documentation states that one needs to set <code class=\"highlighter-rouge\">isNetworkAccessAllowed</code>\nto <code class=\"highlighter-rouge\">true</code> for this to work, I‚Äôve seen it done without using it.</p>\n</blockquote>\n\n<p>One could be potentially flummoxed if they were to see these downloads complete, yet their asset request doesn‚Äôt do anything after the fact. Do you need to request the asset again? Why would it show up if you were to scroll the collection or table view up and down again?</p>\n\n<ol>\n  <li>Yes, and no.</li>\n  <li>It would, because now the asset is in memory.</li>\n</ol>\n\n<p>The answer to this scenario is in the docs, but it‚Äôs a blink and you‚Äôll miss it comment at the end of a document describing how to request user access to media:</p>\n\n<blockquote>\n  <p>Use the register(_:) method to observe photo library changes before fetching content. After the user grants your app access to the photo library, Photos sends change messages for any empty fetch results you retrieved earlier, notifying you that library content for those fetches is now available.</p>\n</blockquote>\n\n<p>Photo libraries can mutate at any point, so the key for developers who are making their home baked media picker is to react to those changes. You can do so by adopting the <code class=\"highlighter-rouge\">PHPhotoLibraryChangeObserver</code> protocol and implementing only one method.</p>\n\n<p>Before we go and snag media from the user, it‚Äôs pertinent to register for changes in the library first:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">PHPhotoLibrary</span><span class=\"o\">.</span><span class=\"nf\">shared</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"nf\">register</span><span class=\"p\">(</span><span class=\"k\">self</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>‚Ä¶and then adopt <code class=\"highlighter-rouge\">func photoLibraryDidChange(_ changeInstance: PHChange)</code>. As I‚Äôm not one to reinvent the wheel, Apple has a perfect example of how #todothisright within their Photos documentation:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">func</span> <span class=\"nf\">photoLibraryDidChange</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">changeInstance</span><span class=\"p\">:</span> <span class=\"kt\">PHChange</span><span class=\"p\">)</span> \n<span class=\"p\">{</span>\n    <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">changes</span> <span class=\"o\">=</span> <span class=\"n\">changeInstance</span><span class=\"o\">.</span><span class=\"nf\">changeDetails</span><span class=\"p\">(</span><span class=\"nv\">for</span><span class=\"p\">:</span> <span class=\"n\">fetchResult</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span> <span class=\"p\">{</span> <span class=\"k\">return</span> <span class=\"p\">}</span>\n\n    <span class=\"c1\">// Change notifications may originate from a background queue.</span>\n    <span class=\"c1\">// As such, re-dispatch execution to the main queue before acting</span>\n    <span class=\"c1\">// on the change, so you can update the UI.</span>\n    <span class=\"kt\">DispatchQueue</span><span class=\"o\">.</span><span class=\"n\">main</span><span class=\"o\">.</span><span class=\"n\">sync</span> \n    <span class=\"p\">{</span>\n        <span class=\"c1\">// Hang on to the new fetch result.</span>\n        <span class=\"n\">fetchResult</span> <span class=\"o\">=</span> <span class=\"n\">changes</span><span class=\"o\">.</span><span class=\"n\">fetchResultAfterChanges</span>\n\n        <span class=\"c1\">// If we have incremental changes, animate them in the collection view.</span>\n        <span class=\"k\">if</span> <span class=\"n\">changes</span><span class=\"o\">.</span><span class=\"n\">hasIncrementalChanges</span> \n        <span class=\"p\">{</span>\n            <span class=\"k\">guard</span> <span class=\"k\">let</span> <span class=\"nv\">collectionView</span> <span class=\"o\">=</span> <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">collectionView</span> <span class=\"k\">else</span> <span class=\"p\">{</span> <span class=\"nf\">fatalError</span><span class=\"p\">()</span> <span class=\"p\">}</span>\n            <span class=\"c1\">// Handle removals, insertions, and moves in a batch update.</span>\n            <span class=\"n\">collectionView</span><span class=\"o\">.</span><span class=\"nf\">performBatchUpdates</span><span class=\"p\">({</span>\n                <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">removed</span> <span class=\"o\">=</span> <span class=\"n\">changes</span><span class=\"o\">.</span><span class=\"n\">removedIndexes</span><span class=\"p\">,</span> <span class=\"o\">!</span><span class=\"n\">removed</span><span class=\"o\">.</span><span class=\"n\">isEmpty</span> \n                <span class=\"p\">{</span>\n                    <span class=\"n\">collectionView</span><span class=\"o\">.</span><span class=\"nf\">deleteItems</span><span class=\"p\">(</span><span class=\"nv\">at</span><span class=\"p\">:</span> <span class=\"n\">removed</span><span class=\"o\">.</span><span class=\"nf\">map</span><span class=\"p\">({</span> <span class=\"kt\">IndexPath</span><span class=\"p\">(</span><span class=\"nv\">item</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">,</span> <span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"p\">}))</span>\n                <span class=\"p\">}</span>\n                <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">inserted</span> <span class=\"o\">=</span> <span class=\"n\">changes</span><span class=\"o\">.</span><span class=\"n\">insertedIndexes</span><span class=\"p\">,</span> <span class=\"o\">!</span><span class=\"n\">inserted</span><span class=\"o\">.</span><span class=\"n\">isEmpty</span> \n                <span class=\"p\">{</span>\n                    <span class=\"n\">collectionView</span><span class=\"o\">.</span><span class=\"nf\">insertItems</span><span class=\"p\">(</span><span class=\"nv\">at</span><span class=\"p\">:</span> <span class=\"n\">inserted</span><span class=\"o\">.</span><span class=\"nf\">map</span><span class=\"p\">({</span> <span class=\"kt\">IndexPath</span><span class=\"p\">(</span><span class=\"nv\">item</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">,</span> <span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"p\">}))</span>\n                <span class=\"p\">}</span>\n                <span class=\"n\">changes</span><span class=\"o\">.</span><span class=\"n\">enumerateMoves</span> <span class=\"p\">{</span> <span class=\"n\">fromIndex</span><span class=\"p\">,</span> <span class=\"n\">toIndex</span> <span class=\"k\">in</span>\n                    <span class=\"n\">collectionView</span><span class=\"o\">.</span><span class=\"nf\">moveItem</span><span class=\"p\">(</span><span class=\"nv\">at</span><span class=\"p\">:</span> <span class=\"kt\">IndexPath</span><span class=\"p\">(</span><span class=\"nv\">item</span><span class=\"p\">:</span> <span class=\"n\">fromIndex</span><span class=\"p\">,</span> <span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">),</span>\n                                            <span class=\"nv\">to</span><span class=\"p\">:</span> <span class=\"kt\">IndexPath</span><span class=\"p\">(</span><span class=\"nv\">item</span><span class=\"p\">:</span> <span class=\"n\">toIndex</span><span class=\"p\">,</span> <span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">))</span>\n                <span class=\"p\">}</span>\n            <span class=\"p\">})</span>\n            <span class=\"c1\">// We are reloading items after the batch update since `PHFetchResultChangeDetails.changedIndexes` refers to</span>\n            <span class=\"c1\">// items in the *after* state and not the *before* state as expected by `performBatchUpdates(_:completion:)`.</span>\n            <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">changed</span> <span class=\"o\">=</span> <span class=\"n\">changes</span><span class=\"o\">.</span><span class=\"n\">changedIndexes</span><span class=\"p\">,</span> <span class=\"o\">!</span><span class=\"n\">changed</span><span class=\"o\">.</span><span class=\"n\">isEmpty</span> \n            <span class=\"p\">{</span>\n                <span class=\"n\">collectionView</span><span class=\"o\">.</span><span class=\"nf\">reloadItems</span><span class=\"p\">(</span><span class=\"nv\">at</span><span class=\"p\">:</span> <span class=\"n\">changed</span><span class=\"o\">.</span><span class=\"nf\">map</span><span class=\"p\">({</span> <span class=\"kt\">IndexPath</span><span class=\"p\">(</span><span class=\"nv\">item</span><span class=\"p\">:</span> <span class=\"nv\">$0</span><span class=\"p\">,</span> <span class=\"nv\">section</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"p\">}))</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span> \n        <span class=\"k\">else</span> \n        <span class=\"p\">{</span>\n            <span class=\"c1\">// Reload the collection view if incremental changes are not available.</span>\n            <span class=\"n\">collectionView</span><span class=\"o\">.</span><span class=\"nf\">reloadData</span><span class=\"p\">()</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>With this tweak in place - you‚Äôll find that when an asset is fetched from iCloud, a change notification spins up and a fetch result reports a change (or possibly no change). Using batch updates, your collection or table view will reload and have the asset ready to go.</p>\n\n<p>To recap - here‚Äôs the recipe to make this all tick:</p>\n\n<ol>\n  <li>Register for changes before you fetch anything.</li>\n  <li>Conform to <code class=\"highlighter-rouge\">PHPhotoLibraryChangeObserver</code></li>\n  <li>Refresh your datasource, look for changes and load those up within <code class=\"highlighter-rouge\">func photoLibraryDidChange(_ changeInstance: PHChange)</code></li>\n  <li>Using <code class=\"highlighter-rouge\">PHImageRequestOptions</code>, specify that you‚Äôll opt into network downloads for fetches.</li>\n  <li>Check if the image is in iCloud during the fetch, if it is - indicate as much in the user interface. Optional, but I think it‚Äôs necessary.</li>\n  <li>Unregister yourself when your object should be freed from memory.</li>\n</ol>\n\n<h3 id=\"wrapping-up\">Wrapping Up</h3>\n<p>Ten years ago, the future was the cloud. Five years ago, it became a mature, saturated market. Today, it‚Äôs not uncommon for the most vanilla of our user base to use it in some capacity. As such - a lot of media can be found hanging out up there in 2019.</p>\n\n<p>Ensuring that our own home rolled solutions outside of <code class=\"highlighter-rouge\">UIImagePickerController</code> can retrieve them, communicate its progress of doing so and then displaying the end result is a baseline expectation at this point. Though it requires a bit of know-how, the code doesn‚Äôt yield a massive time commitment when weighed against its payoff.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "There is a reason Cupertino &amp; Friends¬© encourage us to leverage UIKit and its components in our own apps.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-03-27T00:00:00-05:00",
            "date_modified": "2019-03-27T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["Photos"]},{
            "id": "http://localhost:4000/A-Best-in-Class-App",
            "url": "http://localhost:4000/A-Best-in-Class-App/",
            "title": "A Best in Class iOS App",
            "content_html": "<p>For as long as I‚Äôve been a part of this industry, I‚Äôve watched incredible, well-deserving apps take home an Apple Design Award. And <em>that‚Äôs</em> my endgame.</p>\n\n<p>So, years ago, I set out to create a list that succinctly answers only one question:</p>\n\n<p><strong>What things can I quantify that help make an app great?</strong></p>\n\n<p>I believe I‚Äôve created such a list that helps answer that question. Yours might look different, but this one is mine. It attempts to takes all of the emotion and (mostly) opinions out of it. I want to capture what Apple says is great, not what other people may define it as. Though those opinions can assuredly be of value, they don‚Äôt give out A.D.A.s - only Apple does.</p>\n\n<p>Here‚Äôs a quick brief on my methodology behind how I created it:</p>\n\n<ul>\n  <li>First, and most importantly, I read iOS‚Äô Human Interface Guidelines annually from top to bottom after the GM releases of the upcoming version of iOS.</li>\n  <li>Where there‚Äôs smoke, there‚Äôs fire. If Apple has said on record that ‚ÄúThis is great‚Äù about an app, I include whatever that thing or interaction was. These things aren‚Äôt clandestine trade secrets, but rather they are things that Apple or an Apple design evangelist publicly gave their seal of approval to.</li>\n</ul>\n\n<p>That‚Äôs it.</p>\n\n<blockquote>\n  <p>As always, if you‚Äôve got an item or two that belongs on this list, by all means create a pull request to get it added in by visiting the link at the bottom of the post.</p>\n</blockquote>\n\n<p>The five sections it covers are:</p>\n\n<ol>\n  <li><strong>Accessibility:</strong> Designing for everyone is the right thing to do, and the best apps do it and they do it exceptionally well.</li>\n  <li><strong>Platform Technology:</strong> Apple loves it when apps utilize their new APIs to great effect, you should too. It‚Äôs not about shoehorning features, it‚Äôs about looking at your product and seeing how to utilize iOS around it.</li>\n  <li><strong>User Experience:</strong> Don‚Äôt make people think. Your app should have a core function that acts a thesis to a paper - and your UX is the body that supports it.</li>\n  <li><strong>Design:</strong> Explaining design is hard, but you know a good one when you see it. This section lists some things those apps which are thoughtfully created do.</li>\n  <li><strong>App Store Presence</strong> This is by far the most nascent category I‚Äôve been tracking, so its list is short. It includes best practices for the App Store.</li>\n</ol>\n\n<h3 id=\"accessibility-is-first-class\">Accessibility is First Class</h3>\n<ul>\n  <li>Voice Over is fully supported and the rotor control is implemented by including the relevant headings. Using Screen Curtain yields an experience that‚Äôs not only usable, but up to par with the regular app using only Voice Over.</li>\n  <li><a href=\"https://developer.apple.com/library/archive/featuredarticles/ViewControllerPGforiPhoneOS/SupportingAccessibility.html\" target=\"_blank\">Voice Over gestures</a> are overriden where necessary:\n    <ul>\n      <li><strong><a href=\"https://developer.apple.com/documentation/objectivec/nsobject/1615091-accessibilityperformescape\" target=\"_blank\">Escape</a></strong>: A two-finger Z-shaped gesture that dismisses a modal dialog, or goes back one level in a navigation hierarchy.\n        <ul>\n          <li><code class=\"highlighter-rouge\">func accessibilityPerformEscape() -&gt; Bool</code></li>\n        </ul>\n      </li>\n      <li><strong><a href=\"https://developer.apple.com/documentation/objectivec/nsobject/1615137-accessibilityperformmagictap\" target=\"_blank\">Magic Tap</a></strong>: A two-finger double-tap that performs the most-intended action.\n        <ul>\n          <li><code class=\"highlighter-rouge\">func accessibilityPerformMagicTap() -&gt; Bool</code></li>\n        </ul>\n      </li>\n      <li><strong><a href=\"https://developer.apple.com/documentation/objectivec/nsobject/1615161-accessibilityscroll\" target=\"_blank\">Three-Finger Scroll</a></strong>: A three-finger swipe that scrolls content vertically or horizontally.\n        <ul>\n          <li><code class=\"highlighter-rouge\">func accessibilityScroll(_ direction: UIAccessibilityScrollDirection) -&gt; Bool</code></li>\n        </ul>\n      </li>\n      <li><strong><a href=\"https://developer.apple.com/documentation/objectivec/nsobject/1615076-accessibilityincrement\" target=\"_blank\">Increment</a></strong>: A one-finger swipe up that increments a value in an element.\n        <ul>\n          <li><code class=\"highlighter-rouge\">func accessibilityIncrement()</code></li>\n        </ul>\n      </li>\n      <li><strong><a href=\"https://developer.apple.com/documentation/objectivec/nsobject/1615169-accessibilitydecrement\" target=\"_blank\">Decrement</a></strong>: A one-finger swipe down that decrements a value in an element.\n        <ul>\n          <li><code class=\"highlighter-rouge\">func accessibilityDecrement()</code></li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n  <li>When presenting new controllers, you set the Voice Over Cursor to an <a href=\"https://developer.apple.com/library/archive/featuredarticles/ViewControllerPGforiPhoneOS/SupportingAccessibility.html#//apple_ref/doc/uid/TP40007457-CH12-SW1\" target=\"_blank\">appropriate element</a> if the top-most left element doesn‚Äôt make sense:\n  <code class=\"highlighter-rouge\">UIAccessibilityPostNotification(.screenChangedNotification, myHeading);</code></li>\n  <li>Context considering, you use <code class=\"highlighter-rouge\">accessibilityIgnoresInvertColors</code> for images and video.</li>\n  <li>Respects reduced motion and blurring user preferences.</li>\n  <li>Adaptive and supports all devices and multitasking scenarios elegantly.</li>\n  <li>Fully supports dynamic type.</li>\n  <li>Readable text uses <code class=\"highlighter-rouge\">readableContentGuide</code>.</li>\n  <li>Color blind support and a 7:1 color contrast ratio.</li>\n  <li>Smart Invert Color Support and the app responds well to color inversion.</li>\n  <li>All bar buttons have their landscapeImagePhone and largeContentSizeImage properties set.</li>\n  <li>All glyphs have their accessibility images set (i.e. <code class=\"highlighter-rouge\">adjustsImageSizeForAccessibilityContentSizeCategory</code>).</li>\n  <li>Includes closed captions and audio descriptions, all images and icons have alternative text set.</li>\n  <li>Leading and trailing margins are used for constraints to support left to right languages.</li>\n  <li>The User Interface appears flawlessly when tested using Double Length Pseudo-languages.</li>\n  <li>Using <code class=\"highlighter-rouge\">NSShowNonLocalizedStrings</code> yields no results.</li>\n  <li>If you support drag and drop, <a href=\"https://developer.apple.com/videos/play/wwdc2018/241/\">UIAccessibilityLocationDescriptors</a> are all set.</li>\n  <li>Magic taps are supported for the app‚Äôs most common functionality.</li>\n  <li>It uses <code class=\"highlighter-rouge\">CFBundleSpokenName</code> if the app‚Äôs name could potentially be mispronounced by the system (i..e CoolApp23 would be ‚ÄúCoolApp Twenty Three‚Äù).</li>\n  <li>Lastly, running the entire app through Accessibility Inspector produced no warnings and turning on Screen Curtain to navigate the app works flawlessly.</li>\n</ul>\n\n<h3 id=\"ios-technology-is-tightly-integrated\">iOS Technology is Tightly Integrated</h3>\n<ul>\n  <li>3D Touch is integrated (Peeks, home shortcuts, quick actions and interaction delegate for unique experiences).</li>\n  <li>Spotlight search and indexing support.</li>\n  <li>Effective energy management (i.e. supports low power mode and reacts to it)</li>\n  <li>Keyboard shortcuts have been added. The app could be used almost, or completely, with solely the use of a keyboard.</li>\n  <li>It supports handoff on Mac (if applicable).</li>\n  <li>Meaningful extensions are included with the app, whether it‚Äôs via a share extension, action extension, etc.</li>\n  <li>Callback urls are supplied and documented so other apps may integrate with it (x-callback-url)/.</li>\n  <li>Siri Intent support, when plausible:\n    <ul>\n      <li>Also include intent phrases to help coach users</li>\n      <li>Alternate app names are included when appropriate</li>\n      <li>Watchface support</li>\n    </ul>\n  </li>\n  <li>If it makes sense, document sharing is supported via the file provider.</li>\n  <li>Drag and drop has first class support:\n    <ul>\n      <li>A fully fleshed out <code class=\"highlighter-rouge\">NSItemProvider</code> exists for custom objects.</li>\n      <li>Purposeful external and internal app drag support.</li>\n      <li>This is used for reordering, should the app support it.</li>\n    </ul>\n  </li>\n  <li>If it makes sense, data can be shared via AirDrop.</li>\n  <li>Natural language processing support if necessary.</li>\n  <li>All tab bar images are vector .pdf images or have each corresponding size included to ensure they adapt correctly and are vended to accessibility modals properly.</li>\n  <li>Any displayed Live Photo will animate when force touched and utilize <code class=\"highlighter-rouge\">PHLivePhotoImageView</code> for playback.</li>\n  <li>Each image also shows their system badge if available (i.e. live photo badges).</li>\n  <li>If it makes sense, it supports printing via <code class=\"highlighter-rouge\">UIPrintInteractionController</code>.</li>\n  <li>Has Siri Shortcuts supported or donated.</li>\n  <li>Running the Analyze function in Xcode yields no errors, warnings or suggestions.</li>\n  <li>There are no calls to <code class=\"highlighter-rouge\">UIGraphicsBeginImageContextWithOptions</code>, and <code class=\"highlighter-rouge\">UIGraphicsImageRenderer</code> is used instead.</li>\n  <li><a href=\"https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/WebContent.html#//apple_ref/doc/uid/TP40016308-CH8-SW1\">Universal Links</a> are supported, especially if your app‚Äôs content is available online.</li>\n</ul>\n\n<h3 id=\"the-user-experience-is-top-of-mind\">The User Experience is Top of Mind</h3>\n<ul>\n  <li>Supports <a href=\"https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/UndoArchitecture/UndoArchitecture.html\">native</a> ‚Äúundo‚Äù and ‚Äúredo‚Äù actions, typically from shaking.</li>\n  <li>The content type of all text views and text fields is included, and the correct keyboard type is used for the current context. The keyboard‚Äôs language identifier is integrated correctly.</li>\n  <li>Handles the keyboard being undocked on the iPad, if views are constrained to it via an <code class=\"highlighter-rouge\">inputAccessoryView</code>.</li>\n  <li>If data is quantifiable while data transfer is occurring, a progress indicator is used over an activity indicator.</li>\n  <li>It‚Äôs localized for all territories it‚Äôs released in.</li>\n  <li>Text tends to not truncate and it <em>never</em> clips but rather it‚Äôs always readable.</li>\n  <li>All tappable interface elements are at least 44 by 44 points.</li>\n  <li>The entire app binary is under 30 megabytes. (<em>No source here, this is based off a multitude of data points.</em>)</li>\n  <li>Delete actions always are followed by a confirmation prompt.</li>\n  <li>If your app stores rich information files like a Keynote presentation, it uses the Quick Look API to preview it.</li>\n  <li><a href=\"https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/StrategiesforImplementingYourApp/StrategiesforImplementingYourApp.html#//apple_ref/doc/uid/TP40007072-CH5-SW2\">State restoration</a> is implemented (UIStateRestoration).</li>\n  <li>It uses the correct audio settings, if audio can be played at all within it.</li>\n  <li>Custom edit options are supported when text or an image is selected, if appropriate.</li>\n  <li>The user is provided ample time to form an opinion about your app before you request a rating for it.</li>\n  <li>The launch screen is branding free and closely resembles the first screen of the app.</li>\n  <li>Before opening a link that could lead to another app in a web view or <code class=\"highlighter-rouge\">SFSafariViewController</code>, try calling <code class=\"highlighter-rouge\">UIApplication</code>‚Äôs <code class=\"highlighter-rouge\">openURL:</code> with the <a href=\"https://recoursive.com/2019/02/22/preflight_universal_links/\" target=\"_blank\"><code class=\"highlighter-rouge\">UIApplicationOpenURLOptionUniversalLinksOnly</code></a>option first.</li>\n  <li>Table views deselect selected rows in <a href=\"https://gist.github.com/smileyborg/ec4812c146f575cd006d98d681108ba8\">viewDidAppear</a> when popping back to them.</li>\n  <li>Notifications supply a value for <a href=\"https://developer.apple.com/documentation/usernotifications/unnotificationcategory/2873736-hiddenpreviewsbodyplaceholder\">hiddenPreviewsBodyPlaceholder</a> and a detail view.</li>\n  <li><code class=\"highlighter-rouge\">UITextInputAssistantItem</code> items are used to support common tasks on iPad that are at home within the shortcuts bar.</li>\n  <li>When performing CRUD operations on a table or collection view, you opt to use <code class=\"highlighter-rouge\">performBatchUpdates:</code> instead of <code class=\"highlighter-rouge\">reloadData</code>.</li>\n  <li>Testing for leaks and freed memory is part of your workflow, as consuming an unnecessary amount of memory and power hampers everyone.</li>\n  <li>Navigation is clear and foolproof:\n    <ul>\n      <li>Modality is used sparingly, and clearly brings them back to where they were when dismissed.</li>\n    </ul>\n  </li>\n</ul>\n\n<h2 id=\"the-design-drips-with-polish\">The Design Drips with Polish</h2>\n<ul>\n  <li>Correct system margins are used throughout the app, and no hard coded ones are used (i.e. layoutMarginsGuide, safeAreaLayoutGuide, etc.)</li>\n  <li>Haptic feedback is used throughout the system to complement user interactions, and they are not overdone.</li>\n  <li>Controller transitions feel natural and fluid. Great examples are Calendar and Photos.</li>\n  <li>You opt for vector assets to combat the differing resolutions and avoid any blurry assets.</li>\n  <li>Your content is always the focus, and you constantly challenge if that‚Äôs true throughout the development cycles.</li>\n  <li>Particular and specific user experience guidelines are followed:\n    <ul>\n      <li>No segment controls are used in toolbars.</li>\n      <li>There are no toolbars and tab bars in the same screen.</li>\n      <li>Destructive actions are the top choice in action sheets.</li>\n      <li>Alerts, if used, ideally have to two choices and titles have no punctuation. They avoid using Yes and No as choices.</li>\n      <li>Any picker‚Äôs height is equal to about 5 list values.</li>\n      <li>If a progress indicator is in a bar, it should have the unfolded portion of the track clear. Otherwise, it is colored to denote the amount of work left to do.</li>\n      <li>Network activity indicators are only shown if the network requests lasts a few seconds or more.</li>\n      <li>Switches are exclusively used within a table row.</li>\n    </ul>\n  </li>\n  <li>You aspire to ship on all of Apple‚Äôs platforms (iOS iPhone + iPad, watchOS, tvOS and macOS).</li>\n  <li>Lastly, your app is ‚Äújank‚Äù free. You know what this means for you.</li>\n</ul>\n\n<h2 id=\"app-store-page-and-logistical-assets-are-thoughtfully-crafted\">App Store Page and Logistical Assets are Thoughtfully Crafted</h2>\n<ul>\n  <li>An App Store preview video is used.</li>\n  <li>Its keywords and category were carefully researched.</li>\n  <li>The app icon follows the golden grid:\n    <ul>\n      <li>It likely should include your brand‚Äôs primary color as well.</li>\n    </ul>\n  </li>\n</ul>\n\n<h3 id=\"wrapping-up\">Wrapping Up</h3>\n<p>I love checklists. And this is my quality checklist that‚Äôs constantly evolving. My side project will ship in a state where it meets or exceeds almost every single bullet point.</p>\n\n<p>Certainly, quality takes time. If you nailed everything on this list, it‚Äôs because you‚Äôve been working towards them for years. If you aren‚Äôt close to meeting the items listed here, no stress (it also means you probably shipped!). Take it piece by piece and work your way down.</p>\n\n<p>And, as a wise honey-loving bear once said, ‚ÄúI get to where I‚Äôm going by walking away from where I‚Äôve been.‚Äù If your app might lack some polish, better now more than ever to spend some time giving it some.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "For as long as I‚Äôve been a part of this industry, I‚Äôve watched incredible, well-deserving apps take home an Apple Design Award. And that‚Äôs my endgame.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-02-25T00:00:00-06:00",
            "date_modified": "2019-02-25T00:00:00-06:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/NS_CLOSED_ENUM",
            "url": "http://localhost:4000/NS_CLOSED_ENUM/",
            "title": "NS_CLOSED_ENUM",
            "content_html": "<p>There is but one constant in software engineering: change.</p>\n\n<p>New versions. Additional frameworks. Mutating requirements. Indecisive clients. Nascent patterns for emerging platforms.</p>\n\n<p>The outside factors will always pile in, and yet sitting within stark juxtaposition of this notion is that some code might not <em>ever</em> change. A prime candidate for such immutability? Enumerations.</p>\n\n<p>And now, thanks to the Swift compiler and Xcode 10.2, we can broadcast the future of any Objective-C enumeration with a higher degree of clarity.</p>\n\n<h3 id=\"frozen-and-unfrozen\">Frozen and Unfrozen</h3>\n<p>Far from moribund, Objective-C appears to gain new gadgets on an annual basis. However, a closer inspection reveals that all good things happening to the thirty-plus year old language are a direct result of bettering the Swift programming experience. So, it should come as no surprise that this macro was born primarily from <a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0192-non-exhaustive-enums.md\" target=\"_blank\">Swift evolution proposal 0192</a>.</p>\n\n<p>The TL;DR is that the Swift community were considering how to effectively handle enumerations that would change, and those that wouldn‚Äôt. In programming parlance we consider this distinction as <em>frozen</em> and <em>unfrozen</em> enumerations.</p>\n\n<p>For an unfrozen enumeration (likely the lot of them), additional cases are likely coming in future API changes:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">typedef</span> <span class=\"kt\">NS_ENUM</span><span class=\"p\">(</span><span class=\"kt\">NSUInteger</span><span class=\"p\">,</span> <span class=\"kt\">AccountType</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kt\">AccountTypeNew</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeExisting</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeUnknown</span>\n<span class=\"p\">};</span>\n\n<span class=\"c1\">// Later on, another case could be added</span>\n<span class=\"n\">typedef</span> <span class=\"kt\">NS_ENUM</span><span class=\"p\">(</span><span class=\"kt\">NSUInteger</span><span class=\"p\">,</span> <span class=\"kt\">AccountType</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kt\">AccountTypeNew</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeExisting</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeMigrated</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeUnknown</span>\n<span class=\"p\">};</span>\n</code></pre></div></div>\n\n<p>Whereas other situations call for a certain degree of finality, such as <code class=\"highlighter-rouge\">FloatingPointSign</code> from within the Swift Standard Library:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">sign</span><span class=\"p\">:</span><span class=\"kt\">FloatingPointSign</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">minus</span>\n\n<span class=\"k\">switch</span> <span class=\"n\">sign</span>\n<span class=\"p\">{</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">minus</span><span class=\"p\">:</span><span class=\"k\">break</span>\n<span class=\"k\">case</span><span class=\"o\">.</span><span class=\"nv\">plus</span><span class=\"p\">:</span><span class=\"k\">break</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<h3 id=\"swiftly-business\">Swiftly Business</h3>\n<p>The differences in approach between the two languages are vast and wide when dealing with enumerations. Recall that Objective-C supports storing any value in an enumeration, so as long as it matches the underlying type:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">typedef</span> <span class=\"kt\">NS_ENUM</span><span class=\"p\">(</span><span class=\"kt\">NSUInteger</span><span class=\"p\">,</span> <span class=\"kt\">AccountType</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kt\">AccountTypeNew</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeExisting</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeUnknown</span>\n<span class=\"p\">};</span>\n\n<span class=\"c1\">// Later on, assignment...</span>\n<span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">accountType</span> <span class=\"o\">=</span> <span class=\"mi\">934</span><span class=\"p\">;</span>\n\n<span class=\"c1\">// Or control flow...</span>\n<span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">accountType</span> <span class=\"o\">==</span> <span class=\"mi\">243</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"c1\">// It's all totally legal</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>In Swift, that‚Äôs no fly zone territory:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Cannot assign value of type 'Int' to type 'AccountType'</span>\n<span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">accountType</span> <span class=\"o\">=</span> <span class=\"mi\">934</span>\n\n<span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">account</span><span class=\"o\">.</span><span class=\"n\">accountType</span> <span class=\"o\">==</span> <span class=\"mi\">34</span><span class=\"p\">)</span> \n<span class=\"p\">{</span>\n        <span class=\"c1\">// This errs as well, unless one initializes an Int with the enum's rawValue.    </span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>But where things really become tightened up in Swift is within a <code class=\"highlighter-rouge\">switch</code>:</p>\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// If we omit default, we'll err since the switch isn't exhaustive. Or leave out a break.</span>\n<span class=\"k\">switch</span> <span class=\"n\">account</span><span class=\"o\">.</span><span class=\"n\">accountType</span>\n<span class=\"p\">{</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">existing</span><span class=\"p\">:</span> <span class=\"k\">break</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">new</span><span class=\"p\">:</span> <span class=\"k\">break</span>\n<span class=\"k\">default</span><span class=\"p\">:</span> <span class=\"k\">break</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Here, Swift is the straight A student who buckles their seat belt before starting their engine. Objective-C wouldn‚Äôt mind driving blindfolded:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Really anything goes. Leave out a break. Don't use all the cases. Just whatever with a side of YOLO.</span>\n<span class=\"k\">switch</span> <span class=\"p\">(</span><span class=\"n\">account</span><span class=\"o\">.</span><span class=\"n\">accountType</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">case</span> <span class=\"kt\">AccountTypeNew</span><span class=\"p\">:</span>\n    <span class=\"k\">default</span><span class=\"p\">:</span> <span class=\"k\">break</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>And you can see where the issues come into play. Though we can‚Äôt do much in terms of safety with Objective-C, we can vend more intent to Swift consumers of their enumerations by marking them as either frozen or unfrozen. Doing so yields a subtle but welcome change for Swift API consumers.</p>\n\n<p>Enter NS_CLOSED_ENUM.</p>\n\n<h3 id=\"freezing-enumerations\">Freezing Enumerations</h3>\n<p>Though our account type example enumeration is ripe for future mutations, let‚Äôs consider one that isn‚Äôt:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">typedef</span> <span class=\"kt\">NS_CLOSED_ENUM</span><span class=\"p\">(</span><span class=\"kt\">NSUInteger</span><span class=\"p\">,</span> <span class=\"kt\">AccountStandingStatus</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kt\">AccountStandingStatusFreeTrial</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountStandingStatusPaid</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountStandingStatusOwes</span>\n<span class=\"p\">};</span>\n</code></pre></div></div>\n<p>Here, our business needs dictated that an account will ever only be in one of three states. Forever. When bridged over to Swift, usage might look like so:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">switch</span> <span class=\"n\">account</span><span class=\"o\">.</span><span class=\"n\">accountStanding</span>\n<span class=\"p\">{</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">freeTrial</span><span class=\"p\">:</span><span class=\"k\">break</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">owes</span><span class=\"p\">:</span><span class=\"k\">break</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">paid</span><span class=\"p\">:</span><span class=\"k\">break</span>\n<span class=\"kd\">@unknown</span> <span class=\"k\">default</span><span class=\"p\">:</span><span class=\"k\">break</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p>Note that a default case can‚Äôt alert the compiler that a particular enumeration has elements that aren‚Äôt explicitly handled in the switch. For this reason, Swift added a new attribute in Swift 4 for switches, @unknown. Using it will act as a huge safety net, a catch-all. A key difference is that a warning will still be produced to let developers know they‚Äôve missed a case.</p>\n\n<p>That being said, intent is the most valued prize to engineers both from a maintainer‚Äôs perspective as well as a consumer‚Äôs one. Though @unknown is useful for letting one know they‚Äôve missed a case; even better is to communicate that they don‚Äôt need a default case at all. YAGNI.</p>\n\n<p>We can use NS_CLOSED_ENUM here to signify things will, and forever more, stay the same:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">typedef</span> <span class=\"kt\">NS_CLOSED_ENUM</span><span class=\"p\">(</span><span class=\"kt\">NSUInteger</span><span class=\"p\">,</span> <span class=\"kt\">AccountStandingStatus</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kt\">AccountStandingStatusFreeTrial</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountStandingStatusPaid</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountStandingStatusOwes</span>\n<span class=\"p\">};</span>\n</code></pre></div></div>\n\n<p>Now Swift can guarantee that the additional <code class=\"highlighter-rouge\">default</code> is unnecessary, but notice how no warning is generated for our unfrozen enumeration, <code class=\"highlighter-rouge\">AccountType</code>:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">account</span> <span class=\"o\">=</span> <span class=\"kt\">Account</span><span class=\"p\">()</span>\n<span class=\"n\">account</span><span class=\"o\">.</span><span class=\"n\">accountType</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">existing</span>\n<span class=\"n\">account</span><span class=\"o\">.</span><span class=\"n\">accountStanding</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">paid</span>\n\n<span class=\"k\">switch</span> <span class=\"n\">account</span><span class=\"o\">.</span><span class=\"n\">accountType</span>\n<span class=\"p\">{</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">existing</span><span class=\"p\">:</span> <span class=\"k\">break</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">new</span><span class=\"p\">:</span> <span class=\"k\">break</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">unknown</span><span class=\"p\">:</span> <span class=\"k\">break</span>\n<span class=\"kd\">@unknown</span> <span class=\"k\">default</span><span class=\"p\">:</span><span class=\"k\">break</span> <span class=\"c1\">// Still useful, because new types could later be added</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">switch</span> <span class=\"n\">account</span><span class=\"o\">.</span><span class=\"n\">accountStanding</span>\n<span class=\"p\">{</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">freeTrial</span><span class=\"p\">:</span><span class=\"k\">break</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">owes</span><span class=\"p\">:</span><span class=\"k\">break</span>\n<span class=\"k\">case</span> <span class=\"o\">.</span><span class=\"nv\">paid</span><span class=\"p\">:</span><span class=\"k\">break</span>\n<span class=\"kd\">@unknown</span> <span class=\"k\">default</span><span class=\"p\">:</span><span class=\"k\">break</span> <span class=\"c1\">// Case is already handled by previous patterns; consider removing it</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Though this clearly enhances life with Swift, I‚Äôd argue this can be a valuable addition to any Objective-C exclusive code base. If you‚Äôre browsing a header, the intent of the enumeration‚Äôs status (both current and future) are clear by either the use of <code class=\"highlighter-rouge\">NS_ENUM</code> versus <code class=\"highlighter-rouge\">NS_CLOSED_ENUM</code>.</p>\n\n<h3 id=\"choices\">Choices</h3>\n<p>It‚Äôs worth considering which type of enumeration to use with Objective-C at this point. We‚Äôve got enum, NS_ENUM or NS_CLOSED_ENUM. Fortunately, the answer is much simpler than you  might think.</p>\n\n<blockquote>\n  <p>NS_OPTIONS is also a choice, but is more suited towards bitmasks.</p>\n</blockquote>\n\n<p>The old C way of defining an enumeration, which by proxy Objective-C gained by virtue of being a superset, could lead to confusion. Look to <a href=\"https://nshipster.com/ns_enum-ns_options/\" target=\"_blank\">NSHipster‚Äôs</a> excellent post over the topic, but to jog your memory:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// There's no type. Only Integer values</span>\n<span class=\"kd\">enum</span> <span class=\"p\">{</span>\n    <span class=\"kt\">AccountTypeNew</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeExisting</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeUnknown</span>\n<span class=\"p\">};</span>\n\n<span class=\"c1\">// or a specified type</span>\n<span class=\"n\">typedef</span> <span class=\"kd\">enum</span> <span class=\"p\">{</span>\n    <span class=\"kt\">AccountTypeNew</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeExisting</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeUnknown</span>\n<span class=\"p\">};</span>\n\n<span class=\"c1\">// or Apple's old way of doing things,</span>\n<span class=\"n\">typedef</span> <span class=\"kd\">enum</span> <span class=\"p\">{</span>\n    <span class=\"kt\">AccountTypeNew</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeExisting</span><span class=\"p\">,</span>\n    <span class=\"kt\">AccountTypeUnknown</span>\n<span class=\"p\">};</span>\n\n<span class=\"n\">typedef</span> <span class=\"kt\">NSInteger</span> <span class=\"kt\">AccountType</span><span class=\"p\">;</span>\n</code></pre></div></div>\n\n<p>To provide explicit hints to the compiler, one should always opt for NS_ENUM as we‚Äôve done in the previous examples. We‚Äôll get switch case completeness along with our type checking.</p>\n\n<p>Now, with NS_CLOSED_ENUM, the only <em>additional</em> question you‚Äôve got ask yourself is if this enumeration is frozen or not. That‚Äôs it:</p>\n\n<ol>\n  <li>Don‚Äôt use enum</li>\n  <li>If it‚Äôs unfrozen, opt for NS_ENUM</li>\n  <li>If it‚Äôs frozen, use NS_CLOSED_ENUM</li>\n</ol>\n\n<p>It should be noted that the choice to use a frozen enumeration is final. The header for a closed enumeration communicates this plainly:</p>\n\n<blockquote>\n  <p>Once an enum is marked as closed, it is a binary and source incompatible change to add a new value. If there is any doubt about an enum gaining a private or additional public case in the future, use NS_ENUM instead.</p>\n</blockquote>\n\n<h3 id=\"wrapping-up\">Wrapping Up</h3>\n<p>If Objective-C was ‚Äúdeprecated‚Äù tomorrow, the traveled software developer knows that in programming there is but one truth: what is dead never truly dies.</p>\n\n<p>Interop with old faithful (Objective-C) isn‚Äôt going away anytime soon, as much as the prevailing narrative may have you believe. Sure, the Swift only frameworks are en route, no doubt, but so long as Foundation holds its firm grip in the iOS ecosystem - we can bet the dinosaur will still roam its plains.</p>\n\n<p>As such, we should take care to integrate the changing of the guard in delightful ways, and NS_CLOSED_ENUM is an indefectible definition in that regard.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "There is but one constant in software engineering: change.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2019-02-14T00:00:00-06:00",
            "date_modified": "2019-02-14T00:00:00-06:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["Swift"]},{
            "id": "http://localhost:4000/the-chart-that-lies",
            "url": "http://localhost:4000/the-chart-that-lies/",
            "title": "The Chart That Lies",
            "content_html": "<p>There is a certain optimism that surrounds your side project to others in your immediate circle. Take my wife, for example. What has she seen me do for the past several years?</p>\n\n<ul>\n  <li>Stay up late coding.</li>\n  <li>Get up early designing.</li>\n  <li>Finding any ounce of free time to squash a bug.</li>\n</ul>\n\n<p>To her, the whole thing is quite admirable. The undeniable grip that takes hold over developers when they hatch a side project is a cosmic force that requires a first hand account to be adequately understood.</p>\n\n<p>As such, they might view our side project‚Äôs shot at success a little something like this:</p>\n\n<p><img src=\"../assets/images/col.jpg\" alt=\"The Chart of Lies\" /></p>\n\n<p>In theory, that seems reasonable. In practice, it‚Äôs nothing but smoke and mirrors.</p>\n\n<h3 id=\"what-we-hope-for\">What We Hope For</h3>\n<p>People are creatures of habit. We‚Äôve grown up applying a certain formula for success that doesn‚Äôt transcend over to software development. That formula looks a little like this:</p>\n\n<p><code class=\"highlighter-rouge\">effortPutIn + experience + talent = success</code></p>\n\n<p>It‚Äôs ingrained into our D.N.A. early on, as well it should be. I even tell my oldest son, who is obsessed with basketball, that all of his hard work will pay off. And it likely will, too.</p>\n\n<ul>\n  <li>Practice shooting daily? Make the shot in the game.</li>\n  <li>Studied for the test? Get a good grade.</li>\n  <li>Ate less pizza and worked out more? Get a fit body.</li>\n</ul>\n\n<p>But in the world of apps, we know this doesn‚Äôt hold water:</p>\n\n<ul>\n  <li>Spend years on an app? Get a million downloads.</li>\n</ul>\n\n<p>For indie developers, hard work can very well mean close to nothing in terms of downloads.</p>\n\n<h3 id=\"what-we-get\">What We Get</h3>\n<p>I don‚Äôt say any of this to discourage you. Hang with me, though. We‚Äôre trying to create and release software in a place where:</p>\n\n<ul>\n  <li>Exposure means everything, but it‚Äôs far from guaranteed.</li>\n  <li>The biggest names in publishing are manning marketing machines to accomplish the very same goals that you are.</li>\n  <li>Consumers have been taught (by us, no doubt) that they really don‚Äôt need to pay us anything to gain value from the things we make.</li>\n  <li>The apps that they <em>did</em> take a chance on <a href=\"https://techcrunch.com/2018/10/15/sneaky-subscriptions-are-plaguing-the-app-store/\" target=\"_blank\">possibly left a terrible taste in their mouth.</a></li>\n  <li>And of course, the store you‚Äôre putting your creation in has 1,000s of new entries daily.</li>\n</ul>\n\n<p>That description doesn‚Äôt exactly make for a good one sheet, does it? The point is that the time I‚Äôm spending developing my app, commercially speaking - could be time wasted.</p>\n\n<h3 id=\"the-realistic-chart\">The Realistic Chart</h3>\n<p>There is reason for optimism though, and at this point I think it‚Äôs only fair to lay a little bit of sunshine down. Time spent on your app, certainly, is part of your path to success.</p>\n\n<p>And if I‚Äôve done one thing, I have given it time.</p>\n\n<p>I joke that my side project is <em>kids</em> years old. I initially envisioned and released the first version when my oldest, Bennett, arrived (he‚Äôs now 5), I was redesigning it when Remy was born (he‚Äôs two) and I‚Äôm gearing up for release now that my youngest (Baylor) is 5 months old. <strong>My app is three kids years old.</strong></p>\n\n<p>Having a side project while being married, a parent of three and having a full time career is akin to undertaking concurrent programming blindfolded. You‚Äôre hoping to achieve all these tasks in anything but a synchronous queue - while knowing full well you‚Äôre going to deadlock anyways. No matter what.</p>\n\n<p>The good part is that a lot of little things help make an app great, of which time is only an ancillary component. Here is a chart that more closely relays the truth:</p>\n\n<p><img src=\"../assets/images/cot.jpg\" alt=\"A More Realistic Chart\" /></p>\n\n<p>It‚Äôs a thousand little things, a high degree of quality, a problem worth solving having been solved, some happenstance, lucky breaks and market fit that will make your app succeed.</p>\n\n<h3 id=\"know-your-why\">Know Your ‚ÄúWhy‚Äù</h3>\n<p>The part that keeps me motivated, though - is that <em>you</em> get to define what success looks like. It‚Äôs mutable, and typically it means something a little bit different to all of us with some evergreen themes attached to each of the definitions we hold. Though the playful charts show a dollar sign to signify success, it doesn‚Äôt have to look like that for you.</p>\n\n<p>So, what‚Äôs success in your case?</p>\n\n<h4 id=\"are-you-trying-to-be-commercially-successful-are-you-actively-trying-to-make-something-that-could-take-hold-of-the-market\">Are you trying to be commercially successful? Are you actively trying to make something that could take hold of the market?</h4>\n\n<p>It‚Äôs probably wise to release quickly and learn. You‚Äôre acutely aware of the chart that lies, and the speed with which you approach the App Store is your primary weapon to wield against it. You know there‚Äôs nothing wrong with wanting to make a buck, and you believe it can still be done in the market while carving out a space for yourself to earn some of the annual record breaking dollars consumers are spending within it.</p>\n\n<p>Conversely, maybe you‚Äôre closer to how I think about developing an app:</p>\n\n<h4 id=\"are-you-a-hobbyist-who-might-be-obsessed-with-the-details-do-you-consider-your-app-an-open-canvas-and-yourself-the-craftsmen\">Are you a hobbyist who might be obsessed with the details? Do you consider your app an open canvas, and yourself the craftsmen?</h4>\n\n<p>Is releasing something that you can feel proud to put your name on key to you? Do you want it to be so intricately woven and tactfully integrated into the iOS platform that it wouldn‚Äôt feel out of place alongside the best in the business? Would you consider tuning data source updates carefully to perform batch animations anything but a vapid endeavor?</p>\n\n<p>Fantastic! Let‚Äôs have coffee together!</p>\n\n<p>We can wax poetic about which H.I.G. rules to follow religiously and which to toss aside. Let‚Äôs chat about the myriad of possibilities this wonderful world opens up for us to create. We can hammer home that the things we painfully left out of our software were equally as important as the parts we left in.</p>\n\n<p>But devs like us, we <em>really</em> have to be cognizant of the chart that lies. As times goes on, we start believing in it and consider the time we‚Äôve spent will breed success instead of the real, tangible reasons that make an app work. I‚Äôd urge you to think realistically about it. If you chart the same path I‚Äôm on with your app, realize you‚Äôre riding off a lot of assumptions.</p>\n\n<p>All of the time spent is great, it means something - but it owes us absolutely nothing.</p>\n\n<h3 id=\"that-money-thing\">That Money Thing</h3>\n<p>Regardless of the path you choose, it doesn‚Äôt have to be squarely about the money, but you do need to make <em>some</em> money to truly care about it. At least I do. Tell me how motivated you‚Äôd truly be if week after week you keep showing a movie that nobody wants to see.</p>\n\n<p>Plus, the almighty dollar is an adroit motivator. But, it can be but a small facet of why you develop an app. I think I‚Äôve found this middle ground where I‚Äôm certainly not going full-on lean startup, but I‚Äôm not eschewing the reality of what users in the market will think or how they‚Äôll react when they get my app in their hands.</p>\n\n<p>I want them to love it. But the only way I‚Äôll ever know if they will is if I actually release it.</p>\n\n<h3 id=\"wrapping-up\">Wrapping Up</h3>\n<p>If you find yourself hanging your hat on the chart of lies, don‚Äôt feel embarrassed. It‚Äôs only natural that as time passes, you become more attached to your ‚Äúbaby‚Äù. As such, it couldn‚Äôt possibly end up as anything other than great, <em>right</em>?</p>\n\n<p>The App Store tells us a different story. Does your app resonate with the audience you‚Äôre after or will it be coldly ushered into non-existence without so much as a download? Take care to not let that thought discourage you, but be aware that it exists.</p>\n\n<p>Savor developing your creation, but remember that time doesn‚Äôt necessarily breed success. Only a great app does.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "There is a certain optimism that surrounds your side project to others in your immediate circle. Take my wife, for example. What has she seen me do for the past several years?",
            "image": "http://localhost:4000/assets/images/col.jpg",
            "date_published": "2019-01-24T00:00:00-06:00",
            "date_modified": "2019-01-24T00:00:00-06:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["The Indie Dev Diaries"]},{
            "id": "http://localhost:4000/optimizing-images",
            "url": "http://localhost:4000/optimizing-images/",
            "title": "Optimizing Images",
            "content_html": "<p>They say the best camera is the one you have with you. If that adage holds any weight, then without question - stem to stern the iPhone is the most important camera on the planet. And our industry shows it, too.</p>\n\n<p>On a vacation? It didn‚Äôt happen if it‚Äôs not documented on your Instagram story with several candid shots.</p>\n\n<p>Breaking news? Check Twitter and see what outlets are reporting on by peeping their photos of an event unfolding in real time.</p>\n\n<p>Etcetera.</p>\n\n<p>But for all of their ubiquity on the platform, the act of showing them in a performant and memory conservative manner can easily turn into a mismanaged endeavor. With a little know how as to what‚Äôs happening in UIKit and why in regards to how it treats images, one can gain some massive savings and forgo the unrelenting wrath of jetsam.</p>\n\n<h3 id=\"in-theory\">In Theory</h3>\n<p>Pop quiz - how much memory will this 266 kilobyte (and quite dashing) photo of my beautiful daughter require in an iOS app?</p>\n\n<p><img src=\"../assets/images/baylor.jpg\" alt=\"Baylor\" /></p>\n\n<p>Spoiler alert - it‚Äôs not 266 kilobytes. It‚Äôs not 2.66 megabytes. It‚Äôs around <em>14 megabytes</em>.</p>\n\n<p>Why?</p>\n\n<p>iOS essentially derives its memory hit from an image‚Äôs <em>dimensions</em> - whereas the actual file size has much less to do with it. And the dimensions for this photo sit at 1718 pixels wide by 2048 pixels tall. Assuming each pixel will cost us four bytes:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"mi\">1718</span> <span class=\"o\">*</span> <span class=\"mi\">2048</span> <span class=\"o\">*</span> <span class=\"mi\">4</span> <span class=\"o\">/</span> <span class=\"mi\">1024</span> <span class=\"o\">/</span> <span class=\"mi\">1024</span> <span class=\"o\">=</span> <span class=\"mf\">13.42</span> <span class=\"n\">megabytes</span> <span class=\"n\">give</span> <span class=\"n\">or</span> <span class=\"n\">take</span>\n</code></pre></div></div>\n<p>Imagine if you‚Äôve got a table view with a list of users, and each row shows the now pervasive circle avatar of their photo to the left. If you‚Äôre thinking things are kosher because each one has been packed up nice and tight from ImageOptim or something similar, that might not be the case. If each one is a conservative 256x256 you could still be taking quite a hit on memory.</p>\n\n<h3 id=\"the-rendering-pipeline\">The Rendering Pipeline</h3>\n<p>All that to say - it‚Äôs worth knowing what‚Äôs going on under the hood. When you load up an image, it‚Äôs going to be processed in three steps:</p>\n\n<p>1) <strong>Load</strong> - iOS takes the compressed image and loads (in our example) the 266 kilobyte into memory. Really no worries yet.<br />\n2) <strong>Decode</strong> - Now, iOS takes the image and converts into a way the GPU can read and understand. It‚Äôs now uncompressed, and it‚Äôs here we‚Äôre at the 14MB size listed above. <br />\n3) <strong>Render</strong> - Just like it sounds, the image data is ready and willing to be rendered any which way. Even if it‚Äôs just by a 60 by 60 point image view.<br /></p>\n\n<p>The decoding phase is the big one. Here, iOS has created a buffer - specifically an image buffer, that‚Äôs got an in-memory representation of the image. So it stands to reason that this size is intrinsically tied to the proportions of the image itself and not its file size. This paints a clear picture of why the dimensions are so important when it comes to your memory consumption when working with images.</p>\n\n<p>For <code class=\"highlighter-rouge\">UIImage</code> in particular, when we give it image data we received from a network hit or some other source, it decodes that data buffer to whatever compression the data says it‚Äôs encoded in (think PNG or JPEG). However, it‚Äôll actually hang onto it as well. Since rendering is not a one shot operation, the <code class=\"highlighter-rouge\">UIImage</code> keeps that image buffer around so it‚Äôs only decoding things one time.</p>\n\n<p>Expanding on this idea - one integral buffer for any iOS app is its frame buffer. This is what‚Äôs responsible for actually showing your iOS app as it appears on screen since it holds the rendered output of its contents. The display hardware on any iOS device uses this per-pixel information to literally illuminate the very pixels on the physical screen.</p>\n\n<p>And timing matters here. To get the buttery smooth 60 frames per second scrolling, the frame buffer will need to have UIKit render the app‚Äôs window and it‚Äôs subsequent subviews into it when their information changes (i.e. assigning an image to an image view). If you do that slow, you drop a frame.</p>\n\n<blockquote>\n  <p>Think 1/60th of a second is short on time? Pro Motion devices up the ante to 1/120th of a second.</p>\n</blockquote>\n\n<h3 id=\"size-does-matter\">Size Does Matter</h3>\n<p>We can visualize this process and memory being consumed pretty easily. Using the picture of my daughter, I created a trivial app that shows an image view with that exact image within it:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">filePath</span> <span class=\"o\">=</span> <span class=\"kt\">Bundle</span><span class=\"o\">.</span><span class=\"n\">main</span><span class=\"o\">.</span><span class=\"nf\">path</span><span class=\"p\">(</span><span class=\"nv\">forResource</span><span class=\"p\">:</span><span class=\"s\">\"baylor\"</span><span class=\"p\">,</span> <span class=\"nv\">ofType</span><span class=\"p\">:</span> <span class=\"s\">\"jpg\"</span><span class=\"p\">)</span><span class=\"o\">!</span>\n<span class=\"k\">let</span> <span class=\"nv\">url</span> <span class=\"o\">=</span> <span class=\"kt\">NSURL</span><span class=\"p\">(</span><span class=\"nv\">fileURLWithPath</span><span class=\"p\">:</span> <span class=\"n\">filePath</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">fileImage</span> <span class=\"o\">=</span> <span class=\"kt\">UIImage</span><span class=\"p\">(</span><span class=\"nv\">contentsOfFile</span><span class=\"p\">:</span> <span class=\"n\">filePath</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// Image view</span>\n<span class=\"k\">let</span> <span class=\"nv\">imageView</span> <span class=\"o\">=</span> <span class=\"kt\">UIImageView</span><span class=\"p\">(</span><span class=\"nv\">image</span><span class=\"p\">:</span> <span class=\"n\">fileImage</span><span class=\"p\">)</span>\n<span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">translatesAutoresizingMaskIntoConstraints</span> <span class=\"o\">=</span> <span class=\"kc\">false</span>\n<span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">contentMode</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">scaleAspectFit</span>\n<span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">widthAnchor</span><span class=\"o\">.</span><span class=\"nf\">constraint</span><span class=\"p\">(</span><span class=\"nv\">equalToConstant</span><span class=\"p\">:</span> <span class=\"mi\">300</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isActive</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n<span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">heightAnchor</span><span class=\"o\">.</span><span class=\"nf\">constraint</span><span class=\"p\">(</span><span class=\"nv\">equalToConstant</span><span class=\"p\">:</span> <span class=\"mi\">400</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isActive</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n\n<span class=\"n\">view</span><span class=\"o\">.</span><span class=\"nf\">addSubview</span><span class=\"p\">(</span><span class=\"n\">imageView</span><span class=\"p\">)</span>\n<span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">centerXAnchor</span><span class=\"o\">.</span><span class=\"nf\">constraint</span><span class=\"p\">(</span><span class=\"nv\">equalTo</span><span class=\"p\">:</span> <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">centerXAnchor</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isActive</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n<span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">centerYAnchor</span><span class=\"o\">.</span><span class=\"nf\">constraint</span><span class=\"p\">(</span><span class=\"nv\">equalTo</span><span class=\"p\">:</span> <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">centerYAnchor</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isActive</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n</code></pre></div></div>\n\n<blockquote>\n  <p>Mind the force unwraps in production. Here we‚Äôre using a simple example scenario.</p>\n</blockquote>\n\n<p>Which gives us this:\n<img src=\"../assets/images/baylorPhone.jpg\" alt=\"Baylor\" /></p>\n\n<p>A quick trip to LLDB shows us the image dimensions we‚Äôre working with, even though we‚Äôre using a much smaller image view to display it:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"o\">&lt;</span><span class=\"kt\">UIImage</span><span class=\"p\">:</span> <span class=\"mh\">0x600003d41a40</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"mi\">1718</span><span class=\"p\">,</span> <span class=\"mi\">2048</span><span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>A remember - that‚Äôs in <em>points</em>. So if I‚Äôm on a 3x or 2x device then you could potentially multiply that number even more so. Let‚Äôs take a quick trip down <code class=\"highlighter-rouge\">vmmap</code> to see if we can confirm that around 14 megabytes are being used from this one image:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">vmmap</span> <span class=\"o\">--</span><span class=\"n\">summary</span> <span class=\"n\">baylor</span><span class=\"o\">.</span><span class=\"n\">memgraph</span>\n</code></pre></div></div>\n\n<p>A few things stick out (truncated for brevity):</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">Physical</span> <span class=\"nv\">footprint</span><span class=\"p\">:</span>         <span class=\"mf\">69.5</span><span class=\"kt\">M</span>\n<span class=\"kt\">Physical</span> <span class=\"nf\">footprint</span> <span class=\"p\">(</span><span class=\"n\">peak</span><span class=\"p\">):</span>  <span class=\"mf\">69.7</span><span class=\"kt\">M</span>\n</code></pre></div></div>\n\n<p>We‚Äôre sitting at almost 70 megabytes which gives us a nice baseline to confirm any refactor against. If we grep down into Image IO we can likely see some of the cost of our image as well:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">vmmap</span> <span class=\"o\">--</span><span class=\"n\">summary</span> <span class=\"n\">baylor</span><span class=\"o\">.</span><span class=\"n\">memgraph</span> <span class=\"o\">|</span> <span class=\"n\">grep</span> <span class=\"s\">\"Image IO\"</span>\n\n<span class=\"kt\">Image</span> <span class=\"kt\">IO</span>  <span class=\"mf\">13.4</span><span class=\"kt\">M</span>   <span class=\"mf\">13.4</span><span class=\"kt\">M</span>   <span class=\"mf\">13.4</span><span class=\"kt\">M</span>    <span class=\"mi\">0</span><span class=\"kt\">K</span>  <span class=\"mi\">0</span><span class=\"kt\">K</span>  <span class=\"mi\">0</span><span class=\"kt\">K</span>   <span class=\"mi\">0</span><span class=\"kt\">K</span>  <span class=\"mi\">2</span> \n</code></pre></div></div>\n\n<p>Ah - there‚Äôs about 14 megabytes of dirty memory right there. That‚Äôs what our back-of-the-napkin math hypothesized our image would cost. For context, here‚Äôs a quick screenshot of Terminal to clearly illustrate what each column means since they were omitted from our greppin‚Äô:</p>\n\n<p><img src=\"../assets/images/vmmap.jpg\" alt=\"Baylor\" /></p>\n\n<p>So clearly, we‚Äôre paying the full cost of the image in our 300 x 400 image view at this point. The size of the image can be key, but it‚Äôs also not the only thing that matters.</p>\n\n<h3 id=\"color-space\">Color Space</h3>\n<p>Part of the memory you‚Äôll be requesting for is determined by yet another important factor - the color space. In the example above we made an assumption that likely isn‚Äôt the case with most iPhones - that the image was utilizing the sRGB format. The 4 bytes per pixel is figured up by giving one byte for red, blue, green and the alpha component.</p>\n\n<p>If you‚Äôre shooting with a device that supports the wide color format (for example, an iPhone 8+ or iPhone X) then you likely can double the hit across the board. Of course, the reverse is true as well. Metal can use the Alpha 8 format which has only a single channel to its name.</p>\n\n<p>It can be a lot to manage and think about. This is one reason why you should use <a href=\"http://localhost:4000/UIGraphicsImageRenderer\" target=\"_blank\">UIGraphicsImageRenderer</a> instead of <code class=\"highlighter-rouge\">UIGraphicsBeginImageContextWithOptions</code>. The latter will <em>always</em> use sRGB which means you could miss the wide format if you <a href=\"https://instagram-engineering.com/bringing-wide-color-to-instagram-5a5481802d7d\" target=\"_blank\">want it</a>, or miss out on the savings if you‚Äôre going smaller. As of iOS 12, <code class=\"highlighter-rouge\">UIGraphicsImageRenderer</code> is going to pick the right one for you.</p>\n\n<p>Lest we forget, a lot of images that crop up aren‚Äôt really of the photographed variety but rather trivial drawing operations. Not to rehash what I wrote about recently, but in case you missed it:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">circleSize</span> <span class=\"o\">=</span> <span class=\"kt\">CGSize</span><span class=\"p\">(</span><span class=\"nv\">width</span><span class=\"p\">:</span> <span class=\"mi\">60</span><span class=\"p\">,</span> <span class=\"nv\">height</span><span class=\"p\">:</span> <span class=\"mi\">60</span><span class=\"p\">)</span>\n\n<span class=\"kt\">UIGraphicsBeginImageContextWithOptions</span><span class=\"p\">(</span><span class=\"n\">circleSize</span><span class=\"p\">,</span> <span class=\"kc\">true</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n\n<span class=\"c1\">// Draw a circle</span>\n<span class=\"k\">let</span> <span class=\"nv\">ctx</span> <span class=\"o\">=</span> <span class=\"kt\">UIGraphicsGetCurrentContext</span><span class=\"p\">()</span><span class=\"o\">!</span>\n<span class=\"kt\">UIColor</span><span class=\"o\">.</span><span class=\"n\">red</span><span class=\"o\">.</span><span class=\"nf\">setFill</span><span class=\"p\">()</span>\n<span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"nf\">setFillColor</span><span class=\"p\">(</span><span class=\"kt\">UIColor</span><span class=\"o\">.</span><span class=\"n\">red</span><span class=\"o\">.</span><span class=\"n\">cgColor</span><span class=\"p\">)</span>\n<span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"nf\">addEllipse</span><span class=\"p\">(</span><span class=\"nv\">in</span><span class=\"p\">:</span> <span class=\"kt\">CGRect</span><span class=\"p\">(</span><span class=\"nv\">x</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nv\">y</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nv\">width</span><span class=\"p\">:</span> <span class=\"n\">circleSize</span><span class=\"o\">.</span><span class=\"n\">width</span><span class=\"p\">,</span> <span class=\"nv\">height</span><span class=\"p\">:</span> <span class=\"n\">circleSize</span><span class=\"o\">.</span><span class=\"n\">height</span><span class=\"p\">))</span>\n<span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"nf\">drawPath</span><span class=\"p\">(</span><span class=\"nv\">using</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">fill</span><span class=\"p\">)</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">circleImage</span> <span class=\"o\">=</span> <span class=\"kt\">UIGraphicsGetImageFromCurrentImageContext</span><span class=\"p\">()</span>\n<span class=\"kt\">UIGraphicsEndImageContext</span><span class=\"p\">()</span>\n</code></pre></div></div>\n<p>This circle image above is using a 4 byte per pixel format. If you roll with <code class=\"highlighter-rouge\">UIGraphicsImageRenderer</code> you can potentially open things up for up to a 75% savings by getting 1 byte per pixel by letting the renderer opt into the correct format automatically:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">circleSize</span> <span class=\"o\">=</span> <span class=\"kt\">CGSize</span><span class=\"p\">(</span><span class=\"nv\">width</span><span class=\"p\">:</span> <span class=\"mi\">60</span><span class=\"p\">,</span> <span class=\"nv\">height</span><span class=\"p\">:</span> <span class=\"mi\">60</span><span class=\"p\">)</span>\n<span class=\"k\">let</span> <span class=\"nv\">renderer</span> <span class=\"o\">=</span> <span class=\"kt\">UIGraphicsImageRenderer</span><span class=\"p\">(</span><span class=\"nv\">bounds</span><span class=\"p\">:</span> <span class=\"kt\">CGRect</span><span class=\"p\">(</span><span class=\"nv\">x</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nv\">y</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nv\">width</span><span class=\"p\">:</span> <span class=\"n\">circleSize</span><span class=\"o\">.</span><span class=\"n\">width</span><span class=\"p\">,</span> <span class=\"nv\">height</span><span class=\"p\">:</span> <span class=\"n\">circleSize</span><span class=\"o\">.</span><span class=\"n\">height</span><span class=\"p\">))</span>\n\n<span class=\"k\">let</span> <span class=\"nv\">circleImage</span> <span class=\"o\">=</span> <span class=\"n\">renderer</span><span class=\"o\">.</span><span class=\"n\">image</span><span class=\"p\">{</span> <span class=\"n\">ctx</span> <span class=\"k\">in</span>\n    <span class=\"kt\">UIColor</span><span class=\"o\">.</span><span class=\"n\">red</span><span class=\"o\">.</span><span class=\"nf\">setFill</span><span class=\"p\">()</span>\n    <span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"n\">cgContext</span><span class=\"o\">.</span><span class=\"nf\">setFillColor</span><span class=\"p\">(</span><span class=\"kt\">UIColor</span><span class=\"o\">.</span><span class=\"n\">red</span><span class=\"o\">.</span><span class=\"n\">cgColor</span><span class=\"p\">)</span>\n    <span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"n\">cgContext</span><span class=\"o\">.</span><span class=\"nf\">addEllipse</span><span class=\"p\">(</span><span class=\"nv\">in</span><span class=\"p\">:</span> <span class=\"kt\">CGRect</span><span class=\"p\">(</span><span class=\"nv\">x</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nv\">y</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"nv\">width</span><span class=\"p\">:</span> <span class=\"n\">circleSize</span><span class=\"o\">.</span><span class=\"n\">width</span><span class=\"p\">,</span> <span class=\"nv\">height</span><span class=\"p\">:</span> <span class=\"n\">circleSize</span><span class=\"o\">.</span><span class=\"n\">height</span><span class=\"p\">))</span>\n    <span class=\"n\">ctx</span><span class=\"o\">.</span><span class=\"n\">cgContext</span><span class=\"o\">.</span><span class=\"nf\">drawPath</span><span class=\"p\">(</span><span class=\"nv\">using</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"n\">fill</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<h3 id=\"downscaling-vs-downsampling\">Downscaling vs Downsampling</h3>\n<p>Moving past simple drawing scenarios - a lot of the issues with images and their impact on memory originate from the typical photos that we associate with the actual art of photography. Think portraits, landscape shots and more.</p>\n\n<p>It stands to reason that some engineers might assume (and, logically so) that simply downscaling them via <code class=\"highlighter-rouge\">UIImage</code> will suffice. But it typically won‚Äôt due to the reasons above, and it‚Äôs also not as performant due to internal coordinate space transforms according to Apple‚Äôs Kyle Howarth.</p>\n\n<p><code class=\"highlighter-rouge\">UIImage</code> becomes an issue here primarily because it will decompress the <em>original image</em> into memory as we discussed when looking at the rendering pipeline. We need a way to reduce the size of our image buffer, ideally.</p>\n\n<p>Thankfully, it‚Äôs possible to resize the images at the cost of the actual resized image only, which is what one might assume is happening already when it typically isn‚Äôt.</p>\n\n<p>Let‚Äôs try dropping down into a lower level API to downsample it instead:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">let</span> <span class=\"nv\">imageSource</span> <span class=\"o\">=</span> <span class=\"kt\">CGImageSourceCreateWithURL</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"kc\">nil</span><span class=\"p\">)</span><span class=\"o\">!</span>\n<span class=\"k\">let</span> <span class=\"nv\">options</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"kt\">NSString</span><span class=\"p\">:</span><span class=\"kt\">Any</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"nv\">kCGImageSourceThumbnailMaxPixelSize</span><span class=\"p\">:</span><span class=\"mi\">400</span><span class=\"p\">,</span>\n                               <span class=\"nv\">kCGImageSourceCreateThumbnailFromImageAlways</span><span class=\"p\">:</span><span class=\"kc\">true</span><span class=\"p\">]</span>\n\n<span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">scaledImage</span> <span class=\"o\">=</span> <span class=\"kt\">CGImageSourceCreateThumbnailAtIndex</span><span class=\"p\">(</span><span class=\"n\">imageSource</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">options</span> <span class=\"k\">as</span> <span class=\"kt\">CFDictionary</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">imageView</span> <span class=\"o\">=</span> <span class=\"kt\">UIImageView</span><span class=\"p\">(</span><span class=\"nv\">image</span><span class=\"p\">:</span> <span class=\"kt\">UIImage</span><span class=\"p\">(</span><span class=\"nv\">cgImage</span><span class=\"p\">:</span> <span class=\"n\">scaledImage</span><span class=\"p\">))</span>\n    \n    <span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">translatesAutoresizingMaskIntoConstraints</span> <span class=\"o\">=</span> <span class=\"kc\">false</span>\n    <span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">contentMode</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"n\">scaleAspectFit</span>\n    <span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">widthAnchor</span><span class=\"o\">.</span><span class=\"nf\">constraint</span><span class=\"p\">(</span><span class=\"nv\">equalToConstant</span><span class=\"p\">:</span> <span class=\"mi\">300</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isActive</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n    <span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">heightAnchor</span><span class=\"o\">.</span><span class=\"nf\">constraint</span><span class=\"p\">(</span><span class=\"nv\">equalToConstant</span><span class=\"p\">:</span> <span class=\"mi\">400</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isActive</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n    \n    <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"nf\">addSubview</span><span class=\"p\">(</span><span class=\"n\">imageView</span><span class=\"p\">)</span>\n    <span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">centerXAnchor</span><span class=\"o\">.</span><span class=\"nf\">constraint</span><span class=\"p\">(</span><span class=\"nv\">equalTo</span><span class=\"p\">:</span> <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">centerXAnchor</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isActive</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n    <span class=\"n\">imageView</span><span class=\"o\">.</span><span class=\"n\">centerYAnchor</span><span class=\"o\">.</span><span class=\"nf\">constraint</span><span class=\"p\">(</span><span class=\"nv\">equalTo</span><span class=\"p\">:</span> <span class=\"n\">view</span><span class=\"o\">.</span><span class=\"n\">centerYAnchor</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isActive</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Display wise, we‚Äôve got the exact same result as before. But here, we‚Äôre using <code class=\"highlighter-rouge\">CGImageSourceCreateThumbnailAtIndex()</code> instead of just putting the vanilla image into the image view. The source of truth will lie within <code class=\"highlighter-rouge\">vmmap</code> once more to see if our optimizations have paid off (again, truncated for brevity):</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"n\">vmmap</span> <span class=\"o\">-</span><span class=\"n\">summary</span> <span class=\"n\">baylorOptimized</span><span class=\"o\">.</span><span class=\"n\">memgraph</span>\n\n<span class=\"kt\">Physical</span> <span class=\"nv\">footprint</span><span class=\"p\">:</span>         <span class=\"mf\">56.3</span><span class=\"kt\">M</span>\n<span class=\"kt\">Physical</span> <span class=\"nf\">footprint</span> <span class=\"p\">(</span><span class=\"n\">peak</span><span class=\"p\">):</span>  <span class=\"mf\">56.7</span><span class=\"kt\">M</span>\n</code></pre></div></div>\n\n<p>And the savings have rolled in. If we compare the 69.5M from before to the 56.3M now we get a savings of 13.2M. That‚Äôs a <em>huge</em> savings, almost the whole cost of the image.</p>\n\n<p>Further, you can play around with the many options available to hone things for your use case. In session 219, ‚ÄúImages and Graphics Best Practices‚Äù from WWDC 18, Apple engineer Kyle Sluder showed an interesting way to control when decoding happens by using the <code class=\"highlighter-rouge\">kCGImageSourceShouldCacheImmediately</code> flag:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">func</span> <span class=\"nf\">downsampleImage</span><span class=\"p\">(</span><span class=\"n\">at</span> <span class=\"kt\">URL</span><span class=\"p\">:</span><span class=\"kt\">NSURL</span><span class=\"p\">,</span> <span class=\"nv\">maxSize</span><span class=\"p\">:</span><span class=\"kt\">Float</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">UIImage</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">sourceOptions</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"nv\">kCGImageSourceShouldCache</span><span class=\"p\">:</span><span class=\"kc\">false</span><span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"kt\">CFDictionary</span>\n    <span class=\"k\">let</span> <span class=\"nv\">source</span> <span class=\"o\">=</span> <span class=\"kt\">CGImageSourceCreateWithURL</span><span class=\"p\">(</span><span class=\"kt\">URL</span> <span class=\"k\">as</span> <span class=\"kt\">CFURL</span><span class=\"p\">,</span> <span class=\"n\">sourceOptions</span><span class=\"p\">)</span><span class=\"o\">!</span>\n    <span class=\"k\">let</span> <span class=\"nv\">downsampleOptions</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"nv\">kCGImageSourceCreateThumbnailFromImageAlways</span><span class=\"p\">:</span><span class=\"kc\">true</span><span class=\"p\">,</span>\n                             <span class=\"nv\">kCGImageSourceThumbnailMaxPixelSize</span><span class=\"p\">:</span><span class=\"n\">maxSize</span>\n                             <span class=\"nv\">kCGImageSourceShouldCacheImmediately</span><span class=\"p\">:</span><span class=\"kc\">true</span><span class=\"p\">,</span>\n                             <span class=\"nv\">kCGImageSourceCreateThumbnailWithTransform</span><span class=\"p\">:</span><span class=\"kc\">true</span><span class=\"p\">,</span>\n                             <span class=\"p\">]</span> <span class=\"k\">as</span> <span class=\"kt\">CFDictionary</span>\n    \n    <span class=\"k\">let</span> <span class=\"nv\">downsampledImage</span> <span class=\"o\">=</span> <span class=\"kt\">CGImageSourceCreateThumbnailAtIndex</span><span class=\"p\">(</span><span class=\"n\">source</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">downsampleOptions</span><span class=\"p\">)</span><span class=\"o\">!</span>\n    \n    <span class=\"k\">return</span> <span class=\"kt\">UIImage</span><span class=\"p\">(</span><span class=\"nv\">cgImage</span><span class=\"p\">:</span> <span class=\"n\">downsampledImage</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Here Core Graphics won‚Äôt bother decoding the image until you specifically ask for the thumbnail. Also, take care to pass <code class=\"highlighter-rouge\">kCGImageSourceCreateThumbnailMaxPixelSize</code> as we‚Äôve done in both examples because if you don‚Äôt - you‚Äôre getting back a thumbnail which is the same size of the image. From the docs:</p>\n\n<blockquote>\n  <p>‚Äú‚Ä¶if a maximum pixel size isn‚Äôt specified, then the thumbnail will be the size of the full image, which probably isn‚Äôt what you want.‚Äù</p>\n</blockquote>\n\n<p>So what happened? In short, we created a much smaller decoded image buffer than before by putting the shrinking part of equation into a thumbnail. Thinking back on our rendering pipeline, for the first part (the load) we instead passed an image buffer that represented only the size of the image view we‚Äôre showing it in instead of reflecting the entire image‚Äôs dimensions for the <code class=\"highlighter-rouge\">UIImage</code> to decode.</p>\n\n<p>Want a TL;DR for this entire article? Look for opportunities to downsample images instead of using <code class=\"highlighter-rouge\">UIImage</code> to downscale them.</p>\n\n<h3 id=\"bonus-points\">Bonus Points</h3>\n<p>I personally use this in tandem with the <a href=\"https://developer.apple.com/documentation/uikit/uitableviewdatasourceprefetching?language=swift\">prefetch API</a> introduced in iOS 11. Remember that we‚Äôre inherently introducing spikes in CPU usage since we‚Äôre decoding images even if we‚Äôre doing it ahead of when the table or collection view might need our cell.</p>\n\n<p>Since iOS is efficient at managing power demand when there is a constant need for it and in this case it‚Äôll likely be intermittent, it‚Äôs good to hop on your own queue to tackle something like this. This also moves the decoding to the background, which is another significant win.</p>\n\n<p>Cover your eyes, Objective-C code sample from my side project incoming:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c1\">// Use your own queue instead of a global async one to avoid potential thread explosion</span>\n<span class=\"o\">-</span> <span class=\"p\">(</span><span class=\"n\">void</span><span class=\"p\">)</span><span class=\"nv\">tableView</span><span class=\"p\">:(</span><span class=\"kt\">UITableView</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">tableView</span> <span class=\"nv\">prefetchRowsAtIndexPaths</span><span class=\"p\">:(</span><span class=\"kt\">NSArray</span><span class=\"o\">&lt;</span><span class=\"kt\">NSIndexPath</span> <span class=\"o\">*&gt;</span> <span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">indexPaths</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">downsampledImage</span> <span class=\"o\">!=</span> <span class=\"kc\">nil</span> <span class=\"o\">||</span> \n        <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">listItem</span><span class=\"o\">.</span><span class=\"n\">mediaAssetData</span> <span class=\"o\">==</span> <span class=\"kc\">nil</span><span class=\"p\">)</span> <span class=\"k\">return</span><span class=\"p\">;</span>\n    \n    <span class=\"kt\">NSIndexPath</span> <span class=\"o\">*</span><span class=\"n\">mediaIndexPath</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"kt\">NSIndexPath</span> <span class=\"nv\">indexPathForRow</span><span class=\"p\">:</span><span class=\"mi\">0</span>\n                                                     <span class=\"nv\">inSection</span><span class=\"p\">:</span><span class=\"kt\">SECTION_MEDIA</span><span class=\"p\">];</span>\n    <span class=\"k\">if</span> <span class=\"p\">([</span><span class=\"n\">indexPaths</span> <span class=\"nv\">containsObject</span><span class=\"p\">:</span><span class=\"n\">mediaIndexPath</span><span class=\"p\">])</span>\n    <span class=\"p\">{</span>\n        <span class=\"kt\">CGFloat</span> <span class=\"n\">scale</span> <span class=\"o\">=</span> <span class=\"n\">tableView</span><span class=\"o\">.</span><span class=\"n\">traitCollection</span><span class=\"o\">.</span><span class=\"n\">displayScale</span><span class=\"p\">;</span>\n        <span class=\"kt\">CGFloat</span> <span class=\"n\">maxPixelSize</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">tableView</span><span class=\"o\">.</span><span class=\"n\">width</span> <span class=\"o\">-</span> <span class=\"kt\">SSSpacingJumboMargin</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"n\">scale</span><span class=\"p\">;</span>\n        \n        <span class=\"nf\">dispatch_async</span><span class=\"p\">(</span><span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">downsampleQueue</span><span class=\"p\">,</span> <span class=\"o\">^</span><span class=\"p\">{</span>\n            <span class=\"c1\">// Downsample</span>\n            <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">downsampledImage</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"kt\">UIImage</span> <span class=\"nv\">downsampledImageFromData</span><span class=\"p\">:</span><span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">listItem</span><span class=\"o\">.</span><span class=\"n\">mediaAssetData</span>\n                               <span class=\"nv\">scale</span><span class=\"p\">:</span><span class=\"n\">scale</span>\n                        <span class=\"nv\">maxPixelSize</span><span class=\"p\">:</span><span class=\"n\">maxPixelSize</span><span class=\"p\">];</span>\n            \n            <span class=\"nf\">dispatch_async</span><span class=\"p\">(</span><span class=\"nf\">dispatch_get_main_queue</span><span class=\"p\">(),</span> <span class=\"o\">^</span> <span class=\"p\">{</span>\n                <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">listItem</span><span class=\"o\">.</span><span class=\"n\">downsampledMediaImage</span> <span class=\"o\">=</span> <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">downsampledImage</span><span class=\"p\">;</span>\n            <span class=\"p\">});</span>\n        <span class=\"p\">});</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<blockquote>\n  <p>Take care to use asset catalogs for the lion‚Äôs share of your raw image assets, since it already manages buffer sizes (and a lot more) for you already.</p>\n</blockquote>\n\n<p>For more inspiration on how to be a first class citizen of all things memory and images, be sure to catch these particularly informative sessions from WWDC 18:</p>\n\n<ul>\n  <li><a href=\"https://developer.apple.com/videos/play/wwdc2018/416/?time=1074\" target=\"_blank\">iOS Memory Deep Dive</a></li>\n  <li><a href=\"https://developer.apple.com/videos/play/wwdc2018/219/\" target=\"_blank\">Images and Graphics Best Practices</a></li>\n</ul>\n\n<h3 id=\"wrapping-up\">Wrapping Up</h3>\n<p>You don‚Äôt know what you don‚Äôt know. And in programming, you‚Äôre basically signing up for an entire career of always running 10,000 miles an hour just to keep pace with the innovations and change. Which means‚Ä¶ there‚Äôs going to be a mountain of APIs, frameworks, patterns or optimizations you simply weren‚Äôt aware of.</p>\n\n<p>And that can certainly be true with images. Most of the time, you initialize a <code class=\"highlighter-rouge\">UIImageView</code> with some beautiful pixels and move on. I get it, Moore‚Äôs Law and whatever. These phones are fast and have gigs of memory, and hey - we put humans on the Moon with a computer that had less than 100 kilobytes of memory.</p>\n\n<p>But dance with the devil long enough, and he‚Äôs bound to rear his horns. Don‚Äôt let jetsam pluck you from existence because a selfie took up 1 gigabyte of memory. Hopefully, this knowledge and these techniques can you save you a trip down the crash logs.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "They say the best camera is the one you have with you. If that adage holds any weight, then without question - stem to stern the iPhone is the most important camera on the planet. And our industry shows it, too.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2018-12-11T00:00:00-06:00",
            "date_modified": "2018-12-11T00:00:00-06:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["UIKit"]},{
            "id": "http://localhost:4000/supporting-external-displays",
            "url": "http://localhost:4000/supporting-external-displays/",
            "title": "Supporting External Displays",
            "content_html": "<p>Cupertino &amp; Friends¬© are, if anything, purposeful.</p>\n\n<p>When ensuring iOS icons would be nothing short of flawless, it‚Äôs been said that Scott Forstall kept a jeweler‚Äôs loupe in his office to check that each pixel on <em>every</em> icon was exemplary. Talk about ‚Äúpixel perfect‚Äù. The man himself apparently even <a href=\"https://www.businessinsider.com/steve-jobs-attention-to-detail-2011-10#when-he-was-hospitalized-he-rejected-masks-because-they-were-ugly-8\">debated the shade of grey</a> that should be used for the Apple Store‚Äôs‚Ä¶..<em>bathroom signs</em>.</p>\n\n<p>If we are to believe that no one single act is executed without astute purpose from Apple, we then must pay attention to the once puzzling introduction to WWDC 18‚Äôs session, <a href=\"https://developer.apple.com/videos/play/wwdc2018/233/\">‚ÄúAdding Delight to your iOS App‚Äù</a>, which began covering supporting external displays. Why spend time going over an API that hasn‚Äôt seen significant changes circa 2011?</p>\n\n<p>It seemed like the session was being conducted by a preacher with no pulpit. However, with the recently announced iPad Pro sporting USB-C 3.1 capabilities, the missing context is now present. Today, let‚Äôs talk about supporting external displays in our iOS apps.</p>\n\n<h3 id=\"window-quotes\">Window Quotes</h3>\n<p>It all begins with a homologically titled object in UIKit, the <code class=\"highlighter-rouge\">UIWindow</code>, and respecting the responsibilities that it represents. At its core, a window acts as a container for anything that should be on screen. We often don‚Äôt think of it much beyond its initial setup within the app delegate:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">func</span> <span class=\"nf\">application</span><span class=\"p\">(</span><span class=\"n\">_</span> <span class=\"nv\">application</span><span class=\"p\">:</span> <span class=\"kt\">UIApplication</span><span class=\"p\">,</span> <span class=\"n\">didFinishLaunchingWithOptions</span> <span class=\"nv\">launchOptions</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"kt\">UIApplicationLaunchOptionsKey</span><span class=\"p\">:</span> <span class=\"kt\">Any</span><span class=\"p\">]?)</span> <span class=\"o\">-&gt;</span> <span class=\"kt\">Bool</span> \n<span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">controller</span> <span class=\"o\">=</span> <span class=\"kt\">ViewController</span><span class=\"p\">()</span>\n    \n    <span class=\"n\">window</span> <span class=\"o\">=</span> <span class=\"kt\">UIWindow</span><span class=\"p\">()</span>\n    <span class=\"n\">window</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"n\">rootViewController</span> <span class=\"o\">=</span> <span class=\"n\">controller</span>\n    <span class=\"n\">window</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"nf\">makeKeyAndVisible</span><span class=\"p\">()</span>\n    \n    <span class=\"k\">return</span> <span class=\"kc\">true</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<blockquote>\n  <p>If your app uses storyboards, the above is done for you. This is one reason why Xcode templates its app delegate objects with a <code class=\"highlighter-rouge\">UIWindow</code> property.</p>\n</blockquote>\n\n<p>With that, we end up with a hierarchy that is stacked up like so, from bottom to top:</p>\n\n<ul>\n  <li>Device</li>\n  <li>Window</li>\n  <li>View (from the window‚Äôs root controller)</li>\n</ul>\n\n<p>Typically, it‚Äôs fine to move on and not think much about it. A window won‚Äôt do anything more than pass on any relevant events to its root controller (which in turn travels the down responder chain with its associated views). It provides no visible content of its own, merely acting as a harbinger of sorts for things happenings that would affect its root controller.</p>\n\n<p>But its utility lies in the fact that your iOS app can break free from the confines of an any iPhone or iPad (‚Ä¶or iPod touch, I guess) by way of being connected to another display.</p>\n\n<p>And Apple <em>really</em> wants us to know that the new iPad Pro is ready for such occasions. By default, when iOS detects another screen UIKit will mirror the key window‚Äôs contents. But, look at the marketing for the Pro:</p>\n\n<p><img src=\"../assets/images/lookNewScreen.jpg\" alt=\"External Display\" /></p>\n\n<p>If you inspect the image closer you‚Äôll notice that what‚Äôs showing on the monitor versus what‚Äôs on the iPad are <em>different</em>. <strong>This</strong> is the opportunity Apple wants developers to be aware of. Let‚Äôs walk through it.</p>\n\n<h3 id=\"the-setup\">The Setup</h3>\n<p>When thinking about how to be a first class citizen for supporting external displays, there really isn‚Äôt much involved from an engineering perspective. In the aforementioned WWDC session, three main concerns are laid out:</p>\n\n<ul>\n  <li>Connectivity: Handling the presence of another display.</li>\n  <li>Behavior: How your app should respond to that connection.</li>\n  <li>Connection Transitions: Handling the removal of another display.</li>\n</ul>\n\n<h3 id=\"connectivity\">Connectivity</h3>\n<p>The first logical step is to be aware of when one should prepare interfaces for an external display. UIKit offers us two discrete responsibilities to consider. The first is the <code class=\"highlighter-rouge\">UIScreen</code> singleton, which has an array of screens the app is tracking:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">class</span> <span class=\"k\">var</span> <span class=\"nv\">screens</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"kt\">UIScreen</span><span class=\"p\">]</span> <span class=\"p\">{</span> <span class=\"k\">get</span> <span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>This is where we can snag a reference to the screen we need. In addition to housing a controller and its views, <code class=\"highlighter-rouge\">UIWindow</code> also has an assignable <code class=\"highlighter-rouge\">UIScreen</code> property. With it, we can control which screen each window should display its contents on.</p>\n\n<p>The process looks similar to the following:</p>\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">externalScreen</span> <span class=\"o\">=</span> <span class=\"kt\">UIScreen</span><span class=\"o\">.</span><span class=\"n\">screens</span><span class=\"o\">.</span><span class=\"n\">last</span> \n<span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">externalWindow</span> <span class=\"o\">=</span> <span class=\"kt\">UIWindow</span><span class=\"p\">()</span>\n    <span class=\"n\">externalWindow</span><span class=\"o\">.</span><span class=\"n\">screen</span> <span class=\"o\">=</span> <span class=\"n\">externalScreen</span>\n    <span class=\"n\">externalWindow</span><span class=\"o\">.</span><span class=\"n\">rootViewController</span> <span class=\"o\">=</span> <span class=\"kt\">UIViewController</span><span class=\"p\">()</span>\n    <span class=\"n\">externalWindow</span><span class=\"o\">.</span><span class=\"n\">isHidden</span> <span class=\"o\">=</span> <span class=\"kc\">false</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<blockquote>\n  <p>By default, a window‚Äôs screen property is set to the hardware‚Äôs current screen. For a window that‚Äôll show unique content on an external display, set it before you show the window as switching screens on an already displayed window carries significant performance costs.</p>\n</blockquote>\n\n<p>It‚Äôs at this point that you‚Äôd want to supply the relevant content to the new window‚Äôs <code class=\"highlighter-rouge\">rootViewController</code> property. So, for the image above showing the iPad Pro, Apple has created a controller that just shows the primary content and not the editing tools below it (as on the iPad‚Äôs screen).</p>\n\n<p>The execution is easy to follow, but knowing when to do the work above is accomplished by way of Cocoa Touch‚Äôs oldest broadcasting network - <code class=\"highlighter-rouge\">NSNotification</code>.</p>\n\n<p>In particular, there are two:</p>\n\n<ul>\n  <li><code class=\"highlighter-rouge\">NSNotification.Name.UIScreenDidConnect</code></li>\n  <li><code class=\"highlighter-rouge\">NSNotification.Name.UIScreenDidDisconnect</code></li>\n</ul>\n\n<p>If you were wondering why we set the <code class=\"highlighter-rouge\">screen</code> property on the window to the last instance in the array, this is why. That code should be responding to first notification above, thus indicating to us that the last screen is the external display we‚Äôre after:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span><span class=\"o\">.</span><span class=\"nf\">addObserver</span><span class=\"p\">(</span><span class=\"nv\">forName</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"kt\">UIScreenDidConnect</span><span class=\"p\">,</span> <span class=\"nv\">object</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">,</span> <span class=\"nv\">queue</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">connectNotice</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n    <span class=\"k\">let</span> <span class=\"nv\">extScreen</span> <span class=\"o\">=</span> <span class=\"n\">notification</span><span class=\"o\">.</span><span class=\"n\">object</span> <span class=\"k\">as!</span> <span class=\"kt\">UIScreen</span>\n    <span class=\"k\">let</span> <span class=\"nv\">extScreenBounds</span> <span class=\"o\">=</span> <span class=\"n\">extScreen</span><span class=\"o\">.</span><span class=\"n\">bounds</span>\n    \n    <span class=\"c1\">// Our unique content</span>\n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">extWindow</span> <span class=\"o\">=</span> <span class=\"kt\">UIWindow</span><span class=\"p\">(</span><span class=\"nv\">frame</span><span class=\"p\">:</span> <span class=\"n\">extScreenBounds</span><span class=\"p\">)</span>\n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">extWindow</span><span class=\"o\">.</span><span class=\"n\">screen</span> <span class=\"o\">=</span> <span class=\"n\">extScreen</span>\n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">extWindow</span><span class=\"o\">.</span><span class=\"n\">rootViewController</span> <span class=\"o\">=</span> <span class=\"kt\">UIViewController</span><span class=\"p\">()</span>\n    <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">extWindow</span><span class=\"o\">.</span><span class=\"n\">isHidden</span> <span class=\"o\">=</span> <span class=\"kc\">false</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>The flip side looks about the same, except undoing all of the fine work you did above:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span><span class=\"o\">.</span><span class=\"nf\">addObserver</span><span class=\"p\">(</span><span class=\"nv\">forName</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"kt\">UIScreenDidDisconnect</span><span class=\"p\">,</span> <span class=\"nv\">object</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">,</span> <span class=\"nv\">queue</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">disconnectNotice</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n   <span class=\"k\">let</span> <span class=\"nv\">extScreen</span> <span class=\"o\">=</span> <span class=\"n\">notification</span><span class=\"o\">.</span><span class=\"n\">object</span> <span class=\"k\">as!</span> <span class=\"kt\">UIScreen</span>\n\n   <span class=\"k\">if</span> <span class=\"n\">extScreen</span> <span class=\"o\">==</span> <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">extWindow</span><span class=\"o\">.</span><span class=\"n\">screen</span> \n   <span class=\"p\">{</span>\n        <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">extWindow</span><span class=\"o\">.</span><span class=\"n\">hidden</span> <span class=\"o\">=</span> <span class=\"kc\">true</span>\n        <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">extWindow</span> <span class=\"o\">=</span> <span class=\"kc\">nil</span>\n   <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>Disconnects are trivial to handle, due to the fact that UIKit bears most of the burden. Simply assigning <code class=\"highlighter-rouge\">true</code> to your window‚Äôs <code class=\"highlighter-rouge\">hidden</code> hidden property and nilifying (nillifying, nil-lify, nillin‚Äô?) the instance tears everything down. No other tomfoolery required.</p>\n\n<p><strong>Bonus Points - Screen Resolution</strong> <br />\nIt‚Äôs not too uncommon for screens, especially external ones, to change their resolution. Consider dual monitors connected to a mac; I often pop into display preferences to make things look just how I want. The process of doing so always ensures that the scale, transforms and general look of every interface currently open immediately looks like they just dropped 14 pounds of acid.</p>\n\n<p>To ensure a drug free interface, opt to respond to <code class=\"highlighter-rouge\">UIScreenModeDidChangeNotification</code>:</p>\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span><span class=\"o\">.</span><span class=\"nf\">addObserver</span><span class=\"p\">(</span><span class=\"nv\">forName</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"kt\">UIScreenModeDidChange</span><span class=\"p\">,</span> <span class=\"nv\">object</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">,</span> <span class=\"nv\">queue</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">modeNotice</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n    <span class=\"k\">if</span> <span class=\"k\">let</span> <span class=\"nv\">extScreen</span> <span class=\"o\">=</span> <span class=\"n\">modeNotice</span><span class=\"o\">.</span><span class=\"n\">object</span> <span class=\"k\">as?</span> <span class=\"kt\">UIScreen</span><span class=\"p\">,</span> <span class=\"n\">extScreen</span> <span class=\"o\">==</span> <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">extWindow</span><span class=\"o\">.</span><span class=\"n\">screen</span>\n    <span class=\"p\">{</span>\n        <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">view</span><span class=\"o\">.</span><span class=\"nf\">setNeedsLayout</span><span class=\"p\">()</span>\n        <span class=\"k\">self</span><span class=\"o\">.</span><span class=\"n\">view</span><span class=\"o\">.</span><span class=\"nf\">layoutSubviews</span><span class=\"p\">()</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<h3 id=\"behavior\">Behavior</h3>\n<p>It‚Äôs important to note that whatever you‚Äôre planning on displaying on the screen won‚Äôt be directly interactive. All of that interactivity will still be driven by the iOS device. This means that you‚Äôll want to set things up accordingly, likely reserving all this new screen real estate to display the marquee parts of your content.</p>\n\n<p>The reason why is simple - the external display likely won‚Äôt have touch controls. I say likely because, to wit, the only way I suppose it <em>could</em> is if it‚Äôs another iOS device using external display software.</p>\n\n<p>Unlikely edge case notwithstanding, the main idea is that it‚Äôs a giant projected display, so treat it like one:</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"k\">if</span> <span class=\"n\">extDisplayShowing</span> \n<span class=\"p\">{</span>\n    <span class=\"nf\">presentContentOnExternalDisplay</span><span class=\"p\">(</span><span class=\"n\">content</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n<span class=\"k\">else</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">let</span> <span class=\"nv\">contentDisplayController</span> <span class=\"o\">=</span> <span class=\"kt\">UIContentDisplayViewController</span><span class=\"p\">(</span><span class=\"n\">with</span> <span class=\"nv\">content</span><span class=\"p\">:</span><span class=\"n\">content</span><span class=\"p\">)</span>\n    <span class=\"n\">navigationController</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"nf\">pushViewController</span><span class=\"p\">(</span><span class=\"n\">contentDisplayController</span><span class=\"p\">,</span> <span class=\"nv\">animated</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<p>The paradigm is different. This is your chance to show off the most important, public components of your content while ensuring control of said content stays snuggly nestled within the iOS device.</p>\n\n<h3 id=\"connection-transitions\">Connection Transitions</h3>\n<p>The last piece laid out by the fine engineers of Cupertino during the session was this idea of ‚Äúconnection transitions‚Äù, but really it‚Äôs chiefly concerned with the first step.</p>\n\n<p>Essentially, as iOS engineers there is one thing we must always strive to keep for users: context.</p>\n\n<p>It‚Äôs incredibly frustrating to use an app that doesn‚Äôt respect it. Tap a row with a disclosure indicator, and instead of pushing onto the navigation stack you get some off beat modal transition. Or if there is a side menu, tapping it <em>does</em> do a push. It‚Äôs weird, and you know it when you see it. Ambiguity in software is inherently taxing to the end user, so it‚Äôs best to avoid it.</p>\n\n<p>When you receive a connect or disconnect notice, strive to keep the current context and flow of your app maintained. For our example above, it might look  something like this :</p>\n\n<div class=\"language-swift highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span><span class=\"o\">.</span><span class=\"nf\">addObserver</span><span class=\"p\">(</span><span class=\"nv\">forName</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"kt\">UIScreenDidDisconnect</span><span class=\"p\">,</span> <span class=\"nv\">object</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">,</span> <span class=\"nv\">queue</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">disconnectNotice</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n    <span class=\"k\">let</span> <span class=\"nv\">contentDisplayController</span> <span class=\"o\">=</span> <span class=\"kt\">UIContentDisplayViewController</span><span class=\"p\">(</span><span class=\"n\">with</span> <span class=\"nv\">content</span><span class=\"p\">:</span><span class=\"n\">content</span><span class=\"p\">)</span>\n    <span class=\"n\">navigationController</span><span class=\"p\">?</span><span class=\"o\">.</span><span class=\"nf\">pushViewController</span><span class=\"p\">(</span><span class=\"n\">contentDisplayController</span><span class=\"p\">,</span> <span class=\"nv\">animated</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n<span class=\"kt\">NotificationCenter</span><span class=\"o\">.</span><span class=\"k\">default</span><span class=\"o\">.</span><span class=\"nf\">addObserver</span><span class=\"p\">(</span><span class=\"nv\">forName</span><span class=\"p\">:</span> <span class=\"o\">.</span><span class=\"kt\">UIScreenDidConnect</span><span class=\"p\">,</span> <span class=\"nv\">object</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">,</span> <span class=\"nv\">queue</span><span class=\"p\">:</span> <span class=\"kc\">nil</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"p\">(</span><span class=\"n\">connectNotice</span><span class=\"p\">)</span> <span class=\"k\">in</span>\n    <span class=\"nf\">presentContentOnExternalDisplay</span><span class=\"p\">(</span><span class=\"n\">content</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n\n<blockquote>\n  <p>If your app is suspended when a notification arrives, UIKit delivers it when your app begins running again.</p>\n</blockquote>\n\n<p>It‚Äôs about thinking of any context that <em>could</em> be lost from any of these transitions that should later be restored. So, be thinking about currently selected index paths, selected content or view hierarchies that you might need to do some bookkeeping for to later restore.</p>\n\n<h3 id=\"when-and-why\">When, and Why</h3>\n<p>To me, real craftsmanship shows through when external display support is provided in a way that, forgive my stereotypical phrase - truly enhances the app‚Äôs experience.</p>\n\n<p>Think of Keynote. The iOS app can turn into a clicker to present the slides, or a game that houses controls locally on the phone but projects meaningful game play on your giant TV. External display support really shines here - whereas an app like <a href=\"https://www.streaksworkout.com\" target=\"_blank\">Streaks Workout</a> does just fine with mirroring its contents. It doesn‚Äôt stand to gain anything by providing any other support to external displays.</p>\n\n<p>It‚Äôs a matter of real life access control. Public or private. Your iOS device is almost always private. All of us get a little nervous when projecting it onto a huge screen in the office to show just that <em>one</em> picture. But like programming, we must consider context. The external display is public - so ask yourself what your app might stand to gain, if anything, by making content publicly shown that‚Äôs entirely unique to its display.</p>\n\n<h3 id=\"wrapping-up\">Wrapping Up</h3>\n<p>If hipster culture has taught us anything, perhaps its unintentional wisdom shows us that sometimes what‚Äôs old is new again. Supporting external windows doesn‚Äôt require any shiny new API, and the process of how to do it isn‚Äôt lighting up your Twitter feed.</p>\n\n<p>But the core ethos of iOS development is marrying hardware with software, and promoting their tight coupling with startlingly efficient execution. So I would submit to you, supporting and coding against external display support is absolutely nothing new - but it is more <em>relevant</em> to us than it was before <a href=\"https://www.apple.com/newsroom/2018/10/new-ipad-pro-with-all-screen-design-is-most-advanced-powerful-ipad-ever/\">Apple‚Äôs event</a>.</p>\n\n<p>Until next time ‚úåÔ∏è.</p>",
            "summary": "Cupertino &amp; Friends¬© are, if anything, purposeful.",
            "image": "http://localhost:4000/assets/images/logo.png",
            "date_published": "2018-11-03T00:00:00-05:00",
            "date_modified": "2018-11-03T00:00:00-05:00",
            "author": {
              "name": {"twitter":"jordanmorgan10","picture":"/assets/images/about/headshot.jpeg"}},
            "tags": ["UIKit"]}]
}